System.register(["./index-433d8403.js","./director-c293a59c.js","./deprecated-48c82c8e.js","./node-event-0336ef70.js","./pipeline-state-manager-c8832894.js","./buffer-barrier-8663498b.js","./touch-08df655d.js"],(function(e){"use strict";var t,r,n,i,a,o,s,u,d,c,g,y,f,p,h,l,m;return{setters:[function(e){t=e.f,r=e.b2,n=e.b1,i=e.ad,a=e.bE,o=e.bX,s=e.cu,u=e.bF,d=e.d,c=e.bC,g=e.bH,y=e.bI,f=e.J,p=e.bj},function(){},function(e){h=e.g,l=e.G},function(e){m=e.C},function(){},function(){},function(){}],execute:function(){h.on(l.EVENT_POST_SUBSYSTEM_INIT,(function(){x.init()}));var L,_,v,M,S,E,x=e("SortingLayers",function(){function e(){}return e.getSortingPriority=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),(e+32768<<16|t+32768)>>>0},e.getLayerIndex=function(e){void 0===e&&(e=0);var r=0;return this.indexMap.has(e)?r=this.indexMap.get(e):t(2105),r},e.getLayerIndexByName=function(e){var t=this.getLayerByName(e);return this.getLayerIndex(t)},e.getLayerName=function(e){void 0===e&&(e=0);var r="";return this.nameMap.has(e)?r=this.nameMap.get(e):t(2105),r},e.getLayerByName=function(e){for(var r=this.nameMap.size,n=this.nameMap.keys(),i=0,a=0;a<r;a++)if(i=n.next().value,this.nameMap.get(i)===e)return i;return t(2106),0},e.isLayerValid=function(e){return!!this.indexMap.has(e)||(t(2105),!1)},e.getBuiltinLayers=function(){return[{id:0,name:"default",value:0}]},e.init=function(){var t=r.querySettings(n.Category.ENGINE,"sortingLayers");t&&0!==t.length||(t=this.getBuiltinLayers()),e.resetState();for(var a=0;a<t.length;a++){var o=t[a];e.setLayer(o.id,o.name,o.value),e.Enum[o.name]=o.id}i.update(e.Enum),i.sortList(e.Enum,(function(t,r){return e.getLayerIndex(t.value)-e.getLayerIndex(r.value)}))},e.setLayer=function(e,t,r){this.nameMap.set(e,t),this.indexMap.set(e,r)},e.resetState=function(){for(var t=Object.keys(e.Enum),r=0;r<t.length;r++)delete e.Enum[e.Enum[t[r]]],delete e.Enum[t[r]];e.indexMap.clear(),e.nameMap.clear()},e}());x.nameMap=new Map,x.indexMap=new Map,x.Enum=i({default:0}),e("Sorting",(L=a("cc.Sorting"),_=o(x.Enum),L(v=s((M=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this)._sortingLayer=S&&S(),t._sortingOrder=E&&E(),t._modelRenderer=null,t}u(t,e);var r=t.prototype;return r.__preload=function(){this._modelRenderer=this.getComponent("cc.ModelRenderer"),this._modelRenderer||d(16301,this.node.name),this._updateSortingPriority()},r._updateSortingPriority=function(){var e=x.getLayerIndex(this._sortingLayer),t=x.getSortingPriority(e,this._sortingOrder);this._modelRenderer&&this._modelRenderer.isValid&&(this._modelRenderer.priority=t)},c(t,[{key:"sortingLayer",get:function(){return this._sortingLayer},set:function(e){e!==this._sortingLayer&&x.isLayerValid(e)&&(this._sortingLayer=e,this._updateSortingPriority())}},{key:"sortingOrder",get:function(){return this._sortingOrder},set:function(e){e!==this._sortingOrder&&(this._sortingOrder=f(e,-32768,32767),this._updateSortingPriority())}}]),t}(m),g(M.prototype,"sortingLayer",[_],Object.getOwnPropertyDescriptor(M.prototype,"sortingLayer"),M.prototype),S=y(M.prototype,"_sortingLayer",[p],(function(){return x.Enum.default})),E=y(M.prototype,"_sortingOrder",[p],(function(){return 0})),v=M))||v)||v))}}}));
