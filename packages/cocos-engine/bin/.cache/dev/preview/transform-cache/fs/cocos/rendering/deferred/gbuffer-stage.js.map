{"version":3,"names":["ccclass","_coreDataDecoratorsIndexJs","displayOrder","type","serializable","_defineJs","SetIndex","_passPhaseJs","getPhaseID","_renderQueueJs","renderQueueClearFunc","convertRenderQueue","renderQueueSortFunc","_gfxIndexJs","ClearFlagBit","Color","Rect","_pipelineFuncsJs","SRGBToLinear","_renderInstancedQueueJs","RenderInstancedQueue","_renderStageJs","RenderStage","_enumJs","DeferredStagePriority","_renderSceneCorePassJs","BatchingSchemes","_pipelineSerializationJs","RenderQueueDesc","RenderQueueSortMode","execute","colors","_export","GbufferStage","_dec","_dec2","_dec3","_class","_class2","_class3","_RenderStage","_inheritsLoose","_this","call","renderQueues","_initializer","_renderQueues","_renderArea","_instancedQueue","_phaseID","_proto","prototype","initialize","info","activate","pipeline","flow","i","length","destroy","render","camera","clear","_pipeline","device","forEach","generateRenderArea","updateQuadVertexData","window","renderObjects","pipelineSceneData","m","p","k","ro","subModels","model","subModel","passes","pass","phase","batchingScheme","INSTANCING","instancedBuffer","getInstancedBuffer","merge","queue","add","insertRenderPass","cmdBuff","commandBuffers","uploadBuffers","clearFlag","COLOR","isHDR","clearColor","x","y","z","w","deferredData","getPipelineRenderData","framebuffer","gbufferFrameBuffer","renderPass","beginRenderPass","clearDepth","clearStencil","setScissor","generateScissor","setViewport","generateViewport","bindDescriptorSet","GLOBAL","descriptorSet","recordCommandBuffer","endRenderPass","initInfo","name","priority","GBUFFER","tag","isTransparent","sortMode","FRONT_TO_BACK","stages","BACK_TO_FRONT","_applyDecoratedInitializer"],"sources":["../../../../../../../../../cocos/rendering/deferred/gbuffer-stage.ts"],"mappings":"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"}