{"version":3,"names":["load","task","done","firstTask","progress","finish","total","input","length","canInvoke","options","__exclude__","Object","create","output","forEach","item","cb","subTask","Task","onProgress","onComplete","err","result","isFinished","cclegacy","assetManager","force","BUILD","error","message","stack","dispatch","push","recycle","loadOneAssetPipeline","async","clear","gatherAsset","loadDepends","asset","_ref","uuid","id","config","cacheAsset","depends","addRef","getDepends","repeatItem","content","callbacks","onError","prototype","decRef","Array","isArray","map","_iterator","_createForOfIteratorHelperLoose","_step","dependAsset","value","Asset","_uuid","setProperties","onLoaded","onLoadedInvokedMap","has","nativeDependMap","add","e","EDITOR","PREVIEW","initDefault","SceneAsset","call","files","remove","parsed","validate","cache","i","l","pipeline","_export","setters","_virtualInternal253AconstantsJs","_assetsAssetJs","_coreIndexJs","_packManagerJs","packManager","default","_parserJs","parser","_pipelineJs","Pipeline","_sharedJs","assets","_taskJs","_utilitiesJs","checkCircleReference","_dependMapsJs","execute","fetch","isNative","file","reloadAsset","data","parse","exclude","ext","_exclude$uuid","get","__uuid__"],"sources":["../../../../../../../../../cocos/asset/asset-manager/load.ts"],"mappings":"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"}