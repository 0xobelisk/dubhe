{"version":3,"names":["assertIsTrue","_coreIndexJs","_corePoseJs","applyDeltaPose","blendPoseInto","_stateMachineStateMachineEvalJs","TopLevelStateMachineEvaluation","_poseNodeJs","PoseNode","_motionSyncRuntimeMotionSyncJs","RuntimeMotionSyncManager","_stashRuntimeStashJs","RuntimeStashManager","execute","_export","DefaultTopLevelPoseNode","_PoseNode","_inheritsLoose","graph","bindingContext","poseStashAllocator","_this","call","_layerRecords","layerEvaluationRecords","layers","map","layer","record","LayerEvaluationRecord","_proto","prototype","reenter","bind","_context","settle","context","layerRecords","nLayers","length","iLayer","getLayerWeight","layerIndex","weight","setLayerWeight","getLayerTopLevelStateMachineEvaluation","stateMachineEvaluation","overrideClips","layerRecord","_pushAdditiveFlag","additive","_popAdditiveFlag","doUpdate","update","doEvaluate","finalPose","pushDefaultedPose","layerPose","evaluate","layerActualWeight","passthroughWeight","transformFilter","popPose","postEvaluate","_createClass","key","get","_layer$mask","_topLevelStateMachineEval","_stashManager","_motionSyncManager","_mask","undefined","stashManager","_iterator","_createForOfIteratorHelperLoose","stashes","_step","done","_step$value","value","stashId","_","addStash","motionSyncManager","_setLayerWideContextProperties","_iterator2","_step2","_step2$value","stash","setStash","mask","stateMachine","name","_unsetLayerWideContextProperties","_proto2","createTransformFilter","sync","reset"],"sources":["../../../../../../../../../../cocos/animation/marionette/pose-graph/default-top-level-pose-node.ts"],"mappings":"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"}