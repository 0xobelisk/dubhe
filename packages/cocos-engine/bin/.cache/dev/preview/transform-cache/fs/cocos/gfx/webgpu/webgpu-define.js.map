{"version":3,"names":["setters","_virtualInternal253AconstantsJs","WEBGPU","_webgpuInstantiatedJs","gfx","webgpuAdapter","glslangWasmModule","promiseForWebGPUInstantiation","twgslModule","_overrideJs","CommandBuffer","Device","Buffer","_baseDefineJs","ShaderStageFlagBit","BufferUsageBit","_coreGlobalExportsJs","ccwindow","execute","then","originDeviceInitializeFunc","prototype","initialize","info","adapter","device","preinitializedWebGPUDevice","lost","console","error","Error","log","call","flushCommands","oldCreateTexture","createTexture","createTextureView","oldCreateBuffer","createBuffer","createBufferView","oldDraw","draw","drawInfo","drawByInfo","oldUpdateBuffer","update","data","size","usage","INDIRECT","updateIndirect","drawInfos","updateSize","undefined","byteLength","Uint8Array","buffer","byteOffset","oldCmdUpdateBuffer","updateBuffer","oldBindDescriptorSet","bindDescriptorSet","set","descriptorSet","dynamicOffsets","Uint32Array","oldCmdCopyBuffersToTexture","copyBuffersToTexture","buffers","texture","regions","ucharBuffers","i","length","push","oldDeviceCopyBuffersToTexture","copyTexImagesToTexture","texImages","_canvasElem$getContex","canvasElem","imageData","getContext","getImageData","width","height","buff","rawBuffer","HTMLImageElement","ImageBitmap","img","canvas","document","createElement","ctx","drawImage","SEPARATE_SAMPLER_BINDING_OFFSET","seperateCombinedSamplerTexture","shaderSource","samplerReg","iter","exec","referredMap","Map","samplerName","samplerType","code","sampReg","it","replace","builtinSample","replaceBultin","target","forEach","sampleFunc","builtinSampleReg","RegExp","builtinFuncIter","funcReg","funcIter","funcSet","Set","paramTypeMap","_loop","clear","params","paramsRes","slice","includes","paramIndexSet","paramArr","split","paramDecl","typeDecl","paramName","add","funcName","has","funcSamplerReg","matches","matchAll","_iterator","_createForOfIteratorHelperLoose","_step","done","matched","value","match","stripStr","queued","paramIndex","newParams","join","newInvokeStr","count","startIndex","indexOf","index","endIndex","at","nextLeft","nextRight","Math","min","funcBody","newFunc","type","name","functionDefs","precisionKeyWord","isNanIndex","isInfIndex","firstPrecisionIdx","reflect","wgsl","bindingList","_iterator2","_step2","wgslStr","reg","binding","overwriteBlock","regexp","src","blockName","block","blocks","find","ele","overwriteStr","createShader","shaderInfo","wgslStages","stages","glslSource","source","stageStr","stage","VERTEX","FRAGMENT","sourceCode","spv","glslang","compileGLSL","twgsl","convertSpirV2WGSL","shader","createShaderNative","_iterator3","_step3","bindings","u8Array","reflectBinding","cacheReadOnlyWGPUProperties","props","descriptor","writable","map","prop","Object","defineProperty","typename","oldCreate","res","_loop2","_step4","get","_iterator4","oldInit","_iterator5","_step5"],"sources":["../../../../../../../../../cocos/gfx/webgpu/webgpu-define.ts"],"mappings":"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"}