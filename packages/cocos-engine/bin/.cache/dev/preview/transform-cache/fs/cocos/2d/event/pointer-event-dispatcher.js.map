{"version":3,"names":["setters","_inputIndexJs","Input","input","_inputTypesIndexJs","EventTouch","_sceneGraphNodeEventProcessorJs","DispatcherEventType","NodeEventProcessor","_coreIndexJs","js","_inputTypesEventEnumJs","InputEventType","_inputInputJs","EventDispatcherPriority","execute","mouseEvents","EventType","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","MOUSE_WHEEL","touchEvents","TOUCH_START","TOUCH_MOVE","TOUCH_END","TOUCH_CANCEL","PointerEventDispatcher","priority","UI","_isListDirty","_inDispatchCount","_pointerEventProcessorList","_processorListToAdd","_processorListToRemove","_registerEventDispatcher","callbacksInvoker","on","ADD_POINTER_EVENT_PROCESSOR","addPointerEventProcessor","REMOVE_POINTER_EVENT_PROCESSOR","removePointerEventProcessor","MARK_LIST_DIRTY","_markListDirty","_proto","prototype","dispatchEvent","event","eventType","type","includes","dispatchEventTouch","dispatchEventMouse","pointerEventProcessor","push","array","remove","eventMouse","_sortPointerEventProcessorList","pointerEventProcessorList","length","dispatchToNextEventDispatcher","i","isEnabled","shouldHandleEventMouse","_handleEventMouse","preventSwallow","_updatePointerEventProcessorList","eventTouch","touch","shouldHandleEventTouch","_handleEventTouch","claimedTouchIdList","getID","cancelEvent","index","indexOf","removeAt","listToAdd","addLength","listToRemove","removeLength","node","_uiProps","trans","uiTransformComp","cachedCameraPriority","cameraPriority","sort","_sortByPriority","p1","p2","node1","node2","activeInHierarchy","n1","n2","ex","_parent","parent","uuid","_parent2","_n","_n$parent","_n2","_n2$parent","priority1","getSiblingIndex","priority2","_export","pointerEventDispatcher"],"sources":["../../../../../../../../../cocos/2d/event/pointer-event-dispatcher.ts"],"mappings":"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"}