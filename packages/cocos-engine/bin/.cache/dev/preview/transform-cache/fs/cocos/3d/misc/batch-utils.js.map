{"version":3,"names":["checkMaterialisSame","comp1","comp2","matNum","sharedMaterials","length","i","getRenderMaterial","setters","_frameworkMeshRendererJs","MeshRenderer","_assetsMeshJs","Mesh","_coreIndexJs","Mat4","execute","_export","BatchingUtility","batchStaticModel","staticModelRoot","batchedRoot","models","getComponentsInChildren","console","error","mesh","validateMergingMesh","node","name","batchedMesh","worldMat","rootWorldMatInv","getWorldMatrix","invert","comp","multiply","merge","enabled","batchedModel","addComponent","unbatchStaticModel","getComponent","destroyRenderingMesh","destroy"],"sources":["../../../../../../../../../cocos/3d/misc/batch-utils.ts"],"mappings":"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"}