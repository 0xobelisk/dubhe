{"version":3,"names":["ccclass","_coreDataDecoratorsIndexJs","displayOrder","type","serializable","_renderSceneSceneLightJs","LightType","_defineJs","UBODeferredLight","SetIndex","UBOForwardLight","UBOLocal","_passPhaseJs","getPhaseID","_gfxIndexJs","Color","Rect","BufferUsageBit","MemoryUsageBit","BufferInfo","BufferViewInfo","DescriptorSetInfo","ClearFlagBit","_renderStageJs","RenderStage","_enumJs","DeferredStagePriority","_planarShadowQueueJs","PlanarShadowQueue","_assetAssetsMaterialJs","Material","_pipelineStateManagerJs","PipelineStateManager","_coreGeometryIndexJs","intersect","Sphere","_coreMathIndexJs","Vec3","Vec4","_renderQueueJs","renderQueueClearFunc","convertRenderQueue","renderQueueSortFunc","_pipelineSerializationJs","RenderQueueDesc","_uiPhaseJs","UIPhase","_coreGeometryAabbJs","AABB","_coreIndexJs","geometry","execute","_v3","_rangedDirLightBoundingBox","_tmpBoundingBox","colors","_export","LightingStage","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_class3","_RenderStage","_inheritsLoose","_this","call","_deferredLitsBufs","_maxDeferredLights","LIGHTS_PER_PASS","_lightBufferData","_lightMeterScale","_descriptorSet","_descriptorSetLayout","_renderArea","_uiPhase","_deferredMaterial","_initializer","renderQueues","_initializer2","_phaseID","_renderQueues","_proto","prototype","initialize","info","gatherLights","camera","pipeline","_pipeline","cmdBuff","commandBuffers","sphereLights","scene","spotLights","pointLights","rangedDirLights","_sphere","create","_vec4Array","Float32Array","exposure","idx","elementLen","length","fieldLen","i","light","set","position","x","y","z","range","sphereFrustum","frustum","toArray","SPHERE","color","useColorTemperature","finalColor","pipelineSceneData","isHDR","luminance","size","SPOT","spotAngle","direction","POINT","transform","node","getWorldMatrix","aabbFrustum","RANGED_DIRECTIONAL","illuminance","right","scale","offset","updateBuffer","_createStageDescriptor","pass","device","totalSize","BYTES_PER_ELEMENT","Math","ceil","capabilities","uboOffsetAlignment","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","deferredLitsBufView","createDescriptorSet","localSetLayout","bindBuffer","BINDING","_localUBO","SIZE","activate","flow","_planarQueue","deferredLightingMaterial","destroy","_this$_deferredLitsBu","render","_camera$geometryRende","sceneData","renderObjects","gatherShadowPasses","generateRenderArea","deferredData","getPipelineRenderData","lightingMat","passes","shader","getShaderVariant","descriptorSet","bindTexture","gbufferRenderTargets","bindSampler","sampler","outputDepth","update","clearFlag","COLOR","clearColor","w","framebuffer","outputFrameBuffer","renderPass","pipelineUBO","updateShadowUBO","beginRenderPass","clearDepth","clearStencil","setScissor","generateScissor","setViewport","generateViewport","bindDescriptorSet","GLOBAL","inputAssembler","quadIAOffscreen","pso","getOrCreatePipelineState","bindPipelineState","MATERIAL","LOCAL","bindInputAssembler","draw","forEach","m","p","k","ro","subModels","model","subModel","phase","insertRenderPass","recordCommandBuffer","geometryRenderer","endRenderPass","initInfo","name","priority","LIGHTING","tag","_applyDecoratedInitializer"],"sources":["../../../../../../../../../cocos/rendering/deferred/lighting-stage.ts"],"mappings":"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"}