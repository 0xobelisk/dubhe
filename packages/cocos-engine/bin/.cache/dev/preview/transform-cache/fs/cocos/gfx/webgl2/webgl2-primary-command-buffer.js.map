{"version":3,"names":["setters","_baseDefineJs","BufferUsageBit","_webgl2CommandBufferJs","WebGL2CommandBuffer","_webgl2CommandsJs","WebGL2CmdFuncBeginRenderPass","WebGL2CmdFuncBindStates","WebGL2CmdFuncBlitTexture","WebGL2CmdFuncCopyBuffersToTexture","WebGL2CmdFuncDraw","WebGL2CmdFuncExecuteCmds","WebGL2CmdFuncUpdateBuffer","_webgl2DefineJs","WebGL2DeviceManager","execute","_export","WebGL2PrimaryCommandBuffer","_WebGL2CommandBuffer","_inheritsLoose","apply","arguments","_proto","prototype","beginRenderPass","renderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","instance","gpuRenderPass","gpuFramebuffer","_isInRenderPass","draw","infoOrAssembler","_isStateInvalied","bindStates","info","drawInfo","_numDrawCalls","_numInstances","instanceCount","indexCount","vertexCount","_curGPUPipelineState","glPrimitive","_numTris","Math","max","console","error","setViewport","viewport","_WebGL2DeviceManager$","cache","stateCache","gl","left","top","width","height","setScissor","scissor","_WebGL2DeviceManager$2","scissorRect","x","y","updateBuffer","buffer","data","size","gpuBuffer","buffSize","undefined","usage","INDIRECT","byteLength","copyBuffersToTexture","buffers","texture","regions","gpuTexture","cmdBuffs","count","i","webGL2CmdBuff","cmdPackage","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","_curDynamicStates","blitTexture","srcTexture","dstTexture","filter","gpuTextureSrc","gpuTextureDst"],"sources":["../../../../../../../../../cocos/gfx/webgl2/webgl2-primary-command-buffer.ts"],"mappings":"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"}