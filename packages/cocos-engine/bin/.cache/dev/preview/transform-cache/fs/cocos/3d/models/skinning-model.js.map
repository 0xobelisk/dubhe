{"version":3,"names":["getRelevantBuffers","outIndices","outBuffers","jointMaps","targetJoint","i","length","idxMap","index","j","push","setters","_coreIndexJs","geometry","Mat4","Vec3","warnID","_gfxIndexJs","BufferUsageBit","MemoryUsageBit","BufferInfo","FormatFeatureBit","Format","_renderingDefineJs","UBOSkinning","UNIFORM_REALTIME_JOINT_TEXTURE_BINDING","_renderSceneSceneModelJs","ModelType","_skeletalAnimationSkeletalAnimationUtilsJs","uploadJointData","_morphModelJs","MorphModel","_animationSkeletalAnimationUtilsJs","deleteTransform","getTransform","getWorldMatrix","_renderSceneIndexJs","BatchingSchemes","_gameIndexJs","director","_assetAssetsAssetEnumJs","PixelFormat","_assetAssetsIndexJs","Texture2D","ImageAsset","execute","uniformPatches","name","value","texturePatches","v3_min","v3_max","v3_1","v3_2","m4_1","ab_1","AABB","RealTimeJointTexture","_format","RGBA32F","_textures","_buffers","WIDTH","HEIGHT","_export","SkinningModel","_MorphModel","_inheritsLoose","_this","call","_dataArray","_joints","_bufferIndices","_realTimeJointTexture","_realTimeTextureMode","type","SKINNING","_proto","prototype","destroy","bindSkeleton","forEach","tex","uploadAnimation","skeleton","skinningRoot","mesh","target","JOINT_UNIFORM_CAPACITY","joints","transform","boneSpaceBounds","getBoneSpaceBounds","struct","_ensureEnoughBuffers","jointBufferIndices","_initRealTimeJointTexture","bound","getChildByPath","bindpose","bindposes","indices","buffers","updateTransform","stamp","root","hasChangedFlags","isTransformDirty","updateWorldTransform","_localDataUpdated","set","Infinity","_this$_joints$i","worldMatrix","getBoundary","min","max","worldBounds","_worldBounds","_modelBounds","fromPoints","_mat","_pos","_rot","_scale","updateUBOs","_this$_joints$i2","multiply","world","b","_updateRealTimeJointTextureBuffer","update","initSubModel","idx","subMeshData","mat","original","vertexBuffers","iaInfo","jointMappedBuffers","getMacroPatches","subModelIndex","superMacroPatches","myPatches","concat","_updateLocalDescriptors","submodelIdx","descriptorSet","_bindRealTimeJointTexture","buffer","bindBuffer","BINDING","_updateInstancedAttributes","attributes","subModel","pass","passes","batchingScheme","NONE","node","getPathInHierarchy","count","_device","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","SIZE","maxJoints","Float32Array","gfxDevice","device","width","height","hasFeatureFloatTexture","getFormatFeatures","SAMPLED_TEXTURE","RGBA8888","textures","pixelFormat","arrayBuffer","updateView","Uint8Array","image","_data","_compressed","format","texture","setFilters","Filter","NEAREST","setMipFilter","setWrapMode","WrapMode","CLAMP_TO_EDGE","jointTexture","gfxTexture","getGFXTexture","sampler","getGFXSampler","bindTexture","bindSampler","src","idxSrc","idxDst","uploadData"],"sources":["../../../../../../../../../cocos/3d/models/skinning-model.ts"],"mappings":"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"}