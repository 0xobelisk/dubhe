{"version":3,"names":["setters","_cocosCannon","CANNON","default","_cannonShapeJs","CannonShape","_coreIndexJs","Vec3","Quat","_cannonUtilJs","commitShapeUpdates","execute","CANNON_AABB_LOCAL","AABB","CANNON_AABB","CANNON_TRANSFORM","Transform","Heightfield","prototype","calculateWorldAABB","pos","quat","min","max","frame","result","copy","position","quaternion","s","elementSize","data","lowerBound","set","minValue","upperBound","length","maxValue","toWorldFrame","_export","CannonTerrainShape","_CannonShape","_inheritsLoose","_proto","setTerrain","v","_terrainID","_uuid","terrain","sizeI","getVertexCountI","sizeJ","getVertexCountJ","i","j","getHeight","options","tileSize","updateProperties","_this","call","onComponentSet","collider","_shape","onLoad","impl","updateMinValue","updateMaxValue","updateBoundingSphereRadius","update","_index","_body","_setCenter","fromEuler","_orient","lpos","_offset","add","_createClass","key","get","_collider"],"sources":["../../../../../../../../../../cocos/physics/cannon/shapes/cannon-terrain-shape.ts"],"mappings":"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"}