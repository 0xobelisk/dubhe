{"version":3,"names":["setupFromAndTo","worldRay","distance","Vec3","copy","from","o","computeHit","to","setters","_cocosCannon","CANNON","default","_coreIndexJs","error","js","geometry","warnID","Color","_cannonUtilJs","fillRaycastResult","toCannonRaycastOptions","_shapesCannonShapeJs","CannonShape","_cannonSharedBodyJs","CannonSharedBody","_frameworkIndexJs","EPhysicsDrawFlags","_gameIndexJs","director","execute","aabbTemp","AABB","AABB_LINE_COUNT","_export","CannonWorld","_proto","prototype","setDefaultMaterial","mat","_world","defaultMaterial","friction","restitution","idToMaterial","id","setAllowSleep","v","allowSleep","setGravity","gravity","bodies","constraints","_debugLineCount","_MAX_DEBUG_LINE_COUNT","_debugDrawFlags","NONE","_debugConstraintSize","_aabbColor","_wireframeColor","World","broadphase","NaiveBroadphase","solver","iterations","tolerance","defaultContactMaterial","contactEquationStiffness","frictionEquationStiffness","contactEquationRelaxation","frictionEquationRelaxation","sweepBox","halfExtent","orientation","options","pool","results","sweepBoxClosest","result","sweepSphere","radius","sweepSphereClosest","sweepCapsule","height","sweepCapsuleClosest","destroy","length","emitEvents","emitTriggeredEvents","emitCollisionEvents","syncSceneToPhysics","i","syncAfterEvents","step","deltaTime","timeSinceLastCalled","maxSubStep","syncPhysicsToScene","_debugDraw","raycastClosest","maxDistance","raycastOpt","hit","rayResult","raycast","raycastAll","r","add","push","getSharedBody","node","wrappedBody","addSharedBody","sharedBody","indexOf","addBody","body","removeSharedBody","array","fastRemoveAt","remove","addConstraint","constraint","impl","removeConstraint","_getDebugRenderer","_mainWindow","cameras","root","mainWindow","initGeometryRenderer","geometryRenderer","debugRenderer","j","wrappedShapes","shape","getAABB","addBoundingBox","_createClass","key","get","set","RaycastResult","checkCollisionResponse","collisionFilterGroup","collisionFilterMask","skipBackfaces"],"sources":["../../../../../../../../../cocos/physics/cannon/cannon-world.ts"],"mappings":"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"}