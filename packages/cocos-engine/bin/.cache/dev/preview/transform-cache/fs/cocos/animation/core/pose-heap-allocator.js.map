{"version":3,"names":["isPagedPose","pose","allocationInfoTag","findRightmostSetBit","bits","Infinity","Math","log2","setters","_virtualInternal253AconstantsJs","TEST","_coreDataUtilsAssertsJs","assertIsTrue","_poseJs","Pose","_transformArrayJs","TransformArray","execute","MAX_POSE_PER_PAGE","Symbol","POSE_ALLOCATOR_DEBUG_FULL","_export","PoseHeapAllocator","transformCount","metaValueCount","_transformCount","_metaValueCount","_pages","_allocatedCount","_foremostPossibleFreePage","_proto","prototype","allocatePose","pages","nPages","length","iPage","page","freeCount","tryAllocate","pageIndex","_allocatePoseInNewPage","destroyPose","deallocate","PosePage","push","_createClass","key","get","AllocationInfo","_id","POSE_INDEX_BITS","set","value","POSE_INDEX_MASK","_capacity","_buffer","_idleFlags","_poses","_freeCount","byteLength","BYTES_PER_ELEMENT","Float64Array","ArrayBuffer","Array","fill","_proto2","_poses$idlePoseIndex","poses","idleFlags","capacity","idlePoseIndex","_createPose","poseIndex","index","transformsByteLength","baseOffset","transforms","metaValues","_create"],"sources":["../../../../../../../../../cocos/animation/core/pose-heap-allocator.ts"],"mappings":";;;;;;;;EAaA,SAASA,WAAWA,CAAEC,IAAU,EAAqB;IACjD,OAAOC,iBAAiB,IAAID,IAAI;EACpC;EAsLA,SAASE,mBAAmBA,CAAEC,IAAY,EAAU;IAChD;IACA,OAAOA,IAAI,KAAK,CAAC,GAAGC,QAAQ,GAAGC,IAAI,CAACC,IAAI,CAACH,IAAI,GAAG,CAACA,IAAI,CAAC;EAC1D;EAAC;IAAAI,OAAA,aAAAC,+BAAA;MAxMQC,IAAI,GAAAD,+BAAA,CAAJC,IAAI;IAAA,aAAAC,uBAAA;MACJC,YAAY,GAAAD,uBAAA,CAAZC,YAAY;IAAA,aAAAC,OAAA;MACZC,IAAI,GAAAD,OAAA,CAAJC,IAAI;IAAA,aAAAC,iBAAA;MACJC,cAAc,GAAAD,iBAAA,CAAdC,cAAc;IAAA;IAAAC,OAAA,WAAAA,CAAA;MAEjBC,iBAAiB,GAAG,CAAC;MAErBhB,iBAAiB,GAAGiB,MAAM,CAAC,mBAAmB,CAAC;MAU/CC,yBAAyB,GAAGV,IAAI;MAAAW,OAAA,sBAEzBC,iBAAiB;QAC1B,SAAAA,kBAAaC,cAAsB,EAAEC,cAAsB,EAAE;UAAA,KA2DrDC,eAAe,GAAG,CAAC;UAAA,KAEnBC,eAAe,GAAG,CAAC;UAAA,KAEnBC,MAAM,GAAe,EAAE;UAAA,KAEvBC,eAAe,GAAG,CAAC;UAE3B;AACJ;AACA;AACA;AACA;UAJI,KAKQC,yBAAyB,GAAG,CAAC;UAvEjC,IAAI,CAACJ,eAAe,GAAGF,cAAc;UACrC,IAAI,CAACG,eAAe,GAAGF,cAAc;QACzC;QAAC,IAAAM,MAAA,GAAAR,iBAAA,CAAAS,SAAA;QAAAD,MAAA,CAMME,YAAY,GAAnB,SAAAA,aAAA,EAA6B;UACzB,EAAE,IAAI,CAACJ,eAAe;UACtB,IAAgBK,KAAK,GAAK,IAAI,CAAtBN,MAAM;UACd,IAAMO,MAAM,GAAGD,KAAK,CAACE,MAAM;;UAE3B;UACA,IAAIf,yBAAyB,EAAE;YAC3B,KAAK,IAAIgB,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,IAAI,CAACP,yBAAyB,EAAE,EAAEO,KAAK,EAAE;cACjE,IAAMC,IAAI,GAAGJ,KAAK,CAACG,KAAK,CAAC;cACzBxB,YAAY,CAACyB,IAAI,CAACC,SAAS,KAAK,CAAC,CAAC;YACtC;UACJ;UAEA,KAAK,IAAIF,MAAK,GAAG,IAAI,CAACP,yBAAyB,EAAEO,MAAK,GAAGF,MAAM,EAAE,EAAEE,MAAK,EAAE;YACtE,IAAMC,KAAI,GAAGJ,KAAK,CAACG,MAAK,CAAC;YACzB,IAAMnC,KAAI,GAAGoC,KAAI,CAACE,WAAW,CAAC,CAAC;YAC/B,IAAItC,KAAI,EAAE;cACNA,KAAI,CAACC,iBAAiB,CAAC,CAACsC,SAAS,GAAGJ,MAAK;cACzC,IAAIC,KAAI,CAACC,SAAS,KAAK,CAAC,EAAE;gBACtB;gBACA,EAAE,IAAI,CAACT,yBAAyB;cACpC;cACA,OAAO5B,KAAI;YACf;UACJ;UAEA,IAAMA,IAAI,GAAG,IAAI,CAACwC,sBAAsB,CAAC,CAAC;UAC1C;UACA,IAAI,CAACZ,yBAAyB,GAAG5B,IAAI,CAACC,iBAAiB,CAAC,CAACsC,SAAS;UAClE,OAAOvC,IAAI;QACf,CAAC;QAAA6B,MAAA,CAEMY,WAAW,GAAlB,SAAAA,YAAoBzC,IAAU,EAAQ;UAClCW,YAAY,CAACZ,WAAW,CAACC,IAAI,CAAC,CAAC;UAC/B,IAAgBgC,KAAK,GAAK,IAAI,CAAtBN,MAAM;UACd,IAAMO,MAAM,GAAGD,KAAK,CAACE,MAAM;UAC3B,IAAMK,SAAS,GAAGvC,IAAI,CAACC,iBAAiB,CAAC,CAACsC,SAAS;UACnD5B,YAAY,CAAC4B,SAAS,IAAI,CAAC,IAAIA,SAAS,GAAGN,MAAM,CAAC;UAClD,IAAMG,IAAI,GAAGJ,KAAK,CAACO,SAAS,CAAC;UAC7BH,IAAI,CAACM,UAAU,CAAC1C,IAAI,CAAC;UACrB,EAAE,IAAI,CAAC2B,eAAe;;UAEtB;UACA;UACA,IAAIY,SAAS,GAAG,IAAI,CAACX,yBAAyB,EAAE;YAC5CjB,YAAY,CAACyB,IAAI,CAACC,SAAS,GAAG,CAAC,CAAC;YAChC,IAAI,CAACT,yBAAyB,GAAGW,SAAS;UAC9C;QACJ,CAAC;QAAAV,MAAA,CAiBOW,sBAAsB,GAA9B,SAAAA,uBAAA,EAA6C;UACzC,IAAMJ,IAAI,GAAG,IAAIO,QAAQ,CAAC,IAAI,CAACnB,eAAe,EAAE,IAAI,CAACC,eAAe,EAAE,CAAC,CAAC;UACxE,IAAMc,SAAS,GAAG,IAAI,CAACb,MAAM,CAACQ,MAAM;UACpC,IAAI,CAACR,MAAM,CAACkB,IAAI,CAACR,IAAI,CAAC;UACtB,IAAMpC,IAAI,GAAGoC,IAAI,CAACE,WAAW,CAAC,CAAC;UAC/B3B,YAAY,CAACX,IAAI,CAAC,CAAC,CAAC;UACpBA,IAAI,CAACC,iBAAiB,CAAC,CAACsC,SAAS,GAAGA,SAAS;UAC7C,OAAOvC,IAAI;QACf,CAAC;QAAA6C,YAAA,CAAAxB,iBAAA;UAAAyB,GAAA;UAAAC,GAAA,EA7ED,SAAAA,IAAA,EAAqC;YACjC,OAAO,IAAI,CAACpB,eAAe;UAC/B;QAAC;QAAA,OAAAN,iBAAA;MAAA;MA8EC2B,cAAc;QAAA,SAAAA,eAAA;UAmBhB;AACJ;AACA;UAFI,KAGQC,GAAG,GAAG,CAAC,CAAC;QAAA;QAAAJ,YAAA,CAAAG,cAAA;UAAAF,GAAA;UAAAC,GAAA,EArBhB,SAAAA,IAAA,EAAyB;YACrB,OAAO,IAAI,CAACE,GAAG,IAAIC,eAAe;UACtC,CAAC;UAAAC,GAAA,EAED,SAAAA,IAAeC,KAAK,EAAE;YAClB,IAAI,CAACH,GAAG,IAAII,eAAe;YAC3B,IAAI,CAACJ,GAAG,IAAKG,KAAK,IAAIF,eAAgB;UAC1C;QAAC;UAAAJ,GAAA;UAAAC,GAAA,EAED,SAAAA,IAAA,EAAyB;YACrB,OAAO,IAAI,CAACE,GAAG,GAAGI,eAAe;UACrC,CAAC;UAAAF,GAAA,EAED,SAAAA,IAAeC,KAAK,EAAE;YAClB,IAAI,CAACH,GAAG,IAAI,CAACI,eAAe;YAC5B,IAAI,CAACJ,GAAG,IAAIG,KAAK;UACrB;QAAC;QAAA,OAAAJ,cAAA;MAAA;MAQCK,eAAe,GAAG,CAAK;MACvBH,eAAe,GAAG,CAAC;MACzBvC,YAAY,CAAC0C,eAAe,GAAG,CAAC,IAAIpC,iBAAiB,CAAC;MAEhD0B,QAAQ;QACV,SAAAA,SAAqBnB,eAAuB,EAAUC,eAAuB,EAAU6B,SAAiB,EAAE;UAAA,KA0ClGC,OAAO;UAAA,KAEPC,UAAU,GAAG,GAAG;UAAA,KAEhBC,MAAM;UAAA,KAENC,UAAU,GAAG,CAAC;UAAA,KAhDDlC,eAAuB,GAAvBA,eAAuB;UAAA,KAAUC,eAAuB,GAAvBA,eAAuB;UAAA,KAAU6B,SAAiB,GAAjBA,SAAiB;UACpG,IAAMK,UAAU,GAAG,CAAC5C,cAAc,CAAC6C,iBAAiB,GAAGpC,eAAe,GAChEqC,YAAY,CAACD,iBAAiB,GAAGnC,eAAe,IAAI6B,SAAS;UACnE,IAAI,CAACC,OAAO,GAAG,IAAIO,WAAW,CAACH,UAAU,CAAC;UAC1C,IAAI,CAACF,MAAM,GAAG,IAAIM,KAAK,CAACT,SAAS,CAAC,CAACU,IAAI,CAAC,IAAI,CAAC;UAC7C,IAAI,CAACN,UAAU,GAAGJ,SAAS;QAC/B;QAAC,IAAAW,OAAA,GAAAtB,QAAA,CAAAb,SAAA;QAAAmC,OAAA,CAUM3B,WAAW,GAAlB,SAAAA,YAAA,EAAwC;UAAA,IAAA4B,oBAAA;UACpC,IAAgBC,KAAK,GAAiD,IAAI,CAAlEV,MAAM;YAAqBW,SAAS,GAA0B,IAAI,CAAnDZ,UAAU;YAAwBa,QAAQ,GAAK,IAAI,CAA5Bf,SAAS;UACvD,IAAMgB,aAAa,GAAGpE,mBAAmB,CAACkE,SAAS,CAAC;UACpD,IAAIE,aAAa,IAAID,QAAQ,EAAE;YAC3B,OAAO,IAAI;UACf;UACA1D,YAAY,CAAC2D,aAAa,IAAI,CAAC,IAAIA,aAAa,GAAGH,KAAK,CAACjC,MAAM,CAAC;UAChE,IAAMlC,IAAI,IAAAkE,oBAAA,GAAGC,KAAK,CAACG,aAAa,CAAC,cAAAJ,oBAAA,cAAAA,oBAAA,GAApBC,KAAK,CAACG,aAAa,CAAC,GAAK,IAAI,CAACC,WAAW,CAACD,aAAa,CAAC;UACrEtE,IAAI,CAACC,iBAAiB,CAAC,CAACuE,SAAS,GAAGF,aAAa;UACjD,IAAI,CAACd,UAAU,IAAI,EAAE,CAAC,IAAIc,aAAa,CAAC;UACxC3D,YAAY,CAAC,IAAI,CAAC+C,UAAU,GAAG,CAAC,CAAC;UACjC,EAAE,IAAI,CAACA,UAAU;UACjB,OAAO1D,IAAI;QACf,CAAC;QAAAiE,OAAA,CAEMvB,UAAU,GAAjB,SAAAA,WAAmB1C,IAAe,EAAQ;UACtC,IAAgBmE,KAAK,GAAK,IAAI,CAAtBV,MAAM;UACd,IAAMe,SAAS,GAAGxE,IAAI,CAACC,iBAAiB,CAAC,CAACuE,SAAS;UACnD7D,YAAY,CAAC6D,SAAS,IAAI,CAAC,IAAIA,SAAS,GAAGL,KAAK,CAACjC,MAAM,CAAC;UACxDvB,YAAY,CAACwD,KAAK,CAACK,SAAS,CAAC,KAAKxE,IAAI,CAAC;UACvC;UACA,IAAI,CAACwD,UAAU,IAAK,CAAC,IAAIgB,SAAU;UACnC7D,YAAY,CAAC,IAAI,CAAC+C,UAAU,GAAG,IAAI,CAACJ,SAAS,CAAC;UAC9C,EAAE,IAAI,CAACI,UAAU;QACrB,CAAC;QAAAO,OAAA,CAUOM,WAAW,GAAnB,SAAAA,YAAqBE,KAAa,EAAa;UAC3C,IAAMC,oBAAoB,GAAG3D,cAAc,CAAC6C,iBAAiB,GAAG,IAAI,CAACpC,eAAe;UACpF,IAAMmD,UAAU,GAAG,CAACD,oBAAoB,GAClCb,YAAY,CAACD,iBAAiB,GAAG,IAAI,CAACnC,eAAe,IAAIgD,KAAK;UACpE,IAAMG,UAAU,GAAG,IAAI7D,cAAc,CAAC,IAAI,CAACwC,OAAO,EAAEoB,UAAU,EAAE,IAAI,CAACnD,eAAe,CAAC;UACrF,IAAMqD,UAAU,GAAG,IAAIhB,YAAY,CAAC,IAAI,CAACN,OAAO,EAAEoB,UAAU,GAAGD,oBAAoB,EAAE,IAAI,CAACjD,eAAe,CAAC;UAC1G,IAAMzB,IAAI,GAAGa,IAAI,CAACiE,OAAO,CAACF,UAAU,EAAEC,UAAU,CAAC;UACjD7E,IAAI,CAACC,iBAAiB,CAAC,GAAG,IAAI+C,cAAc,CAAC,CAAC;UAC9C,OAAOhD,IAAI;QACf,CAAC;QAAA6C,YAAA,CAAAF,QAAA;UAAAG,GAAA;UAAAC,GAAA,EAnDD,SAAAA,IAAA,EAAwB;YACpB,OAAO,IAAI,CAACO,SAAS;UACzB;QAAC;UAAAR,GAAA;UAAAC,GAAA,EAED,SAAAA,IAAA,EAAyB;YACrB,OAAO,IAAI,CAACW,UAAU;UAC1B;QAAC;QAAA,OAAAf,QAAA;MAAA;IAAA;EAAA;AAAA"}