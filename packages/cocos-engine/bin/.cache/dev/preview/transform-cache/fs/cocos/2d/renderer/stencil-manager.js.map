{"version":3,"names":["_export","Stage","StencilSharedBufferView","setters","_gfxIndexJs","ComparisonFunc","StencilOp","DepthStencilState","execute","StencilManager","_maskStack","_stencilPattern","stencilTest","func","ALWAYS","stencilMask","writeMask","failOp","KEEP","zFailOp","passOp","ref","_stage","DISABLED","stencilStateMap","Map","stencilStateMapWithDepth","_proto","prototype","pushMask","mask","push","clear","comp","isInverted","stencilStage","ENTER_LEVEL","CLEAR_INVERTED","CLEAR","enableMask","stage","ENABLED","exitMask","length","pop","getWriteMask","getExitWriteMask","getStencilRef","result","i","getMaskStackSize","reset","destroy","forEach","value","key","getStencilStage","mat","depthTest","depthWrite","depthFunc","LESS","cacheMap","passes","pass","dss","depthStencilState","depthTestValue","depthWriteValue","has","get","setStateFromStage","set","getStencilHash","pattern","EQUAL","NEVER","ZERO","REPLACE","ENTER_LEVEL_INVERTED","_createClass","val","sharedManager"],"sources":["../../../../../../../../../cocos/2d/renderer/stencil-manager.ts"],"mappings":";;;;;;;4XAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAtBAA,OAAA;IAAAC,KAAA;IAAAC,uBAAA;EAAA;EAAA;IAAAC,OAAA,aAAAC,WAAA;MAwBSC,cAAc,GAAAD,WAAA,CAAdC,cAAc;MAAEC,SAAS,GAAAF,WAAA,CAATE,SAAS;MAAEC,iBAAiB,GAAAH,WAAA,CAAjBG,iBAAiB;IAAA;IAAAC,OAAA,WAAAA,CAAA;MAAA,WAUzCP,KAAK;QAALA,KAAK,CAALA,KAAK;QAALA,KAAK,CAALA,KAAK;QAALA,KAAK,CAALA,KAAK;QAALA,KAAK,CAALA,KAAK;QAALA,KAAK,CAALA,KAAK;QAALA,KAAK,CAALA,KAAK;QAALA,KAAK,CAALA,KAAK;MAAA,GAALA,KAAK,IAAAD,OAAA,UAALC,KAAK;MAAA,WAsBLC,uBAAuB;QAAvBA,uBAAuB,CAAvBA,uBAAuB;QAAvBA,uBAAuB,CAAvBA,uBAAuB;QAAvBA,uBAAuB,CAAvBA,uBAAuB;QAAvBA,uBAAuB,CAAvBA,uBAAuB;QAAvBA,uBAAuB,CAAvBA,uBAAuB;QAAvBA,uBAAuB,CAAvBA,uBAAuB;QAAvBA,uBAAuB,CAAvBA,uBAAuB;QAAvBA,uBAAuB,CAAvBA,uBAAuB;QAAvBA,uBAAuB,CAAvBA,uBAAuB;MAAA,GAAvBA,uBAAuB,IAAAF,OAAA,4BAAvBE,uBAAuB;MAYnC;AACA;AACA;AACA;AACA;MAJAF,OAAA,mBAKaS,cAAc;QAAA,SAAAA,eAAA;UAAA,KAEfC,UAAU,GAAU,EAAE;UAAA,KACtBC,eAAe,GAAG;YACtBC,WAAW,EAAE,IAAI;YACjBC,IAAI,EAAER,cAAc,CAACS,MAAM;YAC3BC,WAAW,EAAE,MAAM;YACnBC,SAAS,EAAE,MAAM;YACjBC,MAAM,EAAEX,SAAS,CAACY,IAAI;YACtBC,OAAO,EAAEb,SAAS,CAACY,IAAI;YACvBE,MAAM,EAAEd,SAAS,CAACY,IAAI;YACtBG,GAAG,EAAE;UACT,CAAC;UAAA,KAEOC,MAAM,GAAUrB,KAAK,CAACsB,QAAQ;UAAA,KAkI9BC,eAAe,GAAG,IAAIC,GAAG,CAA4B,CAAC;UAAA,KACtDC,wBAAwB,GAAG,IAAID,GAAG,CAA4B,CAAC;QAAA;QAAA,IAAAE,MAAA,GAAAlB,cAAA,CAAAmB,SAAA;QApGvE;AACJ;AACA;AACA;AACA;QAJID,MAAA,CAKOE,QAAQ,GAAf,SAAAA,SAAiBC,IAAS,EAAQ;UAC9B,IAAI,CAACpB,UAAU,CAACqB,IAAI,CAACD,IAAI,CAAC;QAC9B;;QAEA;AACJ;AACA;AACA;AACA,WAJI;QAAAH,MAAA,CAKOK,KAAK,GAAZ,SAAAA,MAAcC,IAAiC,EAAS;UACpD,IAAMC,UAAU,GAAID,IAAI,CAACE,YAAY,KAAKlC,KAAK,CAACmC,WAAY;UAC5D,OAAOF,UAAU,GAAGjC,KAAK,CAACoC,cAAc,GAAGpC,KAAK,CAACqC,KAAK;QAC1D;;QAEA;AACJ;AACA;AACA;AACA,WAJI;QAAAX,MAAA,CAKOY,UAAU,GAAjB,SAAAA,WAAA,EAA2B;UACvB,IAAI,CAACC,KAAK,GAAGvC,KAAK,CAACwC,OAAO;QAC9B;;QAEA;AACJ;AACA;AACA;AACA,WAJI;QAAAd,MAAA,CAKOe,QAAQ,GAAf,SAAAA,SAAA,EAAyB;UACrB,IAAI,IAAI,CAAChC,UAAU,CAACiC,MAAM,KAAK,CAAC,EAAE;YAC9B;YACA;UACJ;UACA,IAAI,CAACjC,UAAU,CAACkC,GAAG,CAAC,CAAC;UACrB,IAAI,IAAI,CAAClC,UAAU,CAACiC,MAAM,KAAK,CAAC,EAAE;YAC9B,IAAI,CAACH,KAAK,GAAGvC,KAAK,CAACsB,QAAQ;UAC/B,CAAC,MAAM;YACH,IAAI,CAACiB,KAAK,GAAGvC,KAAK,CAACwC,OAAO;UAC9B;QACJ;;QAEA;AACJ;AACA;AACA;AACA,WAJI;QAAAd,MAAA,CAKOkB,YAAY,GAAnB,SAAAA,aAAA,EAA+B;UAC3B,OAAO,CAAC,IAAK,IAAI,CAACnC,UAAU,CAACiC,MAAM,GAAG,CAAE;QAC5C;;QAEA;AACJ;AACA;AACA;AACA,WAJI;QAAAhB,MAAA,CAKOmB,gBAAgB,GAAvB,SAAAA,iBAAA,EAAmC;UAC/B,OAAO,CAAC,IAAI,IAAI,CAACpC,UAAU,CAACiC,MAAM;QACtC,CAAC;QAAAhB,MAAA,CAEOoB,aAAa,GAArB,SAAAA,cAAA,EAAiC;UAC7B,IAAIC,MAAM,GAAG,CAAC;UACd,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACvC,UAAU,CAACiC,MAAM,EAAE,EAAEM,CAAC,EAAE;YAC7CD,MAAM,IAAK,UAAU,IAAIC,CAAE;UAC/B;UACA,OAAOD,MAAM;QACjB;;QAEA;AACJ;AACA;AACA;AACA,WAJI;QAAArB,MAAA,CAKOuB,gBAAgB,GAAvB,SAAAA,iBAAA,EAAmC;UAC/B,OAAO,IAAI,CAACxC,UAAU,CAACiC,MAAM;QACjC;;QAEA;AACJ;AACA;AACA;AACA,WAJI;QAAAhB,MAAA,CAKOwB,KAAK,GAAZ,SAAAA,MAAA,EAAsB;UAClB;UACA,IAAI,CAACzC,UAAU,CAACiC,MAAM,GAAG,CAAC;UAC1B,IAAI,CAACH,KAAK,GAAGvC,KAAK,CAACsB,QAAQ;QAC/B,CAAC;QAAAI,MAAA,CAEMyB,OAAO,GAAd,SAAAA,QAAA,EAAwB;UACpB,IAAI,CAAC5B,eAAe,CAAC6B,OAAO,CAAC,UAACC,KAAK,EAAEC,GAAG,EAAK;YACzCD,KAAK,CAACF,OAAO,CAAC,CAAC;UACnB,CAAC,CAAC;UACF,IAAI,CAAC5B,eAAe,CAACQ,KAAK,CAAC,CAAC;QAChC,CAAC;QAKD;AACJ;AACA;AACA;AACA;QAJIL,MAAA,CAKO6B,eAAe,GAAtB,SAAAA,gBAAwBhB,KAAY,EAAEiB,GAAc,EAAqB;UACrE,IAAIF,GAAG,GAAG,CAAC;UACX,IAAIG,SAAS,GAAG,KAAK;UACrB,IAAIC,UAAU,GAAG,KAAK;UACtB,IAAIC,SAAS,GAAGvD,cAAc,CAACwD,IAAI;UACnC,IAAIC,QAAQ,GAAG,IAAI,CAACtC,eAAe;UACnC,IAAIiC,GAAG,IAAIA,GAAG,CAACM,MAAM,CAAC,CAAC,CAAC,EAAE;YACtB,IAAMC,IAAI,GAAGP,GAAG,CAACM,MAAM,CAAC,CAAC,CAAC;YAC1B,IAAME,GAAG,GAAGD,IAAI,CAACE,iBAAiB;YAClC,IAAIC,cAAc,GAAG,CAAC;YACtB,IAAIC,eAAe,GAAG,CAAC;YACvB,IAAIH,GAAG,CAACP,SAAS,EAAES,cAAc,GAAG,CAAC;YACrC,IAAIF,GAAG,CAACN,UAAU,EAAES,eAAe,GAAG,CAAC;YACvCb,GAAG,GAAIY,cAAc,GAAKC,eAAe,IAAI,CAAE,GAAIH,GAAG,CAACL,SAAS,IAAI,CAAE,GAAKpB,KAAK,IAAI,CAAE,GAAI,IAAI,CAAC9B,UAAU,CAACiC,MAAM,IAAI,CAAE;YACtHe,SAAS,GAAGO,GAAG,CAACP,SAAS;YACzBC,UAAU,GAAGM,GAAG,CAACN,UAAU;YAC3BC,SAAS,GAAGK,GAAG,CAACL,SAAS;YACzBE,QAAQ,GAAG,IAAI,CAACpC,wBAAwB;UAC5C,CAAC,MAAM;YACH6B,GAAG,GAAIf,KAAK,IAAI,EAAE,GAAI,IAAI,CAAC9B,UAAU,CAACiC,MAAM;UAChD;UACA,IAAImB,QAAQ,IAAIA,QAAQ,CAACO,GAAG,CAACd,GAAG,CAAC,EAAE;YAC/B,OAAOO,QAAQ,CAACQ,GAAG,CAACf,GAAG,CAAC;UAC5B;UACA,IAAI,CAACgB,iBAAiB,CAAC/B,KAAK,CAAC;UAC7B,IAAM0B,iBAAiB,GAAG,IAAI3D,iBAAiB,CAC3CmD,SAAS,EACTC,UAAU,EACVC,SAAS,EACT,IAAI,CAACjD,eAAe,CAACC,WAAW,EAChC,IAAI,CAACD,eAAe,CAACE,IAAI,EACzB,IAAI,CAACF,eAAe,CAACI,WAAW,EAChC,IAAI,CAACJ,eAAe,CAACK,SAAS,EAC9B,IAAI,CAACL,eAAe,CAACM,MAAM,EAC3B,IAAI,CAACN,eAAe,CAACQ,OAAO,EAC5B,IAAI,CAACR,eAAe,CAACS,MAAM,EAC3B,IAAI,CAACT,eAAe,CAACU,GAAG,EACxB,IAAI,CAACV,eAAe,CAACC,WAAW,EAChC,IAAI,CAACD,eAAe,CAACE,IAAI,EACzB,IAAI,CAACF,eAAe,CAACI,WAAW,EAChC,IAAI,CAACJ,eAAe,CAACK,SAAS,EAC9B,IAAI,CAACL,eAAe,CAACM,MAAM,EAC3B,IAAI,CAACN,eAAe,CAACQ,OAAO,EAC5B,IAAI,CAACR,eAAe,CAACS,MAAM,EAC3B,IAAI,CAACT,eAAe,CAACU,GACzB,CAAC;UACDyC,QAAQ,CAACU,GAAG,CAACjB,GAAG,EAAEW,iBAAiB,CAAC;UACpC,OAAOA,iBAAiB;QAC5B;;QAEA;AACJ;AACA;AACA;AACA,WAJI;QAAAvC,MAAA,CAKO8C,cAAc,GAArB,SAAAA,eAAuBjC,KAAY,EAAU;UACzC,OAAQA,KAAK,IAAI,CAAC,GAAI,IAAI,CAAC9B,UAAU,CAACiC,MAAM;QAChD;;QAEA;QAAA;QAAAhB,MAAA,CACQ4C,iBAAiB,GAAzB,SAAAA,kBAA2B/B,KAAK,EAAQ;UACpC,IAAMkC,OAAO,GAAG,IAAI,CAAC/D,eAAe;UACpC,IAAI6B,KAAK,KAAKvC,KAAK,CAACsB,QAAQ,EAAE;YAC1BmD,OAAO,CAAC9D,WAAW,GAAG,KAAK;YAC3B8D,OAAO,CAAC7D,IAAI,GAAGR,cAAc,CAACS,MAAM;YACpC4D,OAAO,CAACzD,MAAM,GAAGX,SAAS,CAACY,IAAI;YAC/BwD,OAAO,CAAC3D,WAAW,GAAG2D,OAAO,CAAC1D,SAAS,GAAG,MAAM;YAChD0D,OAAO,CAACrD,GAAG,GAAG,CAAC;UACnB,CAAC,MAAM;YACHqD,OAAO,CAAC9D,WAAW,GAAG,IAAI;YAC1B,IAAI4B,KAAK,KAAKvC,KAAK,CAACwC,OAAO,EAAE;cACzBiC,OAAO,CAAC7D,IAAI,GAAGR,cAAc,CAACsE,KAAK;cACnCD,OAAO,CAACzD,MAAM,GAAGX,SAAS,CAACY,IAAI;cAC/BwD,OAAO,CAAC3D,WAAW,GAAG2D,OAAO,CAACrD,GAAG,GAAG,IAAI,CAAC0B,aAAa,CAAC,CAAC;cACxD2B,OAAO,CAAC1D,SAAS,GAAG,IAAI,CAAC6B,YAAY,CAAC,CAAC;YAC3C,CAAC,MAAM,IAAIL,KAAK,KAAKvC,KAAK,CAACqC,KAAK,EAAE;cAC9BoC,OAAO,CAAC7D,IAAI,GAAGR,cAAc,CAACuE,KAAK;cACnCF,OAAO,CAACzD,MAAM,GAAGX,SAAS,CAACuE,IAAI;cAC/BH,OAAO,CAAC1D,SAAS,GAAG0D,OAAO,CAAC3D,WAAW,GAAG2D,OAAO,CAACrD,GAAG,GAAG,IAAI,CAACwB,YAAY,CAAC,CAAC;YAC/E,CAAC,MAAM,IAAIL,KAAK,KAAKvC,KAAK,CAACoC,cAAc,EAAE;cACvCqC,OAAO,CAAC7D,IAAI,GAAGR,cAAc,CAACuE,KAAK;cACnCF,OAAO,CAACzD,MAAM,GAAGX,SAAS,CAACwE,OAAO;cAClCJ,OAAO,CAAC1D,SAAS,GAAG0D,OAAO,CAAC3D,WAAW,GAAG2D,OAAO,CAACrD,GAAG,GAAG,IAAI,CAACwB,YAAY,CAAC,CAAC;YAC/E,CAAC,MAAM,IAAIL,KAAK,KAAKvC,KAAK,CAACmC,WAAW,EAAE;cACpCsC,OAAO,CAAC7D,IAAI,GAAGR,cAAc,CAACuE,KAAK;cACnCF,OAAO,CAACzD,MAAM,GAAGX,SAAS,CAACwE,OAAO;cAClCJ,OAAO,CAAC1D,SAAS,GAAG0D,OAAO,CAAC3D,WAAW,GAAG2D,OAAO,CAACrD,GAAG,GAAG,IAAI,CAACwB,YAAY,CAAC,CAAC;YAC/E,CAAC,MAAO,IAAIL,KAAK,KAAKvC,KAAK,CAAC8E,oBAAoB,EAAE;cAC9CL,OAAO,CAAC7D,IAAI,GAAGR,cAAc,CAACuE,KAAK;cACnCF,OAAO,CAACzD,MAAM,GAAGX,SAAS,CAACuE,IAAI;cAC/BH,OAAO,CAAC1D,SAAS,GAAG0D,OAAO,CAAC3D,WAAW,GAAG2D,OAAO,CAACrD,GAAG,GAAG,IAAI,CAACwB,YAAY,CAAC,CAAC;YAC/E;UACJ;QACJ,CAAC;QAAAmC,YAAA,CAAAvE,cAAA;UAAA8C,GAAA;UAAAe,GAAA;UAtOD;AACJ;AACA;AACA;AACA;UACI,SAAAA,IAAA,EAAoB;YAChB,OAAO,IAAI,CAAChD,MAAM;UACtB,CAAC;UAAAkD,GAAA,EACD,SAAAA,IAAWS,GAAU,EAAE;YACnB,IAAI,CAAC3D,MAAM,GAAG2D,GAAG;UACrB;;UAEA;AACJ;AACA;AACA;AACA;QAJI;UAAA1B,GAAA;UAAAe,GAAA,EAKA,SAAAA,IAAA,EASE;YACE,OAAO,IAAI,CAAC3D,eAAe;UAC/B;QAAC;QAAA,OAAAF,cAAA;MAAA;MA3CQA,cAAc,CACTyE,aAAa,GAA0B,IAAI;MAuP7DzE,cAAc,CAACyE,aAAa,GAAG,IAAIzE,cAAc,CAAC,CAAC;IAAC;EAAA;AAAA"}