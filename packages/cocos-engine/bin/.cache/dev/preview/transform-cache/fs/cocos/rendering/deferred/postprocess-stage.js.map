{"version":3,"names":["ccclass","_coreDataDecoratorsIndexJs","displayOrder","type","serializable","_defineJs","SetIndex","UBOLocal","_gfxIndexJs","Color","Rect","ClearFlagBit","DescriptorSetInfo","BufferInfo","BufferUsageBit","MemoryUsageBit","_renderStageJs","RenderStage","_enumJs","CommonStagePriority","_assetAssetsMaterialJs","Material","_pipelineStateManagerJs","PipelineStateManager","_pipelineSerializationJs","RenderQueueDesc","_pipelineFuncsJs","renderProfiler","_uiPhaseJs","UIPhase","execute","colors","_export","PostProcessStage","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_class3","_RenderStage","_inheritsLoose","_this","call","_postProcessMaterial","_initializer","renderQueues","_initializer2","_renderArea","_stageDesc","_localUBO","_uiPhase","_proto","prototype","initialize","info","activate","pipeline","flow","pipelineSceneData","postprocessMaterial","destroy","render","camera","_pipeline","device","sceneData","cmdBuff","commandBuffers","pipelineUBO","updateCameraUBO","vp","viewport","x","window","width","y","height","renderData","getPipelineRenderData","framebuffer","renderPass","getRenderPass","clearFlag","COLOR","clearColor","z","w","beginRenderPass","clearDepth","clearStencil","bindDescriptorSet","GLOBAL","descriptorSet","builtinPostProcess","pass","passes","shader","getShaderVariant","bloomEnabled","bindTexture","bloom","combineTex","outputRenderTargets","bindSampler","sampler","update","inputAssembler","swapchain","quadIAOnscreen","quadIAOffscreen","pso","getOrCreatePipelineState","renderObjects","length","createDescriptorSet","localSetLayout","createBuffer","UNIFORM","TRANSFER_DST","DEVICE","SIZE","bindBuffer","BINDING","bindPipelineState","MATERIAL","LOCAL","bindInputAssembler","draw","profiler","endRenderPass","initInfo","name","priority","POST_PROCESS","tag","_applyDecoratedInitializer"],"sources":["../../../../../../../../../cocos/rendering/deferred/postprocess-stage.ts"],"mappings":"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"}