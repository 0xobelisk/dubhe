{"version":3,"names":["setters","_coreIndexJs","Vec3","assertIsTrue","_gfxIndexJs","deviceManager","_cameraJs","CameraProjection","execute","_export","LODData","screenUsagePercentage","_models","_proto","prototype","addModel","model","splice","eraseModel","removeIndex","indexOf","clearModels","length","_createClass","key","get","LODGroup","scene","node","_device","enabled","_localBoundaryCenter","_objectSize","_lodDataArray","_lockedLODLevelVec","_isLockLevelChanged","gfxDevice","_proto2","attachToScene","detachFromScene","lockLODLevels","lockLev","size","index","slice","isLockLevelChanged","resetLockChangeFlag","getLockedLODLevels","clearLODs","insertLOD","lod","updateLOD","eraseLOD","getVisibleLODLevel","camera","getScreenUsagePercentage","lodIndex","i","lodCount","lodDataArray","distance","projectionType","PERSPECTIVE","len","localBoundaryCenter","transformMat4","worldMatrix","subtract","worldPosition","distanceToScreenUsagePercentage","getWorldSpaceSize","matProj","m05","scale","maxScale","Math","max","abs","x","y","z","objectSize","clone","set","val"],"sources":["../../../../../../../../../cocos/render-scene/scene/lod-group.ts"],"mappings":"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"}