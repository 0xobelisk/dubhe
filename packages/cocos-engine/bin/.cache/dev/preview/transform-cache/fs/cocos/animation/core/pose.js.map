{"version":3,"names":["blendPoseInto","target","source","alpha","transformFilter","undefined","blendTransformsInto","transforms","blendAuxiliaryCurvesInto","auxiliaryCurves","nTransforms","length","assertIsTrue","set","copyTransformsWithFilter","iTransform","blendIntoTransformArrayAt","index","involvedTransforms","involvedTransformIndex","filter","copyRange","nValues","iValue","lerp","calculateDeltaPose","base","calculateDeltaTransforms","calculateDeltaAuxiliaryCurves","calculateDeltaTransformArrayAt","nAuxiliaryCurves","i","applyDeltaPose","applyDeltaTransforms","applyDeltaAuxiliaryCurves","delta","applyDeltaTransformArrayAt","transformIndex","_export","PoseTransformSpace","setters","_virtualInternal253AconstantsJs","DEBUG","_coreIndexJs","_coreDataUtilsAssertsJs","_transformJs","Transform","__applyDeltaTransform","__calculateDeltaTransform","execute","Pose","_poseTransformSpace","LOCAL","_create","TransformFilter","every","Math","pow","_involvedTransforms","Uint16Array","_createClass","key","get","cacheTransformSource","cacheTransformTarget","transformTarget","getTransform","transformSource","setTransform","cacheTransformBase","baseTransform","targetTransform","cacheTransformDelta","deltaTransform"],"sources":["../../../../../../../../../cocos/animation/core/pose.ts"],"mappings":"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"}