{"version":3,"names":["setters","_renderSceneSceneFogJs","Fog","_renderSceneSceneAmbientJs","Ambient","_renderSceneSceneSkyboxJs","Skybox","_renderSceneSceneShadowsJs","Shadows","_renderSceneSceneOctreeJs","Octree","_gfxIndexJs","InputAssemblerInfo","BufferInfo","BufferUsageBit","MemoryUsageBit","Attribute","Format","_assetAssetsIndexJs","Material","_shadowCsmLayersJs","CSMLayers","_coreGlobalExportsJs","legacyCC","_renderSceneSceneSkinJs","Skin","_renderSceneScenePostSettingsJs","PostSettings","execute","GEOMETRY_RENDERER_TECHNIQUE_COUNT","_export","PipelineSceneData","fog","ambient","skybox","shadows","csmLayers","octree","skin","postSettings","lightProbes","internal","LightProbes","validPunctualLights","renderObjects","shadowFrameBufferMap","Map","_geometryRendererMaterials","_geometryRendererPasses","_geometryRendererShaders","_occlusionQueryVertexBuffer","_occlusionQueryIndicesBuffer","_occlusionQueryInputAssembler","_occlusionQueryMaterial","_occlusionQueryShader","_isHDR","_shadingScale","_csmSupported","_standardSkinMeshRenderer","_standardSkinModel","_skinMaterialModel","_proto","prototype","activate","device","_device","initGeometryRendererMaterials","initOcclusionQuery","offset","tech","_uuid","initialize","effectName","technique","pass","passes","length","getShaderVariant","_createOcclusionQueryIA","mat","getOcclusionQueryPass","updatePipelineSceneData","destroy","_this$_occlusionQuery","_this$_occlusionQuery2","_this$_occlusionQuery3","vertices","Float32Array","vbStride","BYTES_PER_ELEMENT","vbSize","createBuffer","VERTEX","TRANSFER_DST","DEVICE","update","indices","Uint16Array","ibStride","ibSize","INDEX","attributes","RGB32F","info","inputAssembler","createInputAssembler","_createClass","key","get","set","val","clearGlobalStandardSkinObjectFlag","standardSkinModel","model"],"sources":["../../../../../../../../cocos/rendering/pipeline-scene-data.ts"],"mappings":";;;;;;;4XAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EApBA;IAAAA,OAAA,aAAAC,sBAAA;MAsBSC,GAAG,GAAAD,sBAAA,CAAHC,GAAG;IAAA,aAAAC,0BAAA;MACHC,OAAO,GAAAD,0BAAA,CAAPC,OAAO;IAAA,aAAAC,yBAAA;MACPC,MAAM,GAAAD,yBAAA,CAANC,MAAM;IAAA,aAAAC,0BAAA;MACNC,OAAO,GAAAD,0BAAA,CAAPC,OAAO;IAAA,aAAAC,yBAAA;MACPC,MAAM,GAAAD,yBAAA,CAANC,MAAM;IAAA,aAAAC,WAAA;MAE+BC,kBAAkB,GAAAD,WAAA,CAAlBC,kBAAkB;MAAUC,UAAU,GAAAF,WAAA,CAAVE,UAAU;MAChFC,cAAc,GAAAH,WAAA,CAAdG,cAAc;MAAEC,cAAc,GAAAJ,WAAA,CAAdI,cAAc;MAAEC,SAAS,GAAAL,WAAA,CAATK,SAAS;MAAEC,MAAM,GAAAN,WAAA,CAANM,MAAM;IAAA,aAAAC,mBAAA;MAE5CC,QAAQ,GAAAD,mBAAA,CAARC,QAAQ;IAAA,aAAAC,kBAAA;MAERC,SAAS,GAAAD,kBAAA,CAATC,SAAS;IAAA,aAAAC,oBAAA;MACTC,QAAQ,GAAAD,oBAAA,CAARC,QAAQ;IAAA,aAAAC,uBAAA;MACRC,IAAI,GAAAD,uBAAA,CAAJC,IAAI;IAAA,aAAAC,+BAAA;MAEJC,YAAY,GAAAD,+BAAA,CAAZC,YAAY;IAAA;IAAAC,OAAA,WAAAA,CAAA;MAGfC,iCAAiC,GAAG,CAAC;MAAAC,OAAA,sBAE9BC,iBAAiB;QAoG1B,SAAAA,kBAAA,EAAe;UAAA,KAtCRC,GAAG,GAAQ,IAAI9B,GAAG,CAAC,CAAC;UAAA,KACpB+B,OAAO,GAAY,IAAI7B,OAAO,CAAC,CAAC;UAAA,KAChC8B,MAAM,GAAW,IAAI5B,MAAM,CAAC,CAAC;UAAA,KAC7B6B,OAAO,GAAY,IAAI3B,OAAO,CAAC,CAAC;UAAA,KAChC4B,SAAS,GAAc,IAAIf,SAAS,CAAC,CAAC;UAAA,KACtCgB,MAAM,GAAW,IAAI3B,MAAM,CAAC,CAAC;UAAA,KAC7B4B,IAAI,GAAS,IAAIb,IAAI,CAAC,CAAC;UAAA,KACvBc,YAAY,GAAiB,IAAIZ,YAAY,CAAC,CAAC;UAAA,KAC/Ca,WAAW,GAAGjB,QAAQ,CAACkB,QAAQ,CAACC,WAAW,GAAG,IAAInB,QAAQ,CAACkB,QAAQ,CAACC,WAAW,CAAC,CAAC,GAAG,IAAI;UAE/F;AACJ;AACA;AACA;UAHI,KAIOC,mBAAmB,GAAY,EAAE;UAExC;AACJ;AACA;AACA;UAHI,KAIOC,aAAa,GAAoB,EAAE;UAAA,KACnCC,oBAAoB,GAA4B,IAAIC,GAAG,CAAC,CAAC;UAAA,KAEtDC,0BAA0B,GAAe,EAAE;UAAA,KAC3CC,uBAAuB,GAAW,EAAE;UAAA,KACpCC,wBAAwB,GAAa,EAAE;UAAA,KACvCC,2BAA2B,GAAkB,IAAI;UAAA,KACjDC,4BAA4B,GAAkB,IAAI;UAAA,KAClDC,6BAA6B,GAA0B,IAAI;UAAA,KAC3DC,uBAAuB,GAAoB,IAAI;UAAA,KAC/CC,qBAAqB,GAAkB,IAAI;UAAA,KAC3CC,MAAM,GAAG,IAAI;UAAA,KACbC,aAAa,GAAG,GAAG;UAAA,KACnBC,aAAa,GAAG,IAAI;UAAA,KACtBC,yBAAyB,GAAwB,IAAI;UAAA,KACrDC,kBAAkB,GAAiB,IAAI;UAAA,KACvCC,kBAAkB,GAAiB,IAAI;UAG3C,IAAI,CAACJ,aAAa,GAAG,GAAG;QAC5B;QAAC,IAAAK,MAAA,GAAA9B,iBAAA,CAAA+B,SAAA;QAAAD,MAAA,CAEME,QAAQ,GAAf,SAAAA,SAAiBC,MAAc,EAAW;UACtC,IAAI,CAACC,OAAO,GAAGD,MAAM;UAErB,IAAI,CAACE,6BAA6B,CAAC,CAAC;UACpC,IAAI,CAACC,kBAAkB,CAAC,CAAC;UAEzB,OAAO,IAAI;QACf,CAAC;QAAAN,MAAA,CAEMK,6BAA6B,GAApC,SAAAA,8BAAA,EAA8C;UAC1C,IAAIE,MAAM,GAAG,CAAC;UACd,KAAK,IAAIC,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAGxC,iCAAiC,EAAEwC,IAAI,EAAE,EAAE;YACjE,IAAI,CAACtB,0BAA0B,CAACsB,IAAI,CAAC,GAAG,IAAIlD,QAAQ,CAAC,CAAC;YACtD,IAAI,CAAC4B,0BAA0B,CAACsB,IAAI,CAAC,CAACC,KAAK,mCAAiCD,IAAM;YAClF,IAAI,CAACtB,0BAA0B,CAACsB,IAAI,CAAC,CAACE,UAAU,CAAC;cAAEC,UAAU,EAAE,oCAAoC;cAAEC,SAAS,EAAEJ;YAAK,CAAC,CAAC;YAEvH,KAAK,IAAIK,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAG,IAAI,CAAC3B,0BAA0B,CAACsB,IAAI,CAAC,CAACM,MAAM,CAACC,MAAM,EAAE,EAAEF,IAAI,EAAE;cACnF,IAAI,CAAC1B,uBAAuB,CAACoB,MAAM,CAAC,GAAG,IAAI,CAACrB,0BAA0B,CAACsB,IAAI,CAAC,CAACM,MAAM,CAACD,IAAI,CAAC;cACzF,IAAI,CAACzB,wBAAwB,CAACmB,MAAM,CAAC,GAAG,IAAI,CAACrB,0BAA0B,CAACsB,IAAI,CAAC,CAACM,MAAM,CAACD,IAAI,CAAC,CAACG,gBAAgB,CAAC,CAAE;cAC9GT,MAAM,EAAE;YACZ;UACJ;QACJ,CAAC;QAAAP,MAAA,CAUMM,kBAAkB,GAAzB,SAAAA,mBAAA,EAAmC;UAC/B,IAAI,CAAC,IAAI,CAACf,6BAA6B,EAAE;YACrC,IAAI,CAACA,6BAA6B,GAAG,IAAI,CAAC0B,uBAAuB,CAAC,CAAC;UACvE;UAEA,IAAI,CAAC,IAAI,CAACzB,uBAAuB,EAAE;YAC/B,IAAM0B,GAAG,GAAG,IAAI5D,QAAQ,CAAC,CAAC;YAC1B4D,GAAG,CAACT,KAAK,GAAG,kCAAkC;YAC9CS,GAAG,CAACR,UAAU,CAAC;cAAEC,UAAU,EAAE;YAAmC,CAAC,CAAC;YAClE,IAAI,CAACnB,uBAAuB,GAAG0B,GAAG;YAClC,IAAIA,GAAG,CAACJ,MAAM,CAACC,MAAM,GAAG,CAAC,EAAE;cACvB,IAAI,CAACtB,qBAAqB,GAAGyB,GAAG,CAACJ,MAAM,CAAC,CAAC,CAAC,CAACE,gBAAgB,CAAC,CAAC;YACjE;UACJ;QACJ,CAAC;QAAAhB,MAAA,CAEMmB,qBAAqB,GAA5B,SAAAA,sBAAA,EAA6C;UACzC,IAAI,IAAI,CAAC3B,uBAAuB,IAAI,IAAI,CAACA,uBAAuB,CAACsB,MAAM,CAACC,MAAM,GAAG,CAAC,EAAE;YAChF,OAAO,IAAI,CAACvB,uBAAuB,CAACsB,MAAM,CAAC,CAAC,CAAC;UACjD;UAEA,OAAO,IAAI;QACf,CAAC;QAAAd,MAAA,CAEMoB,uBAAuB,GAA9B,SAAAA,wBAAA,EAAwC,CACxC,CAAC;QAAApB,MAAA,CAEMqB,OAAO,GAAd,SAAAA,QAAA,EAAwB;UAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;UACpB,IAAI,CAAClD,OAAO,CAAC+C,OAAO,CAAC,CAAC;UACtB,IAAI,CAAC9C,SAAS,CAAC8C,OAAO,CAAC,CAAC;UACxB,IAAI,CAACvC,mBAAmB,CAACiC,MAAM,GAAG,CAAC;UACnC,CAAAO,qBAAA,OAAI,CAAC/B,6BAA6B,cAAA+B,qBAAA,uBAAlCA,qBAAA,CAAoCD,OAAO,CAAC,CAAC;UAC7C,IAAI,CAAC9B,6BAA6B,GAAG,IAAI;UACzC,CAAAgC,sBAAA,OAAI,CAAClC,2BAA2B,cAAAkC,sBAAA,uBAAhCA,sBAAA,CAAkCF,OAAO,CAAC,CAAC;UAC3C,IAAI,CAAChC,2BAA2B,GAAG,IAAI;UACvC,CAAAmC,sBAAA,OAAI,CAAClC,4BAA4B,cAAAkC,sBAAA,uBAAjCA,sBAAA,CAAmCH,OAAO,CAAC,CAAC;UAC5C,IAAI,CAAC/B,4BAA4B,GAAG,IAAI;UACxC,IAAI,CAACO,yBAAyB,GAAG,IAAI;UACrC,IAAI,CAACC,kBAAkB,GAAG,IAAI;UAC9B,IAAI,CAACC,kBAAkB,GAAG,IAAI;QAClC,CAAC;QAAAC,MAAA,CAEOiB,uBAAuB,GAA/B,SAAAA,wBAAA,EAAmD;UAC/C;UACA,IAAMd,MAAM,GAAG,IAAI,CAACC,OAAO;UAC3B,IAAMqB,QAAQ,GAAG,IAAIC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;UACvH,IAAMC,QAAQ,GAAGD,YAAY,CAACE,iBAAiB,GAAG,CAAC;UACnD,IAAMC,MAAM,GAAGF,QAAQ,GAAG,CAAC;UAC3B,IAAI,CAACtC,2BAA2B,GAAGc,MAAM,CAAC2B,YAAY,CAAC,IAAI9E,UAAU,CACjEC,cAAc,CAAC8E,MAAM,GAAG9E,cAAc,CAAC+E,YAAY,EACnD9E,cAAc,CAAC+E,MAAM,EACrBJ,MAAM,EACNF,QACJ,CAAC,CAAC;UACF,IAAI,CAACtC,2BAA2B,CAAC6C,MAAM,CAACT,QAAQ,CAAC;;UAEjD;UACA,IAAMU,OAAO,GAAG,IAAIC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;UAC7I,IAAMC,QAAQ,GAAGD,WAAW,CAACR,iBAAiB;UAC9C,IAAMU,MAAM,GAAGD,QAAQ,GAAG,EAAE;UAC5B,IAAI,CAAC/C,4BAA4B,GAAGa,MAAM,CAAC2B,YAAY,CAAC,IAAI9E,UAAU,CAClEC,cAAc,CAACsF,KAAK,GAAGtF,cAAc,CAAC+E,YAAY,EAClD9E,cAAc,CAAC+E,MAAM,EACrBK,MAAM,EACND,QACJ,CAAC,CAAC;UACF,IAAI,CAAC/C,4BAA4B,CAAC4C,MAAM,CAACC,OAAO,CAAC;UAEjD,IAAMK,UAAuB,GAAG,CAC5B,IAAIrF,SAAS,CAAC,YAAY,EAAEC,MAAM,CAACqF,MAAM,CAAC,CAC7C;;UAED;UACA,IAAMC,IAAI,GAAG,IAAI3F,kBAAkB,CAACyF,UAAU,EAAE,CAAC,IAAI,CAACnD,2BAA2B,CAAC,EAAE,IAAI,CAACC,4BAA4B,CAAC;UACtH,IAAMqD,cAAc,GAAGxC,MAAM,CAACyC,oBAAoB,CAACF,IAAI,CAAC;UAExD,OAAOC,cAAc;QACzB,CAAC;QAAAE,YAAA,CAAA3E,iBAAA;UAAA4E,GAAA;UAAAC,GAAA;UApND;AACJ;AACA;AACA;AACA;UACI,SAAAA,IAAA,EAA6B;YACzB,OAAO,IAAI,CAACrD,MAAM;UACtB,CAAC;UAAAsD,GAAA,EAED,SAAAA,IAAkBC,GAAY,EAAE;YAC5B,IAAI,CAACvD,MAAM,GAAGuD,GAAG;UACrB;QAAC;UAAAH,GAAA;UAAAC,GAAA,EACD,SAAAA,IAAA,EAAmC;YAC/B,OAAO,IAAI,CAACpD,aAAa;UAC7B,CAAC;UAAAqD,GAAA,EAED,SAAAA,IAAyBC,GAAW,EAAE;YAClC,IAAI,CAACtD,aAAa,GAAGsD,GAAG;UAC5B;QAAC;UAAAH,GAAA;UAAAC,GAAA,EAED,SAAAA,IAAA,EAAoC;YAChC,OAAO,IAAI,CAACnD,aAAa;UAC7B,CAAC;UAAAoD,GAAA,EACD,SAAAA,IAAyBC,GAAY,EAAE;YACnC,IAAI,CAACrD,aAAa,GAAGqD,GAAG;UAC5B;;UAEA;AACJ;AACA;AACA;AACA;AACA;QALI;UAAAH,GAAA;UAAAC,GAAA,EAMA,SAAAA,IAAA,EAAuC;YAAE,OAAO,IAAI,CAACjD,kBAAkB;UAAE,CAAC;UAAAkD,GAAA,EAC1E,SAAAA,IAAuBC,GAAiB,EAAE;YACtC,IAAI,CAACnD,kBAAkB,GAAGmD,GAAG;UACjC;;UAEA;AACJ;AACA;AACA;AACA;AACA;QALI;UAAAH,GAAA;UAAAC,GAAA,EAMA,SAAAA,IAAA,EAAqD;YAAE,OAAO,IAAI,CAAClD,yBAAyB;UAAE,CAAC;UAAAmD,GAAA,EAC/F,SAAAA,IAA8BC,GAAwB,EAAE;YACpD,IAAI,IAAI,CAACpD,yBAAyB,IAAI,IAAI,CAACA,yBAAyB,KAAKoD,GAAG,EAAE;cAC1E,IAAI,CAACpD,yBAAyB,CAACqD,iCAAiC,CAAC,CAAC;YACtE;YAEA,IAAI,CAACrD,yBAAyB,GAAGoD,GAAG;YACpC,IAAI,CAACE,iBAAiB,GAAGF,GAAG,GAAGA,GAAG,CAACG,KAAK,GAAG,IAAI;UACnD;QAAC;UAAAN,GAAA;UAAAC,GAAA,EAED,SAAAA,IAAA,EAAgC;YAC5B,OAAO,IAAI,CAAChD,kBAAkB;UAClC,CAAC;UAAAiD,GAAA,EACD,SAAAA,IAAuBC,GAAU,EAAE;YAC/B,IAAI,CAAClD,kBAAkB,GAAGkD,GAAG;UACjC;QAAC;UAAAH,GAAA;UAAAC,GAAA,EAoED,SAAAA,IAAA,EAA6C;YACzC,OAAO,IAAI,CAAC5D,uBAAuB;UACvC;QAAC;UAAA2D,GAAA;UAAAC,GAAA,EAED,SAAAA,IAAA,EAAgD;YAC5C,OAAO,IAAI,CAAC3D,wBAAwB;UACxC;QAAC;QAAA,OAAAlB,iBAAA;MAAA;IAAA;EAAA;AAAA"}