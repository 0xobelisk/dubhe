{"version":3,"names":["setters","_coreIndexJs","Vec3","cclegacy","_ambientJs","Ambient","_lightJs","Light","LightType","_shadowsJs","CSMLevel","CSMOptimizationMode","PCFType","Shadows","execute","_forward","_v3","_export","DirectionalLight","_Light","_inheritsLoose","_this","call","_dir","_illuminanceHDR","SUN_ILLUM","_illuminanceLDR","_shadowEnabled","_shadowPcf","HARD","_shadowBias","_shadowNormalBias","_shadowSaturation","_shadowDistance","_shadowInvisibleOcclusionRange","_csmLevel","LEVEL_4","_csmNeedUpdate","_csmLayerLambda","_csmOptimizationMode","DisableRotationFix","_csmLayersTransition","_csmTransitionRange","_shadowFixedArea","_shadowNear","_shadowFar","_shadowOrthoSize","_type","DIRECTIONAL","_proto","prototype","initialize","illuminance","direction","update","_node","hasChangedFlags","transformQuat","worldRotation","activate","root","director","pipeline","pipelineSceneData","csmSupported","macros","CC_DIR_LIGHT_SHADOW_TYPE","csmLevel","CC_CASCADED_LAYERS_TRANSITION","CC_DIR_SHADOW_PCF_TYPE","onGlobalPipelineStateChanged","_createClass","key","get","set","dir","normalize","isHDR","value","illuminanceHDR","illuminanceLDR","val","Math","min","MAX_FAR"],"sources":["../../../../../../../../../cocos/render-scene/scene/directional-light.ts"],"mappings":"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"}