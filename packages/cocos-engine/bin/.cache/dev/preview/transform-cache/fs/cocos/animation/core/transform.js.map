{"version":3,"names":["invScaleOrZero","out","scale","epsilon","x","y","z","Vec3","set","Math","abs","__calculateDeltaTransform","target","base","subtract","position","deltaQuat","rotation","_export","setters","_coreMathVec3Js","_coreMathQuatJs","Quat","_coreIndexJs","EPSILON","Mat4","execute","CACHE_VECTOR_A","CACHE_VECTOR_B","CACHE_QUAT_A","CACHE_QUAT_B","Transform","_position","_rotation","_scale","clone","ONE","src","transform","copy","setIdentity","ZERO","IDENTITY","equals","a","b","strictEquals","lerp","from","to","t","slerp","multiply","second","first","cacheRotation","cacheScale","cachePosition","transformQuat","add","invert","invRotation","invScale","invPosition","negate","fromMatrix","matrix","toSRT","toMatrix","fromSRT","_createClass","key","get","value","_class","Object","freeze","calculateRelative","cacheInvRotation","cacheInvScale","invSecondRotation","__applyDeltaTransform","cacheQuat","delta","alpha","scaleAndAdd","weightedDeltaRotation","quatMultiInvInverseCache","fromInv","ZERO_DELTA_TRANSFORM"],"sources":["../../../../../../../../../cocos/animation/core/transform.ts"],"mappings":"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"}