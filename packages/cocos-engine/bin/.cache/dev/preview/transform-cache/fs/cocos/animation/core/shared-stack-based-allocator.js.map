{"version":3,"names":["DEBUG","_virtualInternal253AconstantsJs","_coreIndexJs","assertIsTrue","binarySearchEpsilon","execute","allocatorPageCountTag","Symbol","onStackPurgedTag","SharedMemoryPage","byteLength","buffer","useCount","ArrayBuffer","PagedStack","_manager","_pageSize","_locking","_pages","_allocatorCount","_proto","prototype","debugLock","debugUnlock","getPageMemory","index","length","pushPage","allocator","oldAllocatorPageCount","_pushNewPage","page","popPage","allocatorPageCount","allocatorLastPageIndex","lastPage","pop","createAllocator","sliceSize","SharedStackBasedAllocator","destroyAllocator","iPage","newPage","push","_createClass","key","get","SharedMemorySlice","byteOffset","_resource","_sliceSize","_slicesPerPage","_slices","slicesPerPage","Math","floor","pageSize","_proto2","destroy","debugLocking","sliceLength","slices","desiredSliceIndex","newSliceIndexInPage","newSlicePageIndex","capacity","pageMemory","newSlice","allocatedCount","removingSliceIndex","removingSliceIndexInPage","_export","SharedStackBasedAllocatorManager","_thresholds","_stacks","Map","every","v","i","arr","_proto3","allocationPageSize","stackPageSize","_selectStackPageSize","stack","set","stackFound","_iterator","_createForOfIteratorHelperLoose","_step","done","_step$value","value","k","thresholdIndex","size"],"sources":["../../../../../../../../../cocos/animation/core/shared-stack-based-allocator.ts"],"mappings":"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"}