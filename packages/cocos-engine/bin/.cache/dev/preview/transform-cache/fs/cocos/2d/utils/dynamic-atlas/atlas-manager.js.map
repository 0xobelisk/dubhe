{"version":3,"names":["setters","_virtualInternal253AconstantsJs","EDITOR_NOT_IN_PREVIEW","_coreIndexJs","System","macro","js","cclegacy","_assetAssetsAssetEnumJs","Filter","_atlasJs","Atlas","_gameIndexJs","director","execute","_export","DynamicAtlasManager","_System","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","_atlases","_atlasIndex","_maxAtlasCount","_textureSize","_maxFrameSize","_textureBleeding","_enabled","_proto","prototype","newAtlas","atlas","push","beforeSceneLoad","reset","init","enabled","CLEANUP_IMAGE_CACHE","insertSpriteFrame","spriteFrame","_original","packable","sampler","texture","getSamplerInfo","minFilter","LINEAR","magFilter","mipFilter","NONE","frame","i","l","destroy","deleteAtlasSpriteFrame","array","fastRemove","_innerSpriteFrames","_texture","deleteAtlasTexture","deleteInnerTexture","isEmpty","splice","packToDynamicAtlas","comp","width","height","packedFrame","_setDynamicAtlasFrame","_createClass","key","get","set","value","on","Director","EVENT_BEFORE_SCENE_LAUNCH","off","enable","instance","dynamicAtlasManager","registerSystem","internal"],"sources":["../../../../../../../../../../cocos/2d/utils/dynamic-atlas/atlas-manager.ts"],"mappings":"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"}