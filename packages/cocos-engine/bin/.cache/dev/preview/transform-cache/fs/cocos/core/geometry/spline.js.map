{"version":3,"names":["_export","setters","_dataUtilsAssertsJs","assertIsTrue","_mathIndexJs","clamp","Vec3","_platformDebugJs","warnID","_enumsJs","enums","default","execute","SplineMode","SPLINE_WHOLE_INDEX","_v0","_v1","_v2","_v3","Spline","mode","knots","CATMULL_ROM","_type","_mode","_knots","SHAPE_SPLINE","i","length","create","clone","s","copy","out","_proto","prototype","setModeAndKnots","clearKnots","getKnotCount","addKnot","knot","push","insertKnot","index","item","splice","removeKnot","setKnot","set","getKnot","getPoint","t","segments","getSegments","deltaT","Math","floor","LINEAR","calcLinear","BEZIER","calcBezier","v0","v3","calcCatmullRom","getPoints","num","point","points","count","v1","result","multiplyScalar","add","v2","t2","t3","_createClass","key","get"],"sources":["../../../../../../../../../cocos/core/geometry/spline.ts"],"mappings":"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"}