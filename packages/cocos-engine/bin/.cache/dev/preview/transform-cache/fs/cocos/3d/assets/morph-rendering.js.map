{"version":3,"names":["createMorphRendering","mesh","gfxDevice","StdMorphRendering","createVec4TextureFactory","vec4Capacity","hasFeatureFloatTexture","getFormatFeatures","Format","RGBA32F","FormatFeatureBit","SAMPLED_TEXTURE","pixelRequired","pixelFormat","pixelBytes","UpdateViewConstructor","Texture2D","PixelFormat","Float32Array","RGBA8888","Uint8Array","_bestSizeToHavePixels","bestSizeToHavePixels","width","height","assertIsTrue","create","arrayBuffer","ArrayBuffer","valueView","updateView","image","ImageAsset","_data","_compressed","format","textureAsset","setFilters","Filter","NEAREST","setMipFilter","NONE","setWrapMode","WrapMode","CLAMP_TO_EDGE","getGFXTexture","warn","sampler","getSampler","getSamplerInfo","texture","destroy","updatePixels","uploadData","enableVertexId","subMeshIndex","renderingSubMeshes","enableVertexIdChannel","nPixels","aligned","nextPow2","epxSum","bits","log2","h","w","_export","setters","_gfxIndexJs","AttributeName","BufferUsageBit","MemoryUsageBit","BufferInfo","_assetAssetsTexture2dJs","_assetAssetsImageAssetJs","_renderingDefineJs","UBOMorph","UNIFORM_NORMAL_MORPH_TEXTURE_BINDING","UNIFORM_POSITION_MORPH_TEXTURE_BINDING","UNIFORM_TANGENT_MORPH_TEXTURE_BINDING","_coreIndexJs","assertIsNonNullable","cclegacy","execute","preferCpuComputing","_mesh","_subMeshRenderings","struct","morph","nSubMeshes","primitives","length","Array","fill","iSubMesh","subMeshMorph","subMeshMorphs","targets","MAX_MORPH_TARGET_COUNT","CpuComputing","GpuComputing","_proto","prototype","createInstance","_this","subMeshInstances","_this$_subMeshRenderi","_this$_subMeshRenderi2","setWeights","weights","_subMeshInstances$sub","requiredPatches","subMeshRenderingInstance","patches","name","value","attributes","includes","ATTR_POSITION","push","ATTR_NORMAL","ATTR_TANGENT","apply","adaptPipelineState","descriptorSet","_subMeshInstances$sub2","_i","_subMeshInstances","subMeshInstance","_gfxDevice","_subMeshMorph","_textureInfo","_attributes","_verticesCount","nVertices","vertexBundles","vertexBundelIndices","view","count","nTargets","vec4Required","vec4TextureFactory","map","attributeName","attributeIndex","vec4Tex","forEach","morphTarget","morphTargetIndex","displacementsView","displacements","data","buffer","byteOffset","offset","displacementsOffset","iVertex","morphTexture","_proto2","_iterator","_createForOfIteratorHelperLoose","_step","done","attribute","_this2","morphUniforms","MorphUniforms","setMorphTextureInfo","setVerticesCount","commit","_iterator2","_step2","binding","undefined","bindSampler","bindTexture","bindBuffer","BINDING","update","attributeDisplacement","_proto3","CpuComputingRenderingInstance","_createClass","key","get","owner","_owner","_morphUniforms","attributeMorph","_proto4","iAttribute","myAttribute","iTarget","targetDisplacements","weight","_iterator3","_step3","targetCount","_targetCount","_localBuffer","_remoteBuffer","DataView","SIZE","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","_proto5","iWeight","setFloat32","OFFSET_OF_WEIGHTS","sys","isLittleEndian","OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH","OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT","OFFSET_OF_VERTICES_COUNT"],"sources":["../../../../../../../../../cocos/3d/assets/morph-rendering.ts"],"mappings":"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"}