{"version":3,"names":["ccclass","_coreDataDecoratorsIndexJs","_defineJs","PIPELINE_FLOW_SHADOW","supportsR32FloatTexture","UBOCamera","UBOCSM","UBOGlobal","UBOShadow","_renderFlowJs","RenderFlow","_enumJs","ForwardFlowPriority","_shadowStageJs","ShadowStage","_gfxIndexJs","LoadOp","StoreOp","Format","TextureType","TextureUsageBit","ColorAttachment","DepthStencilAttachment","RenderPassInfo","TextureInfo","FramebufferInfo","API","_pipelineSerializationJs","RenderFlowTag","_renderSceneSceneShadowsJs","PCFType","ShadowType","_renderSceneSceneLightJs","LightType","execute","_validLights","_export","ShadowFlow","_dec","_class","_class2","_RenderFlow","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","_shadowRenderPass","_proto","prototype","initialize","info","_stages","shadowMapStage","initInfo","push","activate","pipeline","isRGBE","device","macros","CC_SHADOWMAP_FORMAT","isLinear","gfxAPI","WEBGL","CC_SHADOWMAP_USE_LINEAR_DEPTH","pipelineSceneData","csmSupported","capabilities","maxFragmentUniformVectors","COUNT","CC_SUPPORT_CASCADED_SHADOW_MAP","CC_SHADOW_TYPE","CC_DIR_SHADOW_PCF_TYPE","HARD","CC_DIR_LIGHT_SHADOW_TYPE","CC_CASCADED_LAYERS_TRANSITION","onGlobalPipelineStateChanged","render","camera","_pipeline","shadowInfo","shadows","csmLayers","shadowFrameBufferMap","castShadowObjects","validPunctualLights","enabled","type","ShadowMap","n","m","maxReceived","light","SPOT","spotLight","shadowEnabled","clearShadowMap","shadowMapDirty","resizeShadowMap","_ref","scene","mainLight","globalDS","descriptorSet","has","_initShadowFrameBuffer","window","swapchain","shadowFrameBuffer","get","shadowFixedArea","_renderStage","csmLevel","i","l","ds","globalDSManager","getOrCreateDescriptorSet","destroy","shadowFrameBuffers","from","values","frameBuffer","renderTargets","colorTextures","j","renderTarget","depth","depthStencilTexture","clear","shadowMapSize","size","format","R32F","RGBA8","colorAttachment","loadOp","CLEAR","storeOp","STORE","sampleCount","depthStencilAttachment","DEPTH_STENCIL","depthLoadOp","depthStoreOp","DISCARD","stencilLoadOp","stencilStoreOp","renderPassInfo","createRenderPass","shadowRenderTargets","createTexture","TEX2D","COLOR_ATTACHMENT","SAMPLED","x","y","DEPTH_STENCIL_ATTACHMENT","createFramebuffer","set","level","shadowStage","setUsage","validLights","_ref2","clearFramebuffer","_iterator","_createForOfIteratorHelperLoose","keys","_step","done","key","value","resize","shadowRenderPass","renderPass","newFrameBuffer","name","priority","SHADOW","tag","SCENE","stages"],"sources":["../../../../../../../../../cocos/rendering/shadow/shadow-flow.ts"],"mappings":"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"}