{"version":3,"names":["setters","_assetAssetsAssetEnumJs","PixelFormat","_assetAssetsTexture2dJs","Texture2D","_gfxIndexJs","BufferTextureCopy","_coreIndexJs","cclegacy","execute","space","_export","Atlas","width","height","_texture","_width","_height","_x","_y","_nexty","_innerTextureInfos","_innerSpriteFrames","_count","texture","DynamicAtlasTexture","initWithSize","_proto","prototype","insertSpriteFrame","spriteFrame","rect","info","getId","sx","x","sy","y","internal","dynamicAtlasManager","textureBleeding","drawTextureAt","image","frame","push","deleteInnerTexture","isEmpty","reset","frames","i","l","length","isValid","_resetDynamicAtlasFrame","destroy","_Texture2D","_inheritsLoose","apply","arguments","_proto2","format","RGBA8888","gfxTexture","getGFXTexture","gfxDevice","_getGFXDevice","console","warn","region","texOffset","texExtent","copyTexImagesToTexture","data"],"sources":["../../../../../../../../../../cocos/2d/utils/dynamic-atlas/atlas.ts"],"mappings":"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"}