{"version":3,"names":["applyTransformModificationQueue","context","pose","queue","spaceFlagTable","nMods","length","DEBUG","debugLastModTransformIndex","iMod","transformIndex","array","assertIsTrue","_poseTransformSpace","PoseTransformSpace","LOCAL","_queue$array$_iMod","transform","transforms","setTransform","COMPONENT","clear","firstTransformToConvert","lastTransformToConvert","set","parentTransformIndex","parentTable","test","getTransform","cacheTransform_spaceConversion","parentTransform","cacheParentTransform_spaceConversion","Transform","calculateRelative","_queue$array$_iMod2","unset","multiply","setters","_virtualInternal253AconstantsJs","_coreDataDecoratorsIndexJs","ccclass","serializable","_defineJs","CLASS_NAME_PREFIX_ANIM","_poseNodeJs","PoseNode","_decoratorInputJs","input","_decoratorNodeJs","poseGraphNodeHide","_corePoseJs","_foundationTypeSystemJs","PoseGraphType","_coreIndexJs","CachedArray","Pool","_coreTransformJs","execute","TransformModification","TransformModificationQueue","_pool","_array","_debugLastTransformIndex","_proto","prototype","push","mod","alloc","copy","get","free","_createClass","key","PoseTransformSpaceFlagTable","nTransforms","_transformFlags","Array","_proto2","fill","_export","PoseNodeModifyPoseBase","_dec","_dec2","_dec3","type","POSE","_class4","_class5","_PoseNode","_inheritsLoose","_this","_len","arguments","args","_key","call","apply","concat","_initializerDefineProperty","_descriptor","_assertThisInitialized","_modificationQueue","_spaceFlagTable","_proto3","settle","_this$pose","transformCount","reenter","_this$pose2","bind","_this$pose3","doUpdate","_this$pose4","update","doEvaluate","_this$pose$evaluate","_this$pose5","poseTransformSpaceRequirement","getPoseTransformSpaceRequirement","inputPose","evaluate","evaluateDefaultPose","modificationQueue","modifyPose","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["../../../../../../../../../../../cocos/animation/marionette/pose-graph/pose-nodes/modify-pose-base.ts"],"mappings":";;;;;;;;;;;;;;;EAsGA,SAASA,+BAA+BA,CACpCC,OAAwC,EACxCC,IAAU,EACVC,KAAiC,EACjCC,cAA2C,EACvC;IACJ,IAAMC,KAAK,GAAGF,KAAK,CAACG,MAAM;IAC1B,IAAID,KAAK,KAAK,CAAC,EAAE;MACb;IACJ;IAEA,IAAIE,KAAK,EAAE;MACP,IAAIC,0BAA0B,GAAG,CAAC,CAAC;MACnC,KAAK,IAAIC,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAGJ,KAAK,EAAE,EAAEI,IAAI,EAAE;QACrC,IAAQC,cAAc,GAAKP,KAAK,CAACQ,KAAK,CAACF,IAAI,CAAC,CAApCC,cAAc;QACtB;QACAE,YAAY,CAACF,cAAc,GAAGF,0BAA0B,CAAC;QACzDA,0BAA0B,GAAGE,cAAc;MAC/C;IACJ;;IAEA;IACA,IAAIR,IAAI,CAACW,mBAAmB,KAAKC,kBAAkB,CAACC,KAAK,EAAE;MACvD,KAAK,IAAIN,KAAI,GAAG,CAAC,EAAEA,KAAI,GAAGJ,KAAK,EAAE,EAAEI,KAAI,EAAE;QACrC,IAAAO,kBAAA,GAAsCb,KAAK,CAACQ,KAAK,CAACF,KAAI,CAAC;UAA/CC,eAAc,GAAAM,kBAAA,CAAdN,cAAc;UAAEO,SAAS,GAAAD,kBAAA,CAATC,SAAS;QACjCf,IAAI,CAACgB,UAAU,CAACC,YAAY,CAACT,eAAc,EAAEO,SAAS,CAAC;MAC3D;MACA;IACJ;IAEAL,YAAY,CAACV,IAAI,CAACW,mBAAmB,KAAKC,kBAAkB,CAACM,SAAS,CAAC;;IAEvE;IACA;IACA;;IAEA;IACAhB,cAAc,CAACiB,KAAK,CAAC,CAAC;;IAEtB;IACA,IAAMC,uBAAuB,GAAGnB,KAAK,CAACQ,KAAK,CAAC,CAAC,CAAC,CAACD,cAAc;IAC7D,IAAIa,sBAAsB,GAAGD,uBAAuB;IACpD,KAAK,IAAIb,MAAI,GAAG,CAAC,EAAEA,MAAI,GAAGJ,KAAK,EAAE,EAAEI,MAAI,EAAE;MACrC,IAAQC,gBAAc,GAAKP,KAAK,CAACQ,KAAK,CAACF,MAAI,CAAC,CAApCC,cAAc;MACtBN,cAAc,CAACoB,GAAG,CAACd,gBAAc,CAAC,CAAC,CAAC;MACpCa,sBAAsB,GAAGb,gBAAc;IAC3C;IACA,KAAK,IAAIA,gBAAc,GAAGY,uBAAuB,EAC7CZ,gBAAc,GAAGR,IAAI,CAACgB,UAAU,CAACZ,MAAM,EACvC,EAAEI,gBAAc,EAAE;MAClB,IAAMe,oBAAoB,GAAGxB,OAAO,CAACyB,WAAW,CAAChB,gBAAc,CAAC;MAChE,IAAIe,oBAAoB,GAAG,CAAC,EAAE;QAC1B;MACJ;MACA;MACA,IAAIrB,cAAc,CAACuB,IAAI,CAACF,oBAAoB,CAAC,EAAE;QAC3CrB,cAAc,CAACoB,GAAG,CAACd,gBAAc,CAAC,CAAC,CAAC;QACpCa,sBAAsB,GAAGb,gBAAc;MAC3C;IACJ;;IAEA;IACA;IACA,KAAK,IAAIA,gBAAc,GAAGa,sBAAsB,EAC5Cb,gBAAc,IAAIY,uBAAuB,EACzC,EAAEZ,gBAAc,EAAE;MAClB,IAAIN,cAAc,CAACuB,IAAI,CAACjB,gBAAc,CAAC,EAAE;QACrC,IAAMe,qBAAoB,GAAGxB,OAAO,CAACyB,WAAW,CAAChB,gBAAc,CAAC;QAChE,IAAIe,qBAAoB,IAAI,CAAC,EAAE;UAC3B,IAAMR,UAAS,GAAGf,IAAI,CAACgB,UAAU,CAACU,YAAY,CAAClB,gBAAc,EAAEmB,8BAA8B,CAAC;UAC9F,IAAMC,eAAe,GAAG5B,IAAI,CAACgB,UAAU,CAACU,YAAY,CAACH,qBAAoB,EAAEM,oCAAoC,CAAC;UAChHC,SAAS,CAACC,iBAAiB,CAAChB,UAAS,EAAEA,UAAS,EAAEa,eAAe,CAAC;UAClE5B,IAAI,CAACgB,UAAU,CAACC,YAAY,CAACT,gBAAc,EAAEO,UAAS,CAAC;QAC3D;MACJ;IACJ;;IAEA;IACA,KAAK,IAAIR,MAAI,GAAG,CAAC,EAAEA,MAAI,GAAGJ,KAAK,EAAE,EAAEI,MAAI,EAAE;MACrC,IAAAyB,mBAAA,GAAsC/B,KAAK,CAACQ,KAAK,CAACF,MAAI,CAAC;QAA/CC,gBAAc,GAAAwB,mBAAA,CAAdxB,cAAc;QAAEO,WAAS,GAAAiB,mBAAA,CAATjB,SAAS;MACjCf,IAAI,CAACgB,UAAU,CAACC,YAAY,CAACT,gBAAc,EAAEO,WAAS,CAAC;MACvDb,cAAc,CAAC+B,KAAK,CAACzB,gBAAc,CAAC,CAAC,CAAC;IAC1C;;IAEA;IACA,KAAK,IAAIA,gBAAc,GAAGY,uBAAuB,EAC7CZ,gBAAc,IAAIa,sBAAsB,EACxC,EAAEb,gBAAc,EAAE;MAClB,IAAIN,cAAc,CAACuB,IAAI,CAACjB,gBAAc,CAAC,EAAE;QACrC,IAAMe,sBAAoB,GAAGxB,OAAO,CAACyB,WAAW,CAAChB,gBAAc,CAAC;QAChEE,YAAY,CAACa,sBAAoB,IAAI,CAAC,CAAC,CAAC,CAAC;QACzC,IAAMR,WAAS,GAAGf,IAAI,CAACgB,UAAU,CAACU,YAAY,CAAClB,gBAAc,EAAEmB,8BAA8B,CAAC;QAC9F,IAAMC,gBAAe,GAAG5B,IAAI,CAACgB,UAAU,CAACU,YAAY,CAACH,sBAAoB,EAAEM,oCAAoC,CAAC;QAChHC,SAAS,CAACI,QAAQ,CAACnB,WAAS,EAAEa,gBAAe,EAAEb,WAAS,CAAC;QACzDf,IAAI,CAACgB,UAAU,CAACC,YAAY,CAACT,gBAAc,EAAEO,WAAS,CAAC;MAC3D;IACJ;EACJ;EAAC;IAAAoB,OAAA,aAAAC,+BAAA;MAvMQ/B,KAAK,GAAA+B,+BAAA,CAAL/B,KAAK;IAAA,aAAAgC,0BAAA;MACLC,OAAO,GAAAD,0BAAA,CAAPC,OAAO;MAAYC,YAAY,GAAAF,0BAAA,CAAZE,YAAY;IAAA,aAAAC,SAAA;MAC/BC,sBAAsB,GAAAD,SAAA,CAAtBC,sBAAsB;IAAA,aAAAC,WAAA;MACtBC,QAAQ,GAAAD,WAAA,CAARC,QAAQ;IAAA,aAAAC,iBAAA;MACRC,KAAK,GAAAD,iBAAA,CAALC,KAAK;IAAA,aAAAC,gBAAA;MACLC,iBAAiB,GAAAD,gBAAA,CAAjBC,iBAAiB;IAAA,aAAAC,WAAA;MACXpC,kBAAkB,GAAAoC,WAAA,CAAlBpC,kBAAkB;IAAA,aAAAqC,uBAAA;MAExBC,aAAa,GAAAD,uBAAA,CAAbC,aAAa;IAAA,aAAAC,YAAA;MACbzC,YAAY,GAAAyC,YAAA,CAAZzC,YAAY;MAAE0C,WAAW,GAAAD,YAAA,CAAXC,WAAW;MAAEC,IAAI,GAAAF,YAAA,CAAJE,IAAI;IAAA,aAAAC,gBAAA;MAC/BxB,SAAS,GAAAwB,gBAAA,CAATxB,SAAS;IAAA;IAAAyB,OAAA,WAAAA,CAAA;MAEZC,qBAAqB,YAAAA,sBAAA;QAAA,KAChBhD,cAAc,GAAG,CAAC,CAAC;QAAA,KACnBO,SAAS,GAAG,IAAIe,SAAS,CAAC,CAAC;MAAA;MAKhC2B,0BAA0B;QAAA,SAAAA,2BAAA;UAAA,KAiCpBC,KAAK,GAAgC,IAAIL,IAAI,CAAC;YAAA,OAA6B,IAAIG,qBAAqB,CAAC,CAAC;UAAA,GAAE,CAAC,CAAC;UAAA,KAC1GG,MAAM,GAAG,IAAIP,WAAW,CAAwB,CAAC,CAAC;UAAA,KAClDQ,wBAAwB,GAAG,CAAC,CAAC;QAAA;QAAA,IAAAC,MAAA,GAAAJ,0BAAA,CAAAK,SAAA;QAAAD,MAAA,CA1B9BE,IAAI,GAAX,SAAAA,KAAavD,cAAsB,EAAEO,SAAoB,EAAQ;UAC7D,IAAIV,KAAK,EAAE;YACPK,YAAY,CAACF,cAAc,GAAG,IAAI,CAACoD,wBAAwB,2CAA2C,CAAC;YACvG,IAAI,CAACA,wBAAwB,GAAGpD,cAAc;UAClD;UACA,IAAMwD,GAAG,GAAG,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,CAAC;UAC9BD,GAAG,CAACxD,cAAc,GAAGA,cAAc;UACnCsB,SAAS,CAACoC,IAAI,CAACF,GAAG,CAACjD,SAAS,EAAEA,SAAS,CAAC;UACxC,IAAI,CAAC4C,MAAM,CAACI,IAAI,CAACC,GAAG,CAAC;QACzB,CAAC;QAAAH,MAAA,CAEM1C,KAAK,GAAZ,SAAAA,MAAA,EAAsB;UAClB,IAAMf,MAAM,GAAG,IAAI,CAACuD,MAAM,CAACvD,MAAM;UACjC,KAAK,IAAIG,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAGH,MAAM,EAAE,EAAEG,IAAI,EAAE;YACtC,IAAMyD,GAAG,GAAG,IAAI,CAACL,MAAM,CAACQ,GAAG,CAAC5D,IAAI,CAAC;YACjCG,YAAY,CAACsD,GAAG,CAAC;YACjB,IAAI,CAACN,KAAK,CAACU,IAAI,CAACJ,GAAG,CAAC;UACxB;UACA,IAAI,CAACL,MAAM,CAACxC,KAAK,CAAC,CAAC;UACnB,IAAId,KAAK,EAAE;YACP,IAAI,CAACuD,wBAAwB,GAAG,CAAC,CAAC;UACtC;QACJ,CAAC;QAAAS,YAAA,CAAAZ,0BAAA;UAAAa,GAAA;UAAAH,GAAA,EA9BD,SAAAA,IAAA,EAAsB;YAClB,OAAO,IAAI,CAACR,MAAM,CAACvD,MAAM;UAC7B;QAAC;UAAAkE,GAAA;UAAAH,GAAA,EAED,SAAAA,IAAA,EAAsC;YAClC,OAAO,IAAI,CAACR,MAAM,CAAClD,KAAK;UAC5B;QAAC;QAAA,OAAAgD,0BAAA;MAAA;MAiCCc,2BAA2B;QAC7B,SAAAA,4BAAaC,WAAmB,EAAE;UAAA,KAoC1BC,eAAe,GAAc,EAAE;UAnCnC,IAAI,CAACA,eAAe,GAAG,IAAIC,KAAK,CAACF,WAAW,CAAC;QACjD;;QAEA;AACJ;AACA;QAFI,IAAAG,OAAA,GAAAJ,2BAAA,CAAAT,SAAA;QAAAa,OAAA,CAGOxD,KAAK,GAAZ,SAAAA,MAAA,EAAsB;UAClB,IAAI,CAACsD,eAAe,CAACG,IAAI,CAAC,KAAK,CAAC;QACpC;;QAEA;AACJ;AACA;AACA;AACA,WAJI;QAAAD,OAAA,CAKOlD,IAAI,GAAX,SAAAA,KAAajB,cAAsB,EAAW;UAC1C,OAAO,IAAI,CAACiE,eAAe,CAACjE,cAAc,CAAC;QAC/C;;QAEA;AACJ;AACA;AACA,WAHI;QAAAmE,OAAA,CAIOrD,GAAG,GAAV,SAAAA,IAAYd,cAAsB,EAAQ;UACtC,IAAI,CAACiE,eAAe,CAACjE,cAAc,CAAC,GAAG,IAAI;QAC/C;;QAEA;AACJ;AACA;AACA,WAHI;QAAAmE,OAAA,CAIO1C,KAAK,GAAZ,SAAAA,MAAczB,cAAsB,EAAQ;UACxC,IAAI,CAACiE,eAAe,CAACjE,cAAc,CAAC,GAAG,KAAK;QAChD,CAAC;QAAA,OAAA+D,2BAAA;MAAA;MAKC5C,8BAA8B,GAAG,IAAIG,SAAS,CAAC,CAAC;MAChDD,oCAAoC,GAAG,IAAIC,SAAS,CAAC,CAAC;MAAA+C,OAAA,2BAuGtCC,sBAAsB,IAAAC,IAAA,GAF3CzC,OAAO,CAAIG,sBAAsB,2BAAwB,CAAC,EAAAuC,KAAA,GAC1DjC,iBAAiB,CAAC,CAAC,EAAAkC,KAAA,GAGfpC,KAAK,CAAC;QAAEqC,IAAI,EAAEhC,aAAa,CAACiC;MAAK,CAAC,CAAC,EAAAJ,IAAA,CAAAK,OAAA,GAAAJ,KAAA,CAAAI,OAAA,IAAAC,OAAA,0BAAAC,SAAA;QAAAC,cAAA,CAAAT,sBAAA,EAAAQ,SAAA;QAAA,SAAAR,uBAAA;UAAA,IAAAU,KAAA;UAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAtF,MAAA,EAAAuF,IAAA,OAAAjB,KAAA,CAAAe,IAAA,GAAAG,IAAA,MAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA;YAAAD,IAAA,CAAAC,IAAA,IAAAF,SAAA,CAAAE,IAAA;UAAA;UAAAJ,KAAA,GAAAF,SAAA,CAAAO,IAAA,CAAAC,KAAA,CAAAR,SAAA,SAAAS,MAAA,CAAAJ,IAAA;UAAAK,0BAAA,CAAAR,KAAA,UAAAS,WAAA,EAAAC,sBAAA,CAAAV,KAAA;UAAAA,KAAA,CA2C5BW,kBAAkB,GAAG,IAAI1C,0BAA0B,CAAC,CAAC;UAAA+B,KAAA,CACrDY,eAAe,GAAG,IAAI7B,2BAA2B,CAAC,CAAC,CAAC;UAAA,OAAAiB,KAAA;QAAA;QAAA,IAAAa,OAAA,GAAAvB,sBAAA,CAAAhB,SAAA;QAAAuC,OAAA,CAzCrDC,MAAM,GAAb,SAAAA,OAAevG,OAAoC,EAAQ;UAAA,IAAAwG,UAAA;UACvD,CAAAA,UAAA,OAAI,CAACvG,IAAI,cAAAuG,UAAA,uBAATA,UAAA,CAAWD,MAAM,CAACvG,OAAO,CAAC;UAC1B,IAAI,CAACqG,eAAe,GAAG,IAAI7B,2BAA2B,CAACxE,OAAO,CAACyG,cAAc,CAAC;QAClF,CAAC;QAAAH,OAAA,CAEMI,OAAO,GAAd,SAAAA,QAAA,EAAwB;UAAA,IAAAC,WAAA;UACpB,CAAAA,WAAA,OAAI,CAAC1G,IAAI,cAAA0G,WAAA,uBAATA,WAAA,CAAWD,OAAO,CAAC,CAAC;QACxB,CAAC;QAAAJ,OAAA,CAEMM,IAAI,GAAX,SAAAA,KAAa5G,OAAqC,EAAQ;UAAA,IAAA6G,WAAA;UACtD,CAAAA,WAAA,OAAI,CAAC5G,IAAI,cAAA4G,WAAA,uBAATA,WAAA,CAAWD,IAAI,CAAC5G,OAAO,CAAC;QAC5B,CAAC;QAAAsG,OAAA,CAESQ,QAAQ,GAAlB,SAAAA,SAAoB9G,OAAoC,EAAQ;UAAA,IAAA+G,WAAA;UAC5D,CAAAA,WAAA,OAAI,CAAC9G,IAAI,cAAA8G,WAAA,uBAATA,WAAA,CAAWC,MAAM,CAAChH,OAAO,CAAC;QAC9B,CAAC;QAAAsG,OAAA,CAESW,UAAU,GAApB,SAAAA,WAAsBjH,OAAwC,EAAQ;UAAA,IAAAkH,mBAAA,EAAAC,WAAA;UAClE,IAAMC,6BAA6B,GAAG,IAAI,CAACC,gCAAgC,CAAC,CAAC;UAC7E,IAAMC,SAAS,IAAAJ,mBAAA,IAAAC,WAAA,GAAG,IAAI,CAAClH,IAAI,cAAAkH,WAAA,uBAATA,WAAA,CAAWI,QAAQ,CAACvH,OAAO,EAAEoH,6BAA6B,CAAC,cAAAF,mBAAA,cAAAA,mBAAA,GACtEtE,QAAQ,CAAC4E,mBAAmB,CAACxH,OAAO,EAAEoH,6BAA6B,CAAC;UAE3E,IAA4BK,iBAAiB,GAAK,IAAI,CAA9CrB,kBAAkB;UAC1BzF,YAAY,CAAC8G,iBAAiB,CAACpH,MAAM,KAAK,CAAC,CAAC;UAC5C,IAAI,CAACqH,UAAU,CAAC1H,OAAO,EAAEsH,SAAS,EAAEG,iBAAiB,CAAC;UAEtD1H,+BAA+B,CAACC,OAAO,EAAEsH,SAAS,EAAEG,iBAAiB,EAAE,IAAI,CAACpB,eAAe,CAAC;UAC5FoB,iBAAiB,CAACrG,KAAK,CAAC,CAAC;UAEzB,OAAOkG,SAAS;QACpB,CAAC;QAAA,OAAAvC,sBAAA;MAAA,EAnCgDnC,QAAQ,IAAAsD,WAAA,GAAAyB,yBAAA,CAAArC,OAAA,CAAAvB,SAAA,WACxDvB,YAAY,EAAA0C,KAAA;QAAA0C,YAAA;QAAAC,UAAA;QAAAC,QAAA;QAAAC,WAAA,WAAAA,YAAA;UAAA,OAEkB,IAAI;QAAA;MAAA,KAAAzC,OAAA,MAAAD,OAAA,KAAAA,OAAA;IAAA;EAAA;AAAA"}