{"version":3,"names":["setters","_coreIndexJs","Mat4","Quat","Vec3","geometry","cclegacy","_lightJs","Light","LightType","nt2lm","_shadowsJs","PCFType","execute","_forward","_qt","_matView","_matProj","_matViewProj","_matViewProjInv","_export","SpotLight","_Light","_inheritsLoose","_this","call","_dir","_range","_spotAngle","Math","cos","PI","_angleAttenuationStrength","_pos","_aabb","_frustum","_angle","_needUpdate","_size","_luminanceHDR","_luminanceLDR","_shadowEnabled","_shadowPcf","HARD","_shadowBias","_shadowNormalBias","AABB","create","Frustum","_type","SPOT","_proto","prototype","initialize","size","luminanceHDR","luminanceLDR","range","set","update","_node","hasChangedFlags","getWorldPosition","transformQuat","getWorldRotation","normalize","x","y","z","getWorldRT","invert","perspective","multiply","_createClass","key","get","isHDR","director","root","pipeline","pipelineSceneData","value","val"],"sources":["../../../../../../../../../cocos/render-scene/scene/spot-light.ts"],"mappings":"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"}