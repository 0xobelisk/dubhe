{"version":3,"names":["_export","LegacyRenderMode","RenderType","setters","_virtualInternal253AconstantsJs","JSB","WEBGPU","_coreIndexJs","cclegacy","error","getError","sys","screen","Settings","settings","_baseDefineJs","DeviceInfo","SwapchainInfo","_baseDeviceJs","Device","_palSystemInfoEnumTypeIndexJs","BrowserType","execute","DeviceManager","initialized","_gfxDevice","_canvas","_swapchain","_renderType","UNKNOWN","_proto","prototype","init","canvas","bindingMappingInfo","renderMode","querySettings","Category","RENDERING","_determineRenderType","WEBGL","deviceInfo","globalThis","gfx","create","useWebGL2","WebGL2RenderingContext","userAgent","navigator","toLowerCase","browserType","UC","deviceCtors","push","WebGPUDevice","WebGL2Device","WebGLDevice","EmptyDevice","i","length","initialize","_initSwapchain","HEADLESS","oncontextmenu","swapchainInfo","windowSize","width","height","createSwapchain","AUTO","renderType","CANVAS","supportRender","Error","_createClass","key","get","deviceManager"],"sources":["../../../../../../../../cocos/gfx/device-manager.ts"],"mappings":"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"}