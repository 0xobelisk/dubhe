{"version":3,"names":["setters","_coreIndexJs","error","Vec3","_frameworkIndexJs","PhysicsSystem","_physxAdapterJs","getWrapShape","PX","_coreUtilsMiscJs","degreesToRadians","_sceneGraphIndexJs","TransformBit","execute","v3_0","v3_1","_export","PhysXCharacterController","_isEnabled","_impl","_comp","_pxCollisionFlags","_filterData","_queryFilterCB","_word3","_overlapRecovery","id","idCounter","word0","word1","word2","word3","_proto","prototype","onComponentSet","create","updateScale","initialize","comp","PxQueryFilterCallback","implement","queryCallback","group","mask","instance","collisionMatrix","onEnable","setDetectCollisions","setOverlapRecovery","physicsWorld","addCCT","onDisable","removeCCT","onDestroy","onLoad","release","$$","IMPL_PTR","ptr","shapePtr","getShape","getPosition","out","copy","setPosition","value","syncPhysicsToScene","setContactOffset","setStepOffset","setSlopeLimit","Math","cos","setCollision","setQuery","onGround","syncSceneToPhysics","node","characterController","hasChangedFlags","SCALE","syncScale","POSITION","add","worldPosition","scaledCenter","subtract","setWorldPosition","move","movement","minDist","elapsedTime","controllerManager","setOverlapRecoveryModule","filterData","queryFilterCB","setGroup","v","updateFilterData","getGroup","addGroup","removeGroup","setMask","getMask","addMask","removeMask","updateEventListener","setSimulationFilterData","_createClass","key","get","multiply","center","worldScale","preFilter","shape","_actor","_out","pxShape","QueryHitType","eNONE","collider","eBLOCK"],"sources":["../../../../../../../../../../cocos/physics/physx/character-controllers/physx-character-controller.ts"],"mappings":"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"}