{"version":3,"names":["Vec4","_coreIndexJs","_gfxIndexJs","ClearFlagBit","Format","_renderSceneSceneIndexJs","ShadowType","SKYBOX_FLAG","_customTypesJs","LightInfo","QueueHint","SceneFlags","_customDefineJs","getCameraUniqueID","_utilsPassContextJs","passContext","_basePassJs","BasePass","getRTFormatBeforeToneMapping","getShadowMapSampler","execute","_export","ForwardPass","_BasePass","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","name","outputNames","enableInAllEditorCamera","depthBufferShadingScale","_proto","prototype","calcDepthSlot","camera","depthSlotName","canUsePrevDepth","clearFlag","DEPTH_STENCIL","shadingScale","slotName","index","render","ppl","_camera$scene","COLOR","set","clearColor","clearDepthColor","clearDepth","clearStencil","slot0","slot1","cameraID","isOffScreen","updatePassViewPort","addRenderPass","addRasterView","version","pass","shadowPass","_iterator","_createForOfIteratorHelperLoose","mainLightShadows","_step","done","dirShadowName","value","containsResource","addTexture","_iterator2","spotLightShadows","_step2","spotShadowName","forwardQueue","addQueue","RENDER_OPAQUE","addSceneOfCamera","OPAQUE_OBJECT","CUTOUT_OBJECT","GEOMETRY","forwardAddQueue","RENDER_TRANSPARENT","addSceneLights","shadowInfo","pipelineSceneData","shadows","scene","mainLight","enabled","type","Planar","_camera$scene2","TRANSPARENT_OBJECT","SHADOW_CASTER","forwardPass"],"sources":["../../../../../../../../../../cocos/rendering/post-process/passes/forward-pass.ts"],"mappings":"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"}