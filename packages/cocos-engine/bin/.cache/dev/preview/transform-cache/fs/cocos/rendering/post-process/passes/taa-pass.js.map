{"version":3,"names":["EDITOR","_virtualInternal253AconstantsJs","_coreIndexJs","Mat4","Vec2","Vec4","_gameIndexJs","game","_gfxIndexJs","ClearFlagBit","Format","_renderSceneSceneIndexJs","CameraUsage","_customTypesJs","ResourceResidency","_customDefineJs","getCameraUniqueID","_componentsTaaJs","TAA","_componentsTaaMaskJs","TAAMask","_utilsPassContextJs","passContext","_basePassJs","disablePostProcessForDebugView","_settingPassJs","getSetting","SettingPass","_assetAssetManagerIndexJs","builtinResMgr","_renderSceneIndexJs","MaterialInstance","execute","tempVec4","halton8","forEach","v","x","y","SampleOffsets","x2","x3","x4","x5","_export","TAAPass","_SettingPass","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","name","effectName","outputNames","prevMatViewProj","taaTextureIndex","samples","sampleIndex","sampleOffset","forceRender","dirty","taaMaskMaterial","firstRender","_proto","prototype","checkEnable","camera","enable","cameraUsage","PREVIEW","slotName","index","lastPass","applyCameraJitter","_isProjDirty","update","matProj","m12","m13","invert","matProjInv","multiply","matViewProj","matView","matViewProjInv","frustum","updateSample","offset","ZERO","setting","sampleScale","canvas","width","height","render","ppl","cameraID","clearFlag","COLOR","set","clearColor","updatePassViewPort","passViewport","material","taaMask","node","getComponent","maskTex","enabledInHierarchy","mask","mi","parent","recompileShaders","USE_TAA_MASK","setProperty","black","get","feedback","input0","historyTexture","slot0","depthTex","depthSlotName","layoutName","addRenderPass","setPassInput","addRasterView","RGBA16F","PERSISTENT","blitScreen","version","_createClass","key"],"sources":["../../../../../../../../../../cocos/rendering/post-process/passes/taa-pass.ts"],"mappings":"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"}