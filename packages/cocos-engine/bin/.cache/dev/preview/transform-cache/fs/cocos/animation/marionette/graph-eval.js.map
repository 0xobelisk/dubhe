{"version":3,"names":["setters","_virtualInternal253AconstantsJs","DEBUG","_variableIndexJs","TriggerResetMode","createInstanceTag","VarInstanceTrigger","_coreIndexJs","assertIsTrue","_dSkeletalAnimationLimitsJs","MAX_ANIMATION_LAYER","_animationGraphContextJs","AnimationGraphBindingContext","AnimationGraphPoseLayoutMaintainer","defaultTransformsTag","LayoutChangeFlag","AuxiliaryCurveRegistry","AnimationGraphUpdateContextGenerator","AnimationGraphSettleContext","DeferredPoseStashAllocator","_poseGraphPoseNodeJs","PoseTransformSpaceRequirement","_poseGraphDefaultTopLevelPoseNodeJs","DefaultTopLevelPoseNode","execute","_export","AnimationGraphEval","graph","root","controller","clipOverrides","_currentTransitionCache","duration","time","_rootPoseNode","_varInstances","_hasAutoTrigger","_auxiliaryCurveRegistry","_poseLayoutMaintainer","_bindingContext","_settleContext","_rootUpdateContextGenerator","layers","length","Error","_iterator","_createForOfIteratorHelperLoose","variables","_step","done","_step$value","value","name","variable","varInstance","resetMode","NEXT_FRAME_OR_AFTER_CONSUMED","poseLayoutMaintainer","bindingContext","_setClipOverrides","undefined","settleContext","startBind","poseStashAllocator","_poseStashAllocator","_root","_initializeContexts","_proto","prototype","destroy","_evaluationContext","_destroyAfterException_debugging","stackSize","_stackSize_debugging","i","popPose","update","deltaTime","evaluationContext","rootUpdateContextGenerator","rootPoseNode","updateContext","generate","finalPose","evaluate","LOCAL","varInstances","varName","apply","allocatedPoseCount","getVariables","Object","entries","getCurrentStateStatus","layer","getLayerTopLevelStateMachineEvaluation","getCurrentClipStatuses","getCurrentTransition","currentTransition","isInTransition","getNextStateStatus","getNextClipStatuses","getValue","setValue","getLayerWeight","layerIndex","setLayerWeight","weight","overrideClips","overrides","_updateAfterPossiblePoseLayoutChange","getAuxiliaryCurveValue","curveName","get","endBind","_createOrUpdateTransformFilters","createEvaluationContext","fetchDefaultTransforms","resetPoseStashAllocator","layoutChangeFlags","TRANSFORM_COUNT","TRANSFORM_ORDER","evaluationContextRecreated","AUXILIARY_CURVE_COUNT","settle","_createClass","key","layerCount"],"sources":["../../../../../../../../../cocos/animation/marionette/graph-eval.ts"],"mappings":"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"}