{"version":3,"names":["setters","_baseDefineJs","BufferUsageBit","_webglCommandBufferJs","WebGLCommandBuffer","_webglCommandsJs","WebGLCmdFuncBeginRenderPass","WebGLCmdFuncBindStates","WebGLCmdFuncBlitTexture","WebGLCmdFuncCopyBuffersToTexture","WebGLCmdFuncDraw","WebGLCmdFuncExecuteCmds","WebGLCmdFuncUpdateBuffer","_webglDefineJs","WebGLDeviceManager","execute","_export","WebGLPrimaryCommandBuffer","_WebGLCommandBuffer","_inheritsLoose","apply","arguments","_proto","prototype","beginRenderPass","renderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","instance","gpuRenderPass","gpuFramebuffer","_isInRenderPass","draw","infoOrAssembler","_isStateInvalied","bindStates","info","drawInfo","_numDrawCalls","_numInstances","instanceCount","indexCount","vertexCount","_curGPUPipelineState","glPrimitive","_numTris","Math","max","console","error","setViewport","viewport","_WebGLDeviceManager$i","cache","stateCache","gl","left","top","width","height","setScissor","scissor","_WebGLDeviceManager$i2","scissorRect","x","y","updateBuffer","buffer","data","size","gpuBuffer","buffSize","undefined","usage","INDIRECT","byteLength","copyBuffersToTexture","buffers","texture","regions","gpuTexture","cmdBuffs","count","i","webGLCmdBuff","cmdPackage","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","_curDynamicStates","blitTexture","srcTexture","dstTexture","filter","gpuTextureSrc","gpuTextureDst"],"sources":["../../../../../../../../../cocos/gfx/webgl/webgl-primary-command-buffer.ts"],"mappings":"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"}