{"version":3,"names":["validateBlendParam","val","name","VariableTypeMismatchedError","_export","setters","_coreIndexJs","_decorator","editorExtrasTag","_motionJs","Motion","_createEvalJs","createEval","_errorsJs","_defineJs","CLASS_NAME_PREFIX_ANIM","_graphDebugJs","getMotionRuntimeID","RUNTIME_ID_ENABLED","_animationGraphEditorExtrasCloneHelperJs","cloneAnimationGraphEditorExtrasFrom","_corePoseJs","blendPoseInto","execute","ccclass","serializable","AnimationBlendItem","_dec","_class","_class2","motion","_initializer","_proto","prototype","clone","that","_copyTo","_this$motion$clone","_this$motion","_applyDecoratedInitializer","AnimationBlend","_dec2","_class4","_class5","_Motion","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","_initializer2","_proto2","copyTo","AnimationBlendEval","context","ignoreEmbeddedPlayers","base","children","inputs","_childEvaluators","map","child","_child$motion$createE","_child$motion","_weights","fill","_inputs","runtimeId","_proto3","createPort","AnimationBlendPort","childEval","_childEval$createPort","getChildWeight","childIndex","getChildMotionEval","getClipStatuses","baseWeight","weights","nChildren","iChild","currentChildIterator","next","result","done","value","undefined","__evaluatePort","port","progress","nChild","sumWeight","finalPose","_port$childPorts$iChi","childWeight","childOutput","childPorts","evaluate","t","popPose","pushDefaultedPose","overrideClips","_this$_childEvaluator","setInput","index","doEval","eval","_createClass","key","get","uniformDuration","_this$_childEvaluator2","_this$_childEvaluator3","duration","host","_host","_proto4","reenter","nChildPorts","_childPorts$iChild"],"sources":["../../../../../../../../../../cocos/animation/marionette/motion/animation-blend.ts"],"mappings":"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"}