{"version":3,"names":["EDITOR","_virtualInternal253AconstantsJs","_coreDataDecoratorsIndexJs","ccclass","editable","range","serializable","type","visible","_defineJs","CLASS_NAME_PREFIX_ANIM","_poseNodeJs","PoseTransformSpaceRequirement","_decoratorInputJs","input","_coreIndexJs","approx","ccenum","error","Quat","Vec3","_decoratorNodeJs","poseGraphNodeAppearance","poseGraphNodeCategory","_menuCommonJs","POSE_GRAPH_NODE_MENU_PREFIX_POSE","_intensitySpecificationJs","IntensitySpecification","_modifyPoseBaseJs","PoseNodeModifyPoseBase","_foundationTypeSystemJs","PoseGraphType","_transformSpaceJs","TransformSpace","_coreTransformJs","Transform","execute","TransformOperation","_export","APPLY_INTENSITY_EPSILON","cacheTransform","PoseNodeApplyTransform","_dec","_dec2","_dec3","themeColor","_dec4","_dec5","VEC3","_dec6","positionOperation","LEAVE_UNCHANGED","_dec7","_dec8","QUAT","_dec9","rotationOperation","_dec10","_dec11","_dec12","FLOAT","_class","_class2","_PoseNodeModifyPoseBa","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","node","_initializer","_initializer2","_initializerDefineProperty","_descriptor","_assertThisInitialized","_initializer3","_descriptor2","intensity","_initializer4","transformSpace","_initializer5","_transformHandle","_proto","prototype","bind","context","nodeName","transformHandle","bindTransformByName","getPoseTransformSpaceRequirement","NO","modifyPose","inputPose","modificationQueue","evaluate","fullIntensity","transformIndex","index","nodeTransform","transforms","getTransform","rotation","rotationSpace","_convertPoseSpaceTransformToTargetSpace","REPLACE","replaceRotation","ADD","addRotation","_convertTransformToPoseTransformSpace","position","positionSpace","replacePosition","addPosition","push","_createClass","key","get","value","set","_applyDecoratedInitializer","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer","WORLD","Object","getOwnPropertyDescriptor","_ref","cacheInput","cacheResult","replace","add","transform","inputPosition","copy","lerp","result","slerp","ZERO","_ref2","inputRotation","resultRotation","IDENTITY","multiply","getTitle","undefined"],"sources":["../../../../../../../../../../../cocos/animation/marionette/pose-graph/pose-nodes/apply-transform.ts"],"mappings":"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"}