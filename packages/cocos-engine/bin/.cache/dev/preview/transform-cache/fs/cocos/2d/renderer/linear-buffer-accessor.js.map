{"version":3,"names":["setters","_meshBufferJs","MeshBuffer","_bufferAccessorJs","BufferAccessor","_coreIndexJs","assertID","macro","assertIsNonNullable","execute","_export","LinearBufferAccessor","_BufferAccessor","_inheritsLoose","device","attributes","_this","call","byteStart","indexStart","vertexStart","_currentId","_allocateBuffer","_proto","prototype","destroy","i","_buffers","length","reset","buf","byteOffset","indexOffset","vertexOffset","request","vertexCount","indexCount","_allocateChunk","vertexFormatBytes","setDirty","appendBuffers","vertices","indices","_floatsPerVertex","vData","set","iData","vertexId","byteLength","recordBatch","vCount","ia","requireFreeIA","_device","firstIndex","uploadBuffers","switchedBuffer","indicesLength","success","checkCapacity","id","l","buffer","Math","floor","BATCHER2D_MEM_INCREMENT","_vertexFormatBytes","iCount","IB_SCALE","initialize","_attributes","push","_createClass","key","get"],"sources":["../../../../../../../../../cocos/2d/renderer/linear-buffer-accessor.ts"],"mappings":"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"}