{"version":3,"names":["setters","_virtualInternal253AconstantsJs","EDITOR_NOT_IN_PREVIEW","_coreIndexJs","System","Vec2","Eventify","Enum","Settings","settings","cclegacy","_physicsSelectorJs","createPhysicsWorld","selector","_physicsFrameworkCollisionMatrixJs","CollisionMatrix","_physicsTypesJs","ERaycast2DType","PHYSICS_2D_PTM_RATIO","PhysicsGroup","_gameIndexJs","director","Director","execute","instance","internal","PhysicsGroup2D","_export","PhysicsSystem2D","_Eventify","_inheritsLoose","_settings$querySettin","_settings$querySettin2","_settings$querySettin3","_settings$querySettin4","_this","call","velocityIterations","positionIterations","collisionMatrix","_enable","_allowSleep","_maxSubSteps","_fixedTimeStep","_autoSimulation","_accumulator","_steping","_gravity","_delayEvents","gravity","querySettings","Category","PHYSICS","copy","multiplyScalar","i","bit","parseInt","value","collisionGroups","cg","Array","forEach","v","name","index","update","mutableSelector","physicsWorld","allowSleep","_proto","prototype","postUpdate","deltaTime","emit","EVENT_BEFORE_PHYSICS","syncSceneToPhysics","fixedTimeStep","substepIndex","step","events","l","length","event","func","target","syncPhysicsToScene","debugDrawFlags","drawDebug","EVENT_AFTER_PHYSICS","_callAfterStep","push","resetAccumulator","time","raycast","p1","p2","type","mask","Closest","testPoint","p","testAABB","rect","constructAndRegister","registerSystem","ID","Priority","LOW","_createClass","key","get","set","setAllowSleep","setGravity","x","y","id","once","EVENT_INIT"],"sources":["../../../../../../../../../cocos/physics-2d/framework/physics-system.ts"],"mappings":"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"}