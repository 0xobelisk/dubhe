{"version":3,"names":["setters","_virtualInternal253AconstantsJs","EDITOR_NOT_IN_PREVIEW","TEST","_coreIndexJs","CCObject","Vec3","Color","js","_shapesBoxShape2dJs","BuiltinBoxShape","_shapesCircleShape2dJs","BuiltinCircleShape","_shapesPolygonShape2dJs","BuiltinPolygonShape","_frameworkPhysicsTypesJs","EPhysics2DDrawFlags","Contact2DType","_frameworkIndexJs","PhysicsSystem2D","_builtinContactJs","BuiltinContact","_sceneGraphIndexJs","Node","find","_gameIndexJs","director","execute","contactResults","testIntersectResults","_export","BuiltinPhysicsWorld","_contacts","_shapes","_debugGraphics","_debugDrawFlags","_proto","prototype","shouldCollide","c1","c2","collider1","collider","collider2","collisionMatrix","instance","node","group","addShape","shape","shapes","index","indexOf","i","l","length","other","contact","push","removeShape","array","fastRemoveAt","contacts","shape1","shape2","touching","_emitCollide","END_CONTACT","contactIndex","updateShapeGroup","enabledInHierarchy","step","deltaTime","velocityIterations","positionIterations","update","collisionType","updateState","None","result","drawDebug","_checkDebugDrawValid","debugDrawer","clear","lineWidth","strokeColor","WHITE","ps","worldPoints","moveTo","x","y","j","lineTo","close","stroke","circle","worldPosition","worldRadius","Aabb","aabb","worldAABB","BLUE","xMin","yMin","yMax","xMax","type","emit","isValid","canvas","scene","getScene","addComponent","parent","hideFlags","Flags","DontSave","ZERO","setSiblingIndex","children","testPoint","p","containsPoint","testAABB","rect","intersectsRect","impl","setGravity","setAllowSleep","syncPhysicsToScene","syncSceneToPhysics","raycast","p1","p2","_createClass","key","get","set","v"],"sources":["../../../../../../../../../cocos/physics-2d/builtin/builtin-world.ts"],"mappings":"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"}