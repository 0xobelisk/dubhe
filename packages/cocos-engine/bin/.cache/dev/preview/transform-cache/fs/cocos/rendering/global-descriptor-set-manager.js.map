{"version":3,"names":["setters","_gfxIndexJs","BufferUsageBit","MemoryUsageBit","BufferInfo","Filter","Address","DescriptorSetInfo","DescriptorSetLayoutInfo","SamplerInfo","_customDefineJs","getDescBindingFromName","getDescriptorSetDataFromLayout","_defineJs","UBOShadow","globalDescriptorSetLayout","PipelineGlobalBindings","isEnableEffect","execute","_samplerLinearInfo","LINEAR","NONE","CLAMP","_samplerPointInfo","POINT","_export","GlobalDSManager","device","_device","_descriptorSetMap","Map","_globalDescriptorSet","_descriptorSetLayout","_linearSampler","_pointSampler","getSampler","layoutInfo","bindings","createDescriptorSetLayout","createDescriptorSet","_proto","prototype","regenLayout","bindBuffer","binding","buffer","it","values","res","next","done","descriptorSet","value","bindSampler","sampler","bindTexture","texture","update","getOrCreateDescriptorSet","light","has","globalDescriptorSet","descriptorSetLayout","set","i","UBO_GLOBAL","COUNT","getBuffer","getTexture","shadowUBO","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","SIZE","BINDING","get","destroy","_createClass","key","val"],"sources":["../../../../../../../../cocos/rendering/global-descriptor-set-manager.ts"],"mappings":"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"}