{"version":3,"names":["sampleAnimationCurve","curve","sampler","ratio","index","sample","ratios","length","valueBetween","valueAt","computeRatioByType","type","func","easing","errorID","Array","isArray","bezierByTime","quickFindIndex","start","end","eachLength","floorIndex","EPSILON","_export","setters","_coreIndexJs","lerp","Quat","cclegacy","binarySearchEpsilon","ValueType","_typesJs","isLerpable","execute","RatioSampler","_findRatio","currRatioDif","lastRatioDif","canOptimize","i","l","Math","abs","_proto","prototype","AnimCurve","Bezier","controlPoints","propertyCurveData","duration","types","undefined","_values","_lerp","_duration","_array","values","getCurveType","easingMethod","Linear","easingMethods","map","fill","_i","_Object$keys","Object","keys","firstValue","interpolate","selectLerpFx","_arrayLength","_proto2","hasLerp","value","getNoLerp","from","fromRatio","to","toRatio","dRatio","ratioBetweenFrames","fromVal","toVal","empty","constant","EventInfo","events","_proto3","add","params","push","makeValueTypeLerpFx","constructor","tempValue","callLerpable","t","dt","makeQuatSlerpFx","slerp","Number"],"sources":["../../../../../../../../cocos/animation/animation-curve.ts"],"mappings":"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"}