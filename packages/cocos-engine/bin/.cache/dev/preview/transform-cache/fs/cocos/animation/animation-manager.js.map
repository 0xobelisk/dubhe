{"version":3,"names":["ccclass","_coreDataDecoratorsIndexJs","_coreIndexJs","System","errorID","cclegacy","js","_gameDirectorJs","director","Director","_dSkeletalAnimationSkeletalAnimationBlendingJs","LegacyBlendStateBuffer","_skeletalAnimationUtilsJs","deleteTransform","getTransform","getWorldMatrix","execute","_export","AnimationManager","_class","_class2","_System","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","_anims","array","MutableForwardIterator","_crossFades","_delayEvents","_blendStateBuffer","_sockets","_proto","prototype","addCrossFade","crossFade","index","indexOf","push","removeCrossFade","fastRemoveAt","update","dt","crossFadesIter","crossFades","i","iterator","anim","isMotionless","stamp","getTotalFrames","l","_sockets$i","target","transform","matrix","event","fn","thisArg","destruct","addAnimation","removeAnimation","pushDelayEvent","addSockets","root","sockets","_this2","_loop","socket","find","s","targetNode","getChildByPath","path","removeSockets","socketToRemove","j","node","_createClass","key","get","ID","on","EVENT_INIT","animationManager","registerSystem","Priority","HIGH"],"sources":["../../../../../../../../cocos/animation/animation-manager.ts"],"mappings":"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"}