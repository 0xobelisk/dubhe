{"version":3,"names":["PhysicsSystem2D","instance","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","_export","setters","_virtualInternal253AconstantsJs","EDITOR_NOT_IN_PREVIEW","_coreIndexJs","System","Vec2","Eventify","Enum","Settings","settings","cclegacy","_physicsSelectorJs","createPhysicsWorld","selector","_physicsFrameworkCollisionMatrixJs","CollisionMatrix","_physicsTypesJs","ERaycast2DType","PHYSICS_2D_PTM_RATIO","PhysicsGroup","_gameIndexJs","director","Director","execute","internal","PhysicsGroup2D","enable","_enable","allowSleep","_allowSleep","v","physicsWorld","setAllowSleep","gravity","_gravity","set","setGravity","x","y","maxSubSteps","_maxSubSteps","fixedTimeStep","_fixedTimeStep","autoSimulation","_autoSimulation","debugDrawFlags","PHYSICS_NONE","id","PHYSICS_BUILTIN","PHYSICS_BOX2D","PHYSICS_BOX2D_WASM","stepping","_steping","constructor","_settings$querySettin","_settings$querySettin2","_settings$querySettin3","_settings$querySettin4","velocityIterations","positionIterations","collisionMatrix","_accumulator","_delayEvents","querySettings","Category","PHYSICS","copy","multiplyScalar","i","bit","parseInt","collisionGroups","cg","Array","forEach","name","index","update","mutableSelector","postUpdate","deltaTime","emit","EVENT_BEFORE_PHYSICS","syncSceneToPhysics","substepIndex","step","events","l","length","event","func","target","syncPhysicsToScene","drawDebug","EVENT_AFTER_PHYSICS","_callAfterStep","push","resetAccumulator","time","raycast","p1","p2","type","Closest","mask","testPoint","p","testAABB","rect","constructAndRegister","registerSystem","ID","Priority","LOW","once","EVENT_INIT"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/physics-2d/framework/physics-system.ts"],"mappings":"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"}