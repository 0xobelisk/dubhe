{"version":3,"names":["InstancedBuffer","INITIAL_CAPACITY","MAX_CAPACITY","_export","setters","_defineJs","UNIFORM_LIGHTMAP_TEXTURE_BINDING","UNIFORM_REFLECTION_PROBE_BLEND_CUBEMAP_BINDING","UNIFORM_REFLECTION_PROBE_CUBEMAP_BINDING","UNIFORM_REFLECTION_PROBE_TEXTURE_BINDING","_gfxIndexJs","BufferUsageBit","MemoryUsageBit","InputAssemblerInfo","Attribute","BufferInfo","execute","constructor","pass","instances","hasPendingModels","dynamicOffsets","_device","device","destroy","i","length","instance","vb","ia","merge","subModel","passIdx","shaderImplant","attrs","instancedAttributeBlock","stride","buffer","sourceIA","inputAssembler","lightingMap","descriptorSet","getTexture","reflectionProbeCubemap","reflectionProbePlanarMap","reflectionProbeBlendCubemap","useReflectionProbeType","shader","shaders","_instance$ia$indexBuf","_sourceIA$indexBuffer","indexBuffer","objectID","count","capacity","newSize","oldData","data","Uint8Array","set","resize","createBuffer","VERTEX","TRANSFER_DST","HOST","DEVICE","vertexBuffers","slice","attributes","attr","newAttr","name","format","isNormalized","push","iaInfo","createInputAssembler","uploadBuffers","cmdBuff","instanceCount","updateBuffer","clear"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/rendering/instanced-buffer.ts"],"mappings":"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"}