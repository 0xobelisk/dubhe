{"version":3,"names":["InstantiatedPoseGraph","DependencyEvaluation","RuntimePVNodeEvaluation","RuntimePVNodePlainPropertyBinding","RuntimePVNodeArrayElementPropertyBinding","isEvaluatableNode","node","PoseNode","PureValueNode","instantiatePoseGraph","graph","linkContext","mayCountMotionTime","outputNode","outputNodeShell","getShell","assertIsTrue","bindings","getBindings","length","undefined","binding","outputIndex","producer","instantiationMap","Map","mainRecord","instantiateNode","Array","from","values","filter","PoseNodePlayMotion","shell","existing","get","instantiated","instantiate","__callOnAfterDeserializeRecursive","link","consumerNode","runtimePVNodePropertyBindings","producerNode","producerOutputIndex","inputPath","consumerInputPath","warn","linkPoseNode","runtimePVNodePropertyBinding","linkPVNode","push","dependencyEvaluation","evaluation","_setDependencyEvaluation","pureValueNodeEvaluation","set","consumerPropertyKey","consumerElementIndex","toString","consumerProperty","isArray","producerRecord","_export","setters","_virtualInternal253AconstantsJs","DEBUG","_coreIndexJs","_serializationIndexJs","_poseNodeJs","PoseTransformSpaceRequirement","_pureValueNodeJs","_poseNodesPlayMotionJs","execute","constructor","_rootPoseNode","_countingPlayMotionNodes","bind","context","_this$_rootPoseNode","settle","_this$_rootPoseNode2","reenter","_this$_rootPoseNode3","update","_this$_rootPoseNode4","evaluate","_this$_rootPoseNode$e","_this$_rootPoseNode5","LOCAL","countMotionTime","playMotionNodes","maxWeightedTime","maxWeight","Number","NEGATIVE_INFINITY","iPlayMotionNode","elapsedMotionTime","lastIndicativeWeight","bindingEvaluations","_bindingEvaluations","_node","_dependency","_outputs","outputCount","getDefaultOutput","getOutput","dependency","selfEvaluate","_consumerNode","_consumerPropertyKey","_producerRecord","_producerOutputIndex","_consumerElementIndex"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/animation/marionette/pose-graph/instantiation.ts"],"mappings":"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"}