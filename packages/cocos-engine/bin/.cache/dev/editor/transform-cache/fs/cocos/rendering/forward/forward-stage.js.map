{"version":3,"names":["ccclass","_coreDataDecoratorsIndexJs","displayOrder","type","serializable","_defineJs","SetIndex","_passPhaseJs","getPhaseID","_renderQueueJs","renderQueueClearFunc","convertRenderQueue","renderQueueSortFunc","_gfxIndexJs","ClearFlagBit","Color","Rect","_renderInstancedQueueJs","RenderInstancedQueue","_renderStageJs","RenderStage","_enumJs","ForwardStagePriority","_renderAdditiveLightQueueJs","RenderAdditiveLightQueue","_renderSceneCorePassJs","BatchingSchemes","_pipelineSerializationJs","RenderQueueDesc","RenderQueueSortMode","_planarShadowQueueJs","PlanarShadowQueue","_uiPhaseJs","UIPhase","_pipelineFuncsJs","renderProfiler","execute","colors","_export","ForwardStage","_dec","_dec2","_dec3","_class","_class2","_class3","constructor","renderQueues","_initializer","_renderQueues","_renderArea","_instancedQueue","_phaseID","_clearFlag","additiveInstanceQueues","_uiPhase","addRenderInstancedQueue","queue","includes","push","removeRenderInstancedQueue","index","indexOf","splice","initialize","info","activate","pipeline","flow","i","length","_additiveLightQueue","_pipeline","_planarQueue","destroy","render","camera","_camera$geometryRende","clear","device","forEach","renderObjects","pipelineSceneData","m","p","k","ro","subModels","model","subModel","passes","pass","phase","batchingScheme","INSTANCING","instancedBuffer","getInstancedBuffer","merge","add","insertRenderPass","sort","cmdBuff","commandBuffers","pipelineUBO","updateShadowUBO","uploadBuffers","gatherLightPasses","gatherShadowPasses","clearFlag","COLOR","x","clearColor","y","z","w","generateRenderArea","framebuffer","window","renderPass","getRenderPass","beginRenderPass","clearDepth","clearStencil","bindDescriptorSet","GLOBAL","descriptorSet","recordCommandBuffer","geometryRenderer","profiler","endRenderPass","initInfo","name","priority","FORWARD","tag","isTransparent","sortMode","FRONT_TO_BACK","stages","BACK_TO_FRONT","_applyDecoratedInitializer","prototype"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/rendering/forward/forward-stage.ts"],"mappings":"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"}