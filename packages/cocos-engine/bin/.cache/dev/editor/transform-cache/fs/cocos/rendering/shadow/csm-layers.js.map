{"version":3,"names":["ShadowLayerVolume","CSMShadowLayer","CSMLayers","_mat4Trans","_matShadowTrans","_matShadowView","_matShadowProj","_matShadowViewProj","_matShadowViewProjArbitaryPos","_matShadowViewProjArbitaryPosInv","_focus","_projPos","_texelSize","_projSnap","_snap","_maxVec3","_minVec3","_shadowPos","_maxLayerPosz","_maxLayerFarPlane","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","_export","setters","_renderSceneSceneShadowsJs","CSMLevel","CSMOptimizationMode","_coreMathIndexJs","Mat4","Vec3","Vec2","Vec4","_coreGeometryIndexJs","Frustum","AABB","_coreMemopCachedArrayJs","CachedArray","_coreIndexJs","cclegacy","execute","constructor","level","_shadowObjects","_shadowCameraFar","_level","_validFrustum","_splitFrustum","_lightViewFrustum","_castLightViewBoundingBox","accurate","shadowObjects","shadowCameraFar","val","matShadowView","matShadowProj","matShadowViewProj","validFrustum","splitFrustum","lightViewFrustum","castLightViewBoundingBox","copyToValidFrustum","copy","calculateValidFrustumOrtho","width","height","near","far","transform","createOrtho","calculateSplitFrustum","camera","m","start","end","split","aspect","fov","destroy","length","createMatrix","dirLight","shadowMapWidth","onlyForCulling","device","director","root","invisibleOcclusionRange","shadowInvisibleOcclusionRange","fromRT","node","rotation","invert","shadowViewArbitaryPos","clone","fromPoints","mergeFrustum","orthoSizeWidth","orthoSizeHeight","csmOptimizationMode","DisableRotationFix","halfExtents","x","y","distance","vertices","csmLevel","pipeline","pipelineSceneData","csmSupported","RemoveDuplicates","z","center","alignFarPlaneDist","Math","abs","max","r","set","transformMat4","halfOrthoSizeWidth","halfOrthoSizeHeight","ortho","capabilities","clipSpaceMinZ","clipSpaceSignY","multiply","invActualSize","modX","modY","_splitCameraNear","_splitCameraFar","_csmAtlas","_calculateAtlas","splitCameraNear","splitCameraFar","csmAtlas","floor","castShadowObjects","_castShadowObjects","layerObjects","_layerObjects","layers","_layers","specialLayer","_specialLayer","_levelCount","_shadowDistance","i","LEVEL_4","update","sceneData","scene","mainLight","shadowInfo","shadows","levelCount","shadowDistance","enabled","shadowEnabled","shadowFixedArea","_updateFixedArea","csmNeedUpdate","_splitFrustumLevels","_calculateCSM","shadowOrthoSize","shadowNear","shadowFar","getWorldRotation","getWorldPosition","nd","fd","ratio","lambda","csmLayerLambda","si","preNear","nextFar","size","_getCameraWorldMatrix","csmLayer","LEVEL_1","out","cameraNode","position"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/rendering/shadow/csm-layers.ts"],"mappings":"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"}