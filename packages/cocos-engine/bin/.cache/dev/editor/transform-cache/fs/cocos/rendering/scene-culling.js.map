{"version":3,"names":["getRenderObject","model","camera","depth","node","Vec3","subtract","_tempVec3","worldBounds","center","worldPosition","position","dot","forward","ro","roPool","alloc","validPunctualLightsCulling","pipeline","sceneData","pipelineSceneData","validPunctualLights","length","spotLights","scene","i","light","baked","globals","disableLightmap","geometry","Sphere","set","_sphere","x","y","z","range","intersect","sphereFrustum","frustum","push","sphereLights","pointLights","rangedDirLights","AABB","transform","_tmpBoundingBox","_rangedDirLightBoundingBox","getWorldMatrix","aabbFrustum","shadowCulling","layer","mainLight","csmLayers","csmLayerObjects","layerObjects","dirLightFrustum","validFrustum","dirShadowObjects","shadowObjects","visibility","obj","array","fastRemove","enabled","visFlags","castShadow","accurate","level","csmLevel","csmOptimizationMode","CSMOptimizationMode","RemoveDuplicates","aabbFrustumCompletelyInside","sceneCulling","shadows","skybox","renderObjects","freeArray","castShadowObjects","clear","pipelineUBO","updateShadowUBORange","UBOShadow","SHADOW_COLOR_OFFSET","shadowColor","type","ShadowType","ShadowMap","update","clearFlag","SKYBOX_FLAG","cameraUsage","CameraUsage","EDITOR","SCENE_VIEW","cclegacy","warnID","name","models","enqueueRenderObject","isCulledByLod","_export","setters","_renderSceneSceneCameraJs","_coreIndexJs","Pool","_defineJs","_renderSceneSceneShadowsJs","_coreGeometryIndexJs","execute","create"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/rendering/scene-culling.ts"],"mappings":"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"}