{"version":3,"names":["BatchingUtility","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","checkMaterialisSame","comp1","comp2","matNum","sharedMaterials","length","i","getRenderMaterial","_export","setters","_frameworkMeshRendererJs","MeshRenderer","_assetsMeshJs","Mesh","_coreIndexJs","Mat4","execute","batchStaticModel","staticModelRoot","batchedRoot","models","getComponentsInChildren","console","error","mesh","validateMergingMesh","node","name","batchedMesh","worldMat","rootWorldMatInv","getWorldMatrix","invert","comp","multiply","merge","enabled","batchedModel","addComponent","unbatchStaticModel","getComponent","destroyRenderingMesh","destroy"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/3d/misc/batch-utils.ts"],"mappings":"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"}