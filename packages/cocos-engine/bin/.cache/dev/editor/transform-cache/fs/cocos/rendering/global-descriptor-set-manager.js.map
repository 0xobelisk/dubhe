{"version":3,"names":["GlobalDSManager","_samplerLinearInfo","_samplerPointInfo","_export","setters","_gfxIndexJs","BufferUsageBit","MemoryUsageBit","BufferInfo","Filter","Address","DescriptorSetInfo","DescriptorSetLayoutInfo","SamplerInfo","_customDefineJs","getDescBindingFromName","getDescriptorSetDataFromLayout","_defineJs","UBOShadow","globalDescriptorSetLayout","PipelineGlobalBindings","isEnableEffect","execute","LINEAR","NONE","CLAMP","POINT","descriptorSetMap","_descriptorSetMap","linearSampler","_linearSampler","pointSampler","_pointSampler","descriptorSetLayout","_descriptorSetLayout","globalDescriptorSet","val","_globalDescriptorSet","constructor","device","_device","Map","getSampler","layoutInfo","bindings","createDescriptorSetLayout","createDescriptorSet","regenLayout","bindBuffer","binding","buffer","it","values","res","next","done","descriptorSet","value","bindSampler","sampler","bindTexture","texture","update","getOrCreateDescriptorSet","light","has","set","i","UBO_GLOBAL","COUNT","getBuffer","getTexture","shadowUBO","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","SIZE","BINDING","get","destroy"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/rendering/global-descriptor-set-manager.ts"],"mappings":"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"}