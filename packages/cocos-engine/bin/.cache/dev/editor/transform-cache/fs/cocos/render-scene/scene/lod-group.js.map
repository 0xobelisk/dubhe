{"version":3,"names":["LODData","LODGroup","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","_export","setters","_coreIndexJs","Vec3","assertIsTrue","_gfxIndexJs","deviceManager","_cameraJs","CameraProjection","execute","constructor","screenUsagePercentage","_models","models","addModel","model","splice","eraseModel","removeIndex","indexOf","clearModels","length","scene","node","_device","enabled","_localBoundaryCenter","_objectSize","_lodDataArray","_lockedLODLevelVec","_isLockLevelChanged","gfxDevice","localBoundaryCenter","val","set","clone","lodCount","objectSize","lodDataArray","attachToScene","detachFromScene","lockLODLevels","lockLev","size","index","slice","isLockLevelChanged","resetLockChangeFlag","getLockedLODLevels","clearLODs","insertLOD","lod","updateLOD","eraseLOD","getVisibleLODLevel","camera","getScreenUsagePercentage","lodIndex","i","distance","projectionType","PERSPECTIVE","len","transformMat4","worldMatrix","subtract","worldPosition","distanceToScreenUsagePercentage","getWorldSpaceSize","matProj","m05","scale","maxScale","Math","max","abs","x","y","z"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/render-scene/scene/lod-group.ts"],"mappings":"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"}