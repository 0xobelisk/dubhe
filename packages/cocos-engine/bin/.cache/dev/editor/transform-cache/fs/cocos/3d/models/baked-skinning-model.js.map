{"version":3,"names":["BakedSkinningModel","myPatches","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","_export","setters","_coreIndexJs","cclegacy","_gfxIndexJs","BufferUsageBit","MemoryUsageBit","BufferInfo","_renderingDefineJs","INST_JOINT_ANIM_INFO","UBOSkinningAnimation","UBOSkinningTexture","UNIFORM_JOINT_TEXTURE_BINDING","_renderSceneSceneModelJs","ModelType","_morphModelJs","MorphModel","_miscJointTextureSamplerInfoJs","jointTextureSamplerInfo","execute","name","constructor","uploadedAnim","_jointsMedium","_skeleton","_mesh","_dataPoolManager","_instAnimInfoIdx","type","BAKED_SKINNING","director","root","dataPoolManager","jointTextureInfo","Float32Array","animInfo","jointAnimationInfo","getData","buffer","texture","boundsInfo","destroy","_applyJointTexture","bindSkeleton","skeleton","skinningRoot","mesh","transform","resMgr","uuid","_device","createBuffer","UNIFORM","TRANSFER_DST","DEVICE","SIZE","updateTransform","stamp","skelBound","data","worldBounds","_worldBounds","node","_mat","_pos","_rot","_scale","updateUBOs","info","hasNonInstancingPass","idx","i","_subModels","length","subModel","view","instancedAttributeBlock","views","dirty","update","getMacroPatches","subModelIndex","patches","concat","uploadAnimation","anim","jointTexturePool","getSequencePoseTexture","bounds","get","hash","_modelBounds","getDefaultPoseTexture","oldTex","releaseHandle","handle","width","joints","pixelOffset","updateInstancedJointTextureInfo","tex","descriptorSet","bindTexture","_updateLocalDescriptors","submodelIdx","bindBuffer","BINDING","sampler","getSampler","bindSampler","_updateInstancedAttributes","attributes","getInstancedAttributeIndex"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/3d/models/baked-skinning-model.ts"],"mappings":"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"}