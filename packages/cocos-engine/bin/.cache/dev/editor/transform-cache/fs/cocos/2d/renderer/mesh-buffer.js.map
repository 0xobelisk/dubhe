{"version":3,"names":["MeshBuffer","MeshBufferSharedBufferView","IA_POOL_USED_SCALE","_export","setters","_virtualInternal253AconstantsJs","JSB","_gfxIndexJs","BufferUsageBit","MemoryUsageBit","BufferInfo","InputAssemblerInfo","_vertexFormatJs","getAttributeStride","_coreIndexJs","sys","getError","warnID","assertIsTrue","_native2dJs","NativeUIMeshBuffer","execute","attributes","_attributes","vertexFormatBytes","_vertexFormatBytes","byteOffset","_byteOffset","val","_sharedBuffer","vertexOffset","_vertexOffset","indexOffset","_indexOffset","dirty","_dirty","floatsPerVertex","_floatsPerVertex","vData","_vData","_nativeObj","iData","_iData","nativeObj","sharedBuffer","initSharedBuffer","Uint32Array","count","syncSharedBufferToNative","constructor","_initVDataCount","_initIDataCount","_iaPool","_iaInfo","_nextFreeIAHandle","initialize","device","attrs","vFloatCount","iCount","Float32Array","Uint16Array","push","createNewIA","reset","destroy","i","length","iaRef","vertexBuffers","indexBuffer","ia","setDirty","request","vertexCount","indexCount","requireFreeIA","recycleIA","pool","checkCapacity","maxVertex","maxIndex","uploadBuffers","iOS14","__isWebIOS14OrIPadOS14Env","submitCount","byteCount","verticesData","buffer","indicesData","vertexBuffer","size","resize","update","vbStride","BYTES_PER_ELEMENT","ibStride","createBuffer","VERTEX","TRANSFER_DST","HOST","DEVICE","INDEX","createInputAssembler"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/2d/renderer/mesh-buffer.ts"],"mappings":"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"}