{"version":3,"names":["BulletCharacterController","v3_0","v3_1","v3_2","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","_export","setters","_coreIndexJs","error","Vec3","_frameworkIndexJs","PhysicsSystem","_bulletCacheJs","BulletCache","_bulletUtilsJs","bullet2CocosVec3","cocos2BulletVec3","_instantiatedJs","bt","btCache","EBulletType","_frameworkPhysicsEnumJs","PhysicsGroup","_shapesBulletShapeJs","BulletShape","_coreUtilsMiscJs","degreesToRadians","_sceneGraphIndexJs","TransformBit","execute","isEnabled","_isEnabled","impl","_impl","characterController","_comp","constructor","wrappedWorld","_btCollisionFlags","_word3","_dirty","_collisionFilterGroup","DEFAULT","_collisionFilterMask","id","idCounter","instance","physicsWorld","onComponentSet","updateScale","initialize","comp","group","mask","collisionMatrix","setWrapper","CCT_CACHE_NAME","cctCollisionShapeImpl","CharacterController_getCollisionShape","onEnable","setDetectCollisions","setOverlapRecovery","addCCT","onDisable","removeCCT","onDestroy","_safe_delete","EBulletTypeCharacterController","delWrapper","onLoad","getPosition","out","CharacterController_getPosition","setPosition","syncPhysicsToScene","setContactOffset","CharacterController_setContactOffset","setStepOffset","CharacterController_setStepOffset","setSlopeLimit","CharacterController_setSlopeLimit","CharacterController_setCollision","CharacterController_setOverlapRecovery","onGround","syncSceneToPhysics","node","hasChangedFlags","SCALE","syncScale","POSITION","add","worldPosition","scaledCenter","subtract","setWorldPosition","multiply","center","worldScale","move","movement","minDist","elapsedTime","movementBT","BT_V3_0","Vec3_set","x","y","z","CharacterController_move","setGroup","v","getGroup","addGroup","removeGroup","setMask","getMask","addMask","removeMask","updateEventListener","updateNeedEmitCCTEvents","needCollisionEvent","updateDirty","onShapeHitExt","hit","shapePtr","ControllerShapeHit_getHitShape","bulletWorld","item","cctShapeEventDic","get","worldPos","ControllerHit_getHitWorldPos","worldNormal","ControllerHit_getHitWorldNormal","motionDir","ControllerHit_getHitMotionDir","motionLength","ControllerHit_getHitMotionLength","s","getWrapper","TYPE","set"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/physics/bullet/character-controllers/bullet-character-controller.ts"],"mappings":"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"}