{"version":3,"names":["ccclass","_coreDataDecoratorsIndexJs","displayOrder","type","serializable","_defineJs","SetIndex","UBOLocal","_gfxIndexJs","Color","Rect","ClearFlagBit","DescriptorSetInfo","BufferInfo","BufferUsageBit","MemoryUsageBit","_renderStageJs","RenderStage","_enumJs","CommonStagePriority","_assetAssetsMaterialJs","Material","_pipelineStateManagerJs","PipelineStateManager","_pipelineSerializationJs","RenderQueueDesc","_pipelineFuncsJs","renderProfiler","_uiPhaseJs","UIPhase","execute","colors","_export","PostProcessStage","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_class3","constructor","_postProcessMaterial","_initializer","renderQueues","_initializer2","_renderArea","_stageDesc","_localUBO","_uiPhase","initialize","info","activate","pipeline","flow","pipelineSceneData","postprocessMaterial","destroy","render","camera","_pipeline","device","sceneData","cmdBuff","commandBuffers","pipelineUBO","updateCameraUBO","vp","viewport","x","window","width","y","height","renderData","getPipelineRenderData","framebuffer","renderPass","getRenderPass","clearFlag","COLOR","clearColor","z","w","beginRenderPass","clearDepth","clearStencil","bindDescriptorSet","GLOBAL","descriptorSet","builtinPostProcess","pass","passes","shader","getShaderVariant","bloomEnabled","bindTexture","bloom","combineTex","outputRenderTargets","bindSampler","sampler","update","inputAssembler","swapchain","quadIAOnscreen","quadIAOffscreen","pso","getOrCreatePipelineState","renderObjects","length","createDescriptorSet","localSetLayout","createBuffer","UNIFORM","TRANSFER_DST","DEVICE","SIZE","bindBuffer","BINDING","bindPipelineState","MATERIAL","LOCAL","bindInputAssembler","draw","profiler","endRenderPass","initInfo","name","priority","POST_PROCESS","tag","_applyDecoratedInitializer","prototype"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/rendering/deferred/postprocess-stage.ts"],"mappings":"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"}