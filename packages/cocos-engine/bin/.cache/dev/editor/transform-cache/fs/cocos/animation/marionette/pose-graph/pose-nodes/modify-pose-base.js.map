{"version":3,"names":["TransformModification","TransformModificationQueue","PoseTransformSpaceFlagTable","_dec","_dec2","_dec3","_class4","_class5","_descriptor","cacheTransform_spaceConversion","cacheParentTransform_spaceConversion","PoseNodeModifyPoseBase","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","undefined","_initializerWarningHelper","Error","_defineProperty","obj","_toPropertyKey","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","res","TypeError","Number","applyTransformModificationQueue","pose","queue","spaceFlagTable","nMods","length","DEBUG","debugLastModTransformIndex","iMod","transformIndex","array","assertIsTrue","_poseTransformSpace","PoseTransformSpace","LOCAL","transform","transforms","setTransform","COMPONENT","clear","firstTransformToConvert","lastTransformToConvert","set","parentTransformIndex","parentTable","test","getTransform","parentTransform","Transform","calculateRelative","unset","multiply","setters","_virtualInternal253AconstantsJs","_coreDataDecoratorsIndexJs","ccclass","serializable","_defineJs","CLASS_NAME_PREFIX_ANIM","_poseNodeJs","PoseNode","_decoratorInputJs","_decoratorNodeJs","poseGraphNodeHide","_corePoseJs","_foundationTypeSystemJs","PoseGraphType","_coreIndexJs","CachedArray","Pool","_coreTransformJs","execute","constructor","_pool","_array","_debugLastTransformIndex","push","mod","alloc","copy","get","free","nTransforms","_transformFlags","Array","fill","_export","type","POSE","args","_modificationQueue","_spaceFlagTable","settle","_this$pose","transformCount","reenter","_this$pose2","bind","_this$pose3","doUpdate","_this$pose4","update","doEvaluate","_this$pose$evaluate","_this$pose5","poseTransformSpaceRequirement","getPoseTransformSpaceRequirement","inputPose","evaluate","evaluateDefaultPose","modificationQueue","modifyPose","prototype"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/animation/marionette/pose-graph/pose-nodes/modify-pose-base.ts"],"mappings":"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"}