{"version":3,"names":["JointTexturePool","JointAnimationInfo","uploadJointData","MINIMUM_JOINT_TEXTURE_SIZE","dq_0","dq_1","v3_1","qt_1","v3_2","v3_3","v3_4","v3_min","v3_max","m4_1","m4_2","ab_1","Inf","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","selectJointsMediumFormat","device","getFormatFeatures","Format","RGBA32F","FormatFeatureBit","SAMPLED_TEXTURE","RGBA8","uploadJointDataLBS","out","base","mat","firstBone","m00","m01","m02","m12","m04","m05","m06","m13","m08","m09","m10","m14","uploadJointDataDQS","Mat4","toRTS","Quat","copy","dot","multiplyScalar","set","x","y","z","multiply","w","roundUpTextureSize","targetLength","formatSize","formatScale","Math","sqrt","ceil","max","_export","setters","_virtualInternal253AconstantsJs","EDITOR","JSB","_skeletalAnimationDataHubJs","SkelAnimDataHub","_animationTransformUtilsJs","getWorldTransformUntilRoot","_coreIndexJs","geometry","Vec3","_gfxIndexJs","BufferUsageBit","FormatInfos","MemoryUsageBit","BufferInfo","_renderingDefineJs","UBOSkinningAnimation","_renderSceneCoreTextureBufferPoolJs","TextureBufferPool","_miscJointTextureSamplerInfoJs","jointTextureSamplerInfo","execute","AABB","MAX_SAFE_INTEGER","pixelsPerJoint","_pixelsPerJoint","constructor","_device","_pool","_textureBuffers","Map","_formatSize","_customPool","_chunkIdxMap","format","size","initialize","roundUpFn","clear","destroy","registerCustomTextureLayouts","layouts","i","length","layout","textureLength","chunkIdx","createChunk","j","contents","content","skeleton","k","clips","clip","getDefaultPoseTexture","mesh","skinningRoot","hash","texture","get","bounds","has","refCount","joints","bindposes","textureBuffer","buildTexture","jointCount","bufSize","customChunkIdx","handle","alloc","Float32Array","BYTES_PER_ELEMENT","pixelOffset","start","skeletonHash","clipHash","readyToBeDeleted","boneSpaceBounds","getBoneSpaceBounds","offset","node","getChildByPath","inverseBindposes","bound","transform","getBoundary","min","IDENTITY","fromPoints","update","buffer","getSequencePoseTexture","clipData","getOrExtract","frames","animInfos","_createAnimInfos","f","push","curveData","downstream","bindposeIdx","bindposeCorrection","transformValid","boneSpaceBound","center","halfExtents","releaseHandle","free","delete","releaseSkeleton","it","values","next","done","releaseAnimationClip","animPath","source","animNode","correctionPath","idx","lastIndexOf","substring","fromRTS","rotation","position","scale","parent","t","transforms","getData","nodeID","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","SIZE","data","info","dirty","dirtyForJSB","Uint8Array","currentClip","switchClip"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/3d/skeletal-animation/skeletal-animation-utils.ts"],"mappings":";;;iPA+IaA,gBAAgB,EA4ThBC,kBAAkB,EAAAC,eAAA,EAAAC,0BAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,GAAA;EAAA,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,IAAAD,GAAA,GAAAE,cAAA,CAAAF,GAAA,OAAAA,GAAA,IAAAD,GAAA,IAAAI,MAAA,CAAAC,cAAA,CAAAL,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAI,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAR,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;EAAA,SAAAG,eAAAM,GAAA,QAAAR,GAAA,GAAAS,YAAA,CAAAD,GAAA,2BAAAR,GAAA,gBAAAA,GAAA,GAAAU,MAAA,CAAAV,GAAA;EAAA,SAAAS,aAAAE,KAAA,EAAAC,IAAA,eAAAD,KAAA,iBAAAA,KAAA,kBAAAA,KAAA,MAAAE,IAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,WAAA,OAAAF,IAAA,KAAAG,SAAA,QAAAC,GAAA,GAAAJ,IAAA,CAAAK,IAAA,CAAAP,KAAA,EAAAC,IAAA,2BAAAK,GAAA,sBAAAA,GAAA,YAAAE,SAAA,4DAAAP,IAAA,gBAAAF,MAAA,GAAAU,MAAA,EAAAT,KAAA,KA3c/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAkB+D;;EAExD,SAASU,wBAAwBA,CAAEC,MAAc,EAAU;IAC9D,IAAIA,MAAM,CAACC,iBAAiB,CAACC,MAAM,CAACC,OAAO,CAAC,GAAGC,gBAAgB,CAACC,eAAe,EAAE;MAC7E,OAAOH,MAAM,CAACC,OAAO;IACzB;IACA,OAAOD,MAAM,CAACI,KAAK;EACvB;;EAEA;EACA,SAASC,kBAAkBA,CAAEC,GAAiB,EAAEC,IAAY,EAAEC,GAAmB,EAAEC,SAAkB,EAAQ;IACzGH,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAGC,GAAG,CAACE,GAAG;IACvBJ,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAGC,GAAG,CAACG,GAAG;IACvBL,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAGC,GAAG,CAACI,GAAG;IACvBN,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAGC,GAAG,CAACK,GAAG;IACvBP,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAGC,GAAG,CAACM,GAAG;IACvBR,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAGC,GAAG,CAACO,GAAG;IACvBT,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAGC,GAAG,CAACQ,GAAG;IACvBV,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAGC,GAAG,CAACS,GAAG;IACvBX,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAGC,GAAG,CAACU,GAAG;IACvBZ,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAGC,GAAG,CAACW,GAAG;IACvBb,GAAG,CAACC,IAAI,GAAG,EAAE,CAAC,GAAGC,GAAG,CAACY,GAAG;IACxBd,GAAG,CAACC,IAAI,GAAG,EAAE,CAAC,GAAGC,GAAG,CAACa,GAAG;EAC5B;EAQA;EACA,SAASC,kBAAkBA,CAAEhB,GAAiB,EAAEC,IAAY,EAAEC,GAAS,EAAEC,SAAkB,EAAQ;IAC/Fc,IAAI,CAACC,KAAK,CAAChB,GAAG,EAAE5C,IAAI,EAAED,IAAI,EAAEE,IAAI,CAAC;IACjC;IACA,IAAI4C,SAAS,EAAE;MAAEgB,IAAI,CAACC,IAAI,CAACjE,IAAI,EAAEG,IAAI,CAAC;IAAE,CAAC,MAAM,IAAI6D,IAAI,CAACE,GAAG,CAAClE,IAAI,EAAEG,IAAI,CAAC,GAAG,CAAC,EAAE;MAAE6D,IAAI,CAACG,cAAc,CAAChE,IAAI,EAAEA,IAAI,EAAE,CAAC,CAAC,CAAC;IAAE;IACpH;IACA6D,IAAI,CAACI,GAAG,CAACnE,IAAI,EAAEC,IAAI,CAACmE,CAAC,EAAEnE,IAAI,CAACoE,CAAC,EAAEpE,IAAI,CAACqE,CAAC,EAAE,CAAC,CAAC;IACzCP,IAAI,CAACG,cAAc,CAAClE,IAAI,EAAE+D,IAAI,CAACQ,QAAQ,CAACvE,IAAI,EAAEA,IAAI,EAAEE,IAAI,CAAC,EAAE,GAAG,CAAC;IAC/D;IACA0C,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAG3C,IAAI,CAACkE,CAAC;IACtBxB,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAG3C,IAAI,CAACmE,CAAC;IACtBzB,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAG3C,IAAI,CAACoE,CAAC;IACtB1B,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAG3C,IAAI,CAACsE,CAAC;IACtB5B,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAG7C,IAAI,CAACoE,CAAC;IACtBxB,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAG7C,IAAI,CAACqE,CAAC;IACtBzB,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAG7C,IAAI,CAACsE,CAAC;IACtB1B,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAG7C,IAAI,CAACwE,CAAC;IACtB5B,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAG1C,IAAI,CAACiE,CAAC;IACtBxB,GAAG,CAACC,IAAI,GAAG,CAAC,CAAC,GAAG1C,IAAI,CAACkE,CAAC;IACtBzB,GAAG,CAACC,IAAI,GAAG,EAAE,CAAC,GAAG1C,IAAI,CAACmE,CAAC;EAC3B;EAEA,SAASG,kBAAkBA,CAAEC,YAAoB,EAAEC,UAAkB,EAAU;IAC3E,MAAMC,WAAW,GAAG,CAAC,GAAGC,IAAI,CAACC,IAAI,CAACH,UAAU,CAAC;IAC7C,OAAOE,IAAI,CAACE,IAAI,CAACF,IAAI,CAACG,GAAG,CAAClF,0BAA0B,GAAG8E,WAAW,EAAEF,YAAY,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE;EAChG;EAACO,OAAA;IAAA9C,wBAAA,EAtDeA,wBAAwB;IAAAxC,gBAAA;IAAAC,kBAAA;EAAA;EAAA;IAAAsF,OAAA,aAAAC,+BAAA;MAlB/BC,MAAM,GAAAD,+BAAA,CAANC,MAAM;MAAEC,GAAG,GAAAF,+BAAA,CAAHE,GAAG;IAAA,aAAAC,2BAAA;MAEXC,eAAe,GAAAD,2BAAA,CAAfC,eAAe;IAAA,aAAAC,0BAAA;MACfC,0BAA0B,GAAAD,0BAAA,CAA1BC,0BAA0B;IAAA,aAAAC,YAAA;MAG1BC,QAAQ,GAAAD,YAAA,CAARC,QAAQ;MAAE9B,IAAI,GAAA6B,YAAA,CAAJ7B,IAAI;MAAEE,IAAI,GAAA2B,YAAA,CAAJ3B,IAAI;MAAE6B,IAAI,GAAAF,YAAA,CAAJE,IAAI;IAAA,aAAAC,WAAA;MAC1BC,cAAc,GAAAD,WAAA,CAAdC,cAAc;MAAExD,MAAM,GAAAuD,WAAA,CAANvD,MAAM;MAAEyD,WAAW,GAAAF,WAAA,CAAXE,WAAW;MACxCC,cAAc,GAAAH,WAAA,CAAdG,cAAc;MAAkBC,UAAU,GAAAJ,WAAA,CAAVI,UAAU;MAAEzD,gBAAgB,GAAAqD,WAAA,CAAhBrD,gBAAgB;IAAA,aAAA0D,kBAAA;MACvDC,oBAAoB,GAAAD,kBAAA,CAApBC,oBAAoB;IAAA,aAAAC,mCAAA;MAEEC,iBAAiB,GAAAD,mCAAA,CAAjBC,iBAAiB;IAAA,aAAAC,8BAAA;MACvCC,uBAAuB,GAAAD,8BAAA,CAAvBC,uBAAuB;IAAA;IAAAC,OAAA,WAAAA,CAAA;MAEhC;MAAAvB,OAAA,oBACapF,eAAe,GAAG8C,kBAAkB;MAAAsC,OAAA,+BACpCnF,0BAA0B,GAAGsF,MAAM,GAAG,IAAI,GAAG,GAAG;MAyBvDrF,IAAI,GAAG,IAAIgE,IAAI,CAAC,CAAC;MACjB/D,IAAI,GAAG,IAAI+D,IAAI,CAAC,CAAC;MACjB9D,IAAI,GAAG,IAAI2F,IAAI,CAAC,CAAC;MACjB1F,IAAI,GAAG,IAAI6D,IAAI,CAAC,CAAC;MACjB5D,IAAI,GAAG,IAAIyF,IAAI,CAAC,CAAC;MAAAX,OAAA,4BA6BdsB,uBAAuB;MAoB1BnG,IAAI,GAAG,IAAIwF,IAAI,CAAC,CAAC;MACjBvF,IAAI,GAAG,IAAIuF,IAAI,CAAC,CAAC;MACjBtF,MAAM,GAAG,IAAIsF,IAAI,CAAC,CAAC;MACnBrF,MAAM,GAAG,IAAIqF,IAAI,CAAC,CAAC;MACnBpF,IAAI,GAAG,IAAIqD,IAAI,CAAC,CAAC;MACjBpD,IAAI,GAAG,IAAIoD,IAAI,CAAC,CAAC;MACjBnD,IAAI,GAAG,IAAIiF,QAAQ,CAACc,IAAI,CAAC,CAAC;MAWhC;MACA;MACM9F,GAAG,GAAGuB,MAAM,CAACwE,gBAAgB;MAEnC;AACA;AACA;AACA;MAHAzB,OAAA,qBAIatF,gBAAgB,GAAtB,MAAMA,gBAAgB,CAAC;QAawB;;QAElD,IAAIgH,cAAcA,CAAA,EAAY;UAC1B,OAAO,IAAI,CAACC,eAAe;QAC/B;QAEAC,WAAWA,CAAEzE,MAAc,EAAE;UAAA,KAlBrB0E,OAAO;UAAA,KAEPC,KAAK;UAAA,KAELC,eAAe,GAAG,IAAIC,GAAG,CAA8B,CAAC;UAAE;UAAA,KAE1DC,WAAW;UAAA,KAEXN,eAAe;UAAA,KAEfO,WAAW;UAAA,KAEXC,YAAY,GAAG,IAAIH,GAAG,CAAiB,CAAC;UAO5C,IAAI,CAACH,OAAO,GAAG1E,MAAM;UACrB,MAAMiF,MAAM,GAAGlF,wBAAwB,CAAC,IAAI,CAAC2E,OAAO,CAAC;UACrD,IAAI,CAACI,WAAW,GAAGnB,WAAW,CAACsB,MAAM,CAAC,CAACC,IAAI;UAC3C,IAAI,CAACV,eAAe,GAAG,EAAE,GAAG,IAAI,CAACM,WAAW;UAC5C,IAAI,CAACH,KAAK,GAAG,IAAIV,iBAAiB,CAACjE,MAAM,CAAC;UAC1C,IAAI,CAAC2E,KAAK,CAACQ,UAAU,CAAC;YAAEF,MAAM;YAAEG,SAAS,EAAE/C;UAAmB,CAAC,CAAC;UAChE,IAAI,CAAC0C,WAAW,GAAG,IAAId,iBAAiB,CAACjE,MAAM,CAAC;UAChD,IAAI,CAAC+E,WAAW,CAACI,UAAU,CAAC;YAAEF,MAAM;YAAEG,SAAS,EAAE/C;UAAmB,CAAC,CAAC;QAC1E;QAEOgD,KAAKA,CAAA,EAAU;UAClB,IAAI,CAACV,KAAK,CAACW,OAAO,CAAC,CAAC;UACpB,IAAI,CAACV,eAAe,CAACS,KAAK,CAAC,CAAC;QAChC;QAEOE,4BAA4BA,CAAEC,OAAoC,EAAQ;UAC7E,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,OAAO,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;YACrC,MAAME,MAAM,GAAGH,OAAO,CAACC,CAAC,CAAC;YACzB,IAAIG,aAAa,GAAGD,MAAM,CAACC,aAAa;YACxC,IAAI,EAAE,IAAI,CAAClB,OAAO,CAACzE,iBAAiB,CAACC,MAAM,CAACC,OAAO,CAAC,GAAGC,gBAAgB,CAACC,eAAe,CAAC,EAAE;cACtFuF,aAAa,IAAI,CAAC,CAAC,CAAC;YACxB;;YACA,MAAMC,QAAQ,GAAG,IAAI,CAACd,WAAW,CAACe,WAAW,CAACF,aAAa,CAAC;YAC5D,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,CAACK,QAAQ,CAACN,MAAM,EAAEK,CAAC,EAAE,EAAE;cAC7C,MAAME,OAAO,GAAGN,MAAM,CAACK,QAAQ,CAACD,CAAC,CAAC;cAClC,MAAM;gBAAEG;cAAS,CAAC,GAAGD,OAAO;cAC5B,IAAI,CAACjB,YAAY,CAACjD,GAAG,CAACmE,QAAQ,EAAEL,QAAQ,CAAC,CAAC,CAAC;cAC3C,KAAK,IAAIM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,OAAO,CAACG,KAAK,CAACV,MAAM,EAAES,CAAC,EAAE,EAAE;gBAC3C,MAAME,IAAI,GAAGJ,OAAO,CAACG,KAAK,CAACD,CAAC,CAAC;gBAC7B,IAAI,CAACnB,YAAY,CAACjD,GAAG,CAACmE,QAAQ,GAAGG,IAAI,EAAER,QAAQ,CAAC;cACpD;YACJ;UACJ;QACJ;;QAEA;AACJ;AACA;AACA;AACA;AACA;QACWS,qBAAqBA,CAAEJ,QAAkB,EAAEK,IAAU,EAAEC,YAAkB,EAA8B;UAC1G,MAAMC,IAAI,GAAGP,QAAQ,CAACO,IAAI,GAAG,CAAC,CAAC,CAAC;UAChC,IAAIC,OAAmC,GAAG,IAAI,CAAC9B,eAAe,CAAC+B,GAAG,CAACF,IAAI,CAAC,IAAI,IAAI;UAChF,IAAIC,OAAO,IAAIA,OAAO,CAACE,MAAM,CAACC,GAAG,CAACN,IAAI,CAACE,IAAI,CAAC,EAAE;YAAEC,OAAO,CAACI,QAAQ,EAAE;YAAE,OAAOJ,OAAO;UAAE;UACpF,MAAM;YAAEK,MAAM;YAAEC;UAAU,CAAC,GAAGd,QAAQ;UACtC,IAAIe,aAA2B,GAAG,IAAK;UAAE,IAAIC,YAAY,GAAG,KAAK;UACjE,MAAMC,UAAU,GAAGJ,MAAM,CAACrB,MAAM;UAChC,IAAI,CAACgB,OAAO,EAAE;YACV,MAAMU,OAAO,GAAGD,UAAU,GAAG,EAAE;YAC/B,MAAME,cAAc,GAAG,IAAI,CAACrC,YAAY,CAAC2B,GAAG,CAACF,IAAI,CAAC;YAClD,MAAMa,MAAM,GAAGD,cAAc,KAAK3H,SAAS,GACrC,IAAI,CAACqF,WAAW,CAACwC,KAAK,CAACH,OAAO,GAAGI,YAAY,CAACC,iBAAiB,EAAEJ,cAAc,CAAC,GAChF,IAAI,CAAC1C,KAAK,CAAC4C,KAAK,CAACH,OAAO,GAAGI,YAAY,CAACC,iBAAiB,CAAC;YAChE,IAAI,CAACH,MAAM,EAAE;cAAE,OAAOZ,OAAO;YAAE;YAC/BA,OAAO,GAAG;cACNgB,WAAW,EAAEJ,MAAM,CAACK,KAAK,GAAG,IAAI,CAAC7C,WAAW;cAC5CgC,QAAQ,EAAE,CAAC;cACXF,MAAM,EAAE,IAAI/B,GAAG,CAAC,CAAC;cACjB+C,YAAY,EAAE1B,QAAQ,CAACO,IAAI;cAC3BoB,QAAQ,EAAE,CAAC;cACXC,gBAAgB,EAAE,KAAK;cACvBR;YACJ,CAAC;YACDL,aAAa,GAAG,IAAIO,YAAY,CAACJ,OAAO,CAAC;YAAEF,YAAY,GAAG,IAAI;UAClE,CAAC,MAAM;YAAER,OAAO,CAACI,QAAQ,EAAE;UAAE;UAC7BtD,IAAI,CAACzB,GAAG,CAAC7D,MAAM,EAAGK,GAAG,EAAGA,GAAG,EAAGA,GAAG,CAAC;UAClCiF,IAAI,CAACzB,GAAG,CAAC5D,MAAM,EAAE,CAACI,GAAG,EAAE,CAACA,GAAG,EAAE,CAACA,GAAG,CAAC;UAClC,MAAMwJ,eAAe,GAAGxB,IAAI,CAACyB,kBAAkB,CAAC9B,QAAQ,CAAC;UACzD,KAAK,IAAIH,CAAC,GAAG,CAAC,EAAEkC,MAAM,GAAG,CAAC,EAAElC,CAAC,GAAGoB,UAAU,EAAEpB,CAAC,EAAE,EAAEkC,MAAM,IAAI,EAAE,EAAE;YAC3D,MAAMC,IAAI,GAAG1B,YAAY,CAAC2B,cAAc,CAACpB,MAAM,CAAChB,CAAC,CAAC,CAAC;YACnD,MAAMrF,GAAG,GAAGwH,IAAI,GAAG7E,0BAA0B,CAAC6E,IAAI,EAAE1B,YAAY,EAAEpI,IAAI,CAAC,GAAG8H,QAAQ,CAACkC,gBAAgB,CAACrC,CAAC,CAAC;YACtG,MAAMsC,KAAK,GAAGN,eAAe,CAAChC,CAAC,CAAC;YAChC,IAAIsC,KAAK,EAAE;cACP9E,QAAQ,CAACc,IAAI,CAACiE,SAAS,CAAChK,IAAI,EAAE+J,KAAK,EAAE3H,GAAG,CAAC;cACzCpC,IAAI,CAACiK,WAAW,CAACvK,IAAI,EAAEC,IAAI,CAAC;cAC5BuF,IAAI,CAACgF,GAAG,CAACtK,MAAM,EAAEA,MAAM,EAAEF,IAAI,CAAC;cAC9BwF,IAAI,CAACZ,GAAG,CAACzE,MAAM,EAAEA,MAAM,EAAEF,IAAI,CAAC;YAClC;YACA,IAAIiJ,YAAY,EAAE;cACd,IAAIgB,IAAI,EAAE;gBAAEzG,IAAI,CAACU,QAAQ,CAACzB,GAAG,EAAEA,GAAG,EAAEsG,SAAS,CAACjB,CAAC,CAAC,CAAC;cAAE;cACnDtI,eAAe,CAACwJ,aAAa,EAAEgB,MAAM,EAAEC,IAAI,GAAGxH,GAAG,GAAGe,IAAI,CAACgH,QAAQ,EAAE1C,CAAC,KAAK,CAAC,CAAC;YAC/E;UACJ;UACA,MAAMa,MAAM,GAAG,CAAC,IAAIrD,QAAQ,CAACc,IAAI,CAAC,CAAC,CAAC;UAAEqC,OAAO,CAACE,MAAM,CAAC7E,GAAG,CAACwE,IAAI,CAACE,IAAI,EAAEG,MAAM,CAAC;UAC3ErD,QAAQ,CAACc,IAAI,CAACqE,UAAU,CAAC9B,MAAM,CAAC,CAAC,CAAC,EAAE1I,MAAM,EAAEC,MAAM,CAAC;UACnD,IAAI+I,YAAY,EAAE;YACd,IAAI,CAACvC,KAAK,CAACgE,MAAM,CAACjC,OAAO,CAACY,MAAM,EAAEL,aAAa,CAAC2B,MAAM,CAAC;YACvD,IAAI,CAAChE,eAAe,CAAC7C,GAAG,CAAC0E,IAAI,EAAEC,OAAO,CAAC;UAC3C;UACA,OAAOA,OAAO;QAClB;;QAEA;AACJ;AACA;AACA;AACA;AACA;QACWmC,sBAAsBA,CAAE3C,QAAkB,EAAEG,IAAmB,EAAEE,IAAU,EAAEC,YAAkB,EAA8B;UAChI,MAAMC,IAAI,GAAGP,QAAQ,CAACO,IAAI,GAAGJ,IAAI,CAACI,IAAI;UACtC,IAAIC,OAAmC,GAAG,IAAI,CAAC9B,eAAe,CAAC+B,GAAG,CAACF,IAAI,CAAC,IAAI,IAAI;UAChF,IAAIC,OAAO,IAAIA,OAAO,CAACE,MAAM,CAACC,GAAG,CAACN,IAAI,CAACE,IAAI,CAAC,EAAE;YAAEC,OAAO,CAACI,QAAQ,EAAE;YAAE,OAAOJ,OAAO;UAAE;UACpF,MAAM;YAAEK,MAAM;YAAEC;UAAU,CAAC,GAAGd,QAAQ;UACtC,MAAM4C,QAAQ,GAAG3F,eAAe,CAAC4F,YAAY,CAAC1C,IAAI,CAAC;UACnD,MAAM;YAAE2C;UAAO,CAAC,GAAGF,QAAQ;UAC3B,IAAI7B,aAA2B,GAAG,IAAK;UAAE,IAAIC,YAAY,GAAG,KAAK;UACjE,MAAMC,UAAU,GAAGJ,MAAM,CAACrB,MAAM;UAChC,IAAI,CAACgB,OAAO,EAAE;YACV,MAAMU,OAAO,GAAGD,UAAU,GAAG,EAAE,GAAG6B,MAAM;YACxC,MAAM3B,cAAc,GAAG,IAAI,CAACrC,YAAY,CAAC2B,GAAG,CAACF,IAAI,CAAC;YAClD,MAAMa,MAAM,GAAGD,cAAc,KAAK3H,SAAS,GACrC,IAAI,CAACqF,WAAW,CAACwC,KAAK,CAACH,OAAO,GAAGI,YAAY,CAACC,iBAAiB,EAAEJ,cAAc,CAAC,GAChF,IAAI,CAAC1C,KAAK,CAAC4C,KAAK,CAACH,OAAO,GAAGI,YAAY,CAACC,iBAAiB,CAAC;YAChE,IAAI,CAACH,MAAM,EAAE;cAAE,OAAO,IAAI;YAAE;YAC5B,MAAM2B,SAAS,GAAG,IAAI,CAACC,gBAAgB,CAAChD,QAAQ,EAAEG,IAAI,EAAEG,YAAY,CAAC;YACrEE,OAAO,GAAG;cACNgB,WAAW,EAAEJ,MAAM,CAACK,KAAK,GAAG,IAAI,CAAC7C,WAAW;cAC5CgC,QAAQ,EAAE,CAAC;cACXF,MAAM,EAAE,IAAI/B,GAAG,CAAC,CAAC;cACjB+C,YAAY,EAAE1B,QAAQ,CAACO,IAAI;cAC3BoB,QAAQ,EAAExB,IAAI,CAACI,IAAI;cACnBqB,gBAAgB,EAAE,KAAK;cACvBR,MAAM;cACN2B;YACJ,CAAC;YACDhC,aAAa,GAAG,IAAIO,YAAY,CAACJ,OAAO,CAAC;YAAEF,YAAY,GAAG,IAAI;UAClE,CAAC,MAAM;YAAER,OAAO,CAACI,QAAQ,EAAE;UAAE;UAC7B,MAAMiB,eAAe,GAAGxB,IAAI,CAACyB,kBAAkB,CAAC9B,QAAQ,CAAC;UACzD,MAAMU,MAAuB,GAAG,EAAE;UAAEF,OAAO,CAACE,MAAM,CAAC7E,GAAG,CAACwE,IAAI,CAACE,IAAI,EAAEG,MAAM,CAAC;UACzE,KAAK,IAAIuC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,MAAM,EAAEG,CAAC,EAAE,EAAE;YAC7BvC,MAAM,CAACwC,IAAI,CAAC,IAAI7F,QAAQ,CAACc,IAAI,CAAC9F,GAAG,EAAEA,GAAG,EAAEA,GAAG,EAAE,CAACA,GAAG,EAAE,CAACA,GAAG,EAAE,CAACA,GAAG,CAAC,CAAC;UACnE;UACA,KAAK,IAAI4K,CAAC,GAAG,CAAC,EAAElB,MAAM,GAAG,CAAC,EAAEkB,CAAC,GAAGH,MAAM,EAAEG,CAAC,EAAE,EAAE;YACzC,MAAMd,KAAK,GAAGzB,MAAM,CAACuC,CAAC,CAAC;YACvB,KAAK,IAAIpD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoB,UAAU,EAAEpB,CAAC,EAAE,EAAEkC,MAAM,IAAI,EAAE,EAAE;cAC/C,MAAM;gBACFoB,SAAS;gBAAEC,UAAU;gBAAEC,WAAW;gBAAEC;cACxC,CAAC,GAAG9C,OAAO,CAACuC,SAAS,CAAElD,CAAC,CAAC;cACzB,IAAIrF,GAAS;cAAE,IAAI+I,cAAc,GAAG,IAAI;cACxC,IAAIJ,SAAS,IAAIC,UAAU,EAAE;gBAAE;gBAC3B5I,GAAG,GAAGe,IAAI,CAACU,QAAQ,CAAC/D,IAAI,EAAEiL,SAAS,CAACF,CAAC,CAAC,EAAEG,UAAU,CAAC;cACvD,CAAC,MAAM,IAAID,SAAS,EAAE;gBAAE;gBACpB3I,GAAG,GAAG2I,SAAS,CAACF,CAAC,CAAC;cACtB,CAAC,MAAM,IAAIG,UAAU,EAAE;gBAAE;gBACrB5I,GAAG,GAAG4I,UAAU;cACpB,CAAC,MAAM;gBAAE;gBACL5I,GAAG,GAAGwF,QAAQ,CAACkC,gBAAgB,CAACmB,WAAW,CAAC;gBAC5CE,cAAc,GAAG,KAAK;cAC1B;cACA,MAAMC,cAAc,GAAG3B,eAAe,CAAChC,CAAC,CAAC;cACzC,IAAI2D,cAAc,EAAE;gBAChB,MAAMpB,SAAS,GAAGkB,kBAAkB,GAAG/H,IAAI,CAACU,QAAQ,CAAC9D,IAAI,EAAEqC,GAAG,EAAE8I,kBAAkB,CAAC,GAAG9I,GAAG;gBACzF6C,QAAQ,CAACc,IAAI,CAACiE,SAAS,CAAChK,IAAI,EAAEoL,cAAc,EAAEpB,SAAS,CAAC;gBACxDhK,IAAI,CAACiK,WAAW,CAACvK,IAAI,EAAEC,IAAI,CAAC;gBAC5BuF,IAAI,CAACgF,GAAG,CAACH,KAAK,CAACsB,MAAM,EAAEtB,KAAK,CAACsB,MAAM,EAAE3L,IAAI,CAAC;gBAC1CwF,IAAI,CAACZ,GAAG,CAACyF,KAAK,CAACuB,WAAW,EAAEvB,KAAK,CAACuB,WAAW,EAAE3L,IAAI,CAAC;cACxD;cACA,IAAIiJ,YAAY,EAAE;gBACd,IAAIuC,cAAc,EAAE;kBAAEhI,IAAI,CAACU,QAAQ,CAAC/D,IAAI,EAAEsC,GAAG,EAAEsG,SAAS,CAACuC,WAAW,CAAC,CAAC;gBAAE;gBACxE9L,eAAe,CAACwJ,aAAa,EAAEgB,MAAM,EAAEwB,cAAc,GAAGrL,IAAI,GAAGqD,IAAI,CAACgH,QAAQ,EAAE1C,CAAC,KAAK,CAAC,CAAC;cAC1F;YACJ;YACAxC,QAAQ,CAACc,IAAI,CAACqE,UAAU,CAACL,KAAK,EAAEA,KAAK,CAACsB,MAAM,EAAEtB,KAAK,CAACuB,WAAW,CAAC;UACpE;UACA,IAAI1C,YAAY,EAAE;YACd,IAAI,CAACvC,KAAK,CAACgE,MAAM,CAACjC,OAAO,CAACY,MAAM,EAAEL,aAAa,CAAC2B,MAAM,CAAC;YACvD,IAAI,CAAChE,eAAe,CAAC7C,GAAG,CAAC0E,IAAI,EAAEC,OAAO,CAAC;UAC3C;UACA,OAAOA,OAAO;QAClB;QAEOmD,aAAaA,CAAEvC,MAA2B,EAAQ;UACrD,IAAIA,MAAM,CAACR,QAAQ,GAAG,CAAC,EAAE;YAAEQ,MAAM,CAACR,QAAQ,EAAE;UAAE;UAC9C,IAAI,CAACQ,MAAM,CAACR,QAAQ,IAAIQ,MAAM,CAACQ,gBAAgB,EAAE;YAC7C,MAAMrB,IAAI,GAAGa,MAAM,CAACM,YAAY,GAAGN,MAAM,CAACO,QAAQ;YAClD,MAAMR,cAAc,GAAG,IAAI,CAACrC,YAAY,CAAC2B,GAAG,CAACF,IAAI,CAAC;YAClD,CAACY,cAAc,KAAK3H,SAAS,GAAG,IAAI,CAACqF,WAAW,GAAG,IAAI,CAACJ,KAAK,EAAEmF,IAAI,CAACxC,MAAM,CAACA,MAAM,CAAC;YAClF,IAAI,IAAI,CAAC1C,eAAe,CAAC+B,GAAG,CAACF,IAAI,CAAC,KAAKa,MAAM,EAAE;cAC3C,IAAI,CAAC1C,eAAe,CAACmF,MAAM,CAACtD,IAAI,CAAC;YACrC;UACJ;QACJ;QAEOuD,eAAeA,CAAE9D,QAAkB,EAAQ;UAC9C,MAAM+D,EAAE,GAAG,IAAI,CAACrF,eAAe,CAACsF,MAAM,CAAC,CAAC;UACxC,IAAIvK,GAAG,GAAGsK,EAAE,CAACE,IAAI,CAAC,CAAC;UACnB,OAAO,CAACxK,GAAG,CAACyK,IAAI,EAAE;YACd,MAAM9C,MAAM,GAAG3H,GAAG,CAAChB,KAAK;YACxB,IAAI2I,MAAM,CAACM,YAAY,KAAK1B,QAAQ,CAACO,IAAI,EAAE;cACvCa,MAAM,CAACQ,gBAAgB,GAAG,IAAI;cAC9B,IAAIR,MAAM,CAACR,QAAQ,EAAE;gBACjB;gBACA,IAAI,CAAClC,eAAe,CAACmF,MAAM,CAACzC,MAAM,CAACM,YAAY,GAAGN,MAAM,CAACO,QAAQ,CAAC;cACtE,CAAC,MAAM;gBACH,IAAI,CAACgC,aAAa,CAACvC,MAAM,CAAC;cAC9B;YACJ;YACA3H,GAAG,GAAGsK,EAAE,CAACE,IAAI,CAAC,CAAC;UACnB;QACJ;QAEOE,oBAAoBA,CAAEhE,IAAmB,EAAQ;UACpD,MAAM4D,EAAE,GAAG,IAAI,CAACrF,eAAe,CAACsF,MAAM,CAAC,CAAC;UACxC,IAAIvK,GAAG,GAAGsK,EAAE,CAACE,IAAI,CAAC,CAAC;UACnB,OAAO,CAACxK,GAAG,CAACyK,IAAI,EAAE;YACd,MAAM9C,MAAM,GAAG3H,GAAG,CAAChB,KAAK;YACxB,IAAI2I,MAAM,CAACO,QAAQ,KAAKxB,IAAI,CAACI,IAAI,EAAE;cAC/Ba,MAAM,CAACQ,gBAAgB,GAAG,IAAI;cAC9B,IAAIR,MAAM,CAACR,QAAQ,EAAE;gBACjB;gBACA,IAAI,CAAClC,eAAe,CAACmF,MAAM,CAACzC,MAAM,CAACM,YAAY,GAAGN,MAAM,CAACO,QAAQ,CAAC;cACtE,CAAC,MAAM;gBACH,IAAI,CAACgC,aAAa,CAACvC,MAAM,CAAC;cAC9B;YACJ;YACA3H,GAAG,GAAGsK,EAAE,CAACE,IAAI,CAAC,CAAC;UACnB;QACJ;QAEQjB,gBAAgBA,CAAEhD,QAAkB,EAAEG,IAAmB,EAAEG,YAAkB,EACrF;UACI,MAAMyC,SAAmC,GAAG,EAAE;UAC9C,MAAM;YAAElC,MAAM;YAAEC;UAAU,CAAC,GAAGd,QAAQ;UACtC,MAAMiB,UAAU,GAAGJ,MAAM,CAACrB,MAAM;UAChC,MAAMoD,QAAQ,GAAG3F,eAAe,CAAC4F,YAAY,CAAC1C,IAAI,CAAC;UACnD,KAAK,IAAIN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoB,UAAU,EAAEpB,CAAC,EAAE,EAAE;YACjC,IAAIuE,QAAQ,GAAGvD,MAAM,CAAChB,CAAC,CAAC;YACxB,IAAIwE,MAAM,GAAGzB,QAAQ,CAAC/B,MAAM,CAACuD,QAAQ,CAAC;YACtC,IAAIE,QAAQ,GAAGhE,YAAY,CAAC2B,cAAc,CAACmC,QAAQ,CAAC;YACpD,IAAIhB,UAA4B;YAChC,IAAImB,cAAkC;YACtC,OAAO,CAACF,MAAM,EAAE;cACZ,MAAMG,GAAG,GAAGJ,QAAQ,CAACK,WAAW,CAAC,GAAG,CAAC;cACrCL,QAAQ,GAAGA,QAAQ,CAACM,SAAS,CAAC,CAAC,EAAEF,GAAG,CAAC;cACrCH,MAAM,GAAGzB,QAAQ,CAAC/B,MAAM,CAACuD,QAAQ,CAAC;cAClC,IAAIE,QAAQ,EAAE;gBACV,IAAI,CAAClB,UAAU,EAAE;kBAAEA,UAAU,GAAG,IAAI7H,IAAI,CAAC,CAAC;gBAAE;gBAC5CA,IAAI,CAACoJ,OAAO,CAACzM,IAAI,EAAEoM,QAAQ,CAACM,QAAQ,EAAEN,QAAQ,CAACO,QAAQ,EAAEP,QAAQ,CAACQ,KAAK,CAAC;gBACxEvJ,IAAI,CAACU,QAAQ,CAACmH,UAAU,EAAElL,IAAI,EAAEkL,UAAU,CAAC;gBAC3CkB,QAAQ,GAAGA,QAAQ,CAACS,MAAM;cAC9B,CAAC,MAAM;gBAAE;gBACLR,cAAc,GAAGH,QAAQ;cAC7B;cACA,IAAII,GAAG,GAAG,CAAC,EAAE;gBAAE;cAAO;YAC1B;YACA;YACA,IAAInB,WAAW,GAAGxD,CAAC;YACnB,IAAIyD,kBAAoC;YACxC;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;YACY,IAAIiB,cAAc,KAAK/K,SAAS,IAAI6K,MAAM,EAAE;cACxC;cACAhB,WAAW,GAAGxD,CAAC,GAAG,CAAC;cACnB,KAAK,IAAImF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG/D,UAAU,EAAE+D,CAAC,EAAE,EAAE;gBACjC,IAAInE,MAAM,CAACmE,CAAC,CAAC,KAAKT,cAAc,EAAE;kBAC9BlB,WAAW,GAAG2B,CAAC;kBACf1B,kBAAkB,GAAG,IAAI/H,IAAI,CAAC,CAAC;kBAC/BA,IAAI,CAACU,QAAQ,CAACqH,kBAAkB,EAAExC,SAAS,CAACkE,CAAC,CAAC,EAAEhF,QAAQ,CAACkC,gBAAgB,CAACrC,CAAC,CAAC,CAAC;kBAC7E;gBACJ;cACJ;YACJ;YACAkD,SAAS,CAACG,IAAI,CAAC;cACXC,SAAS,EAAEkB,MAAM,IAAIA,MAAM,CAACY,UAAU;cAAE7B,UAAU;cAAEC,WAAW;cAAEC;YACrE,CAAC,CAAC;UACN;UACA,OAAOP,SAAS;QACpB;MACJ,CAAC;MAAApG,OAAA,uBAUYrF,kBAAkB,GAAxB,MAAMA,kBAAkB,CAAC;QAK5BiH,WAAWA,CAAEzE,MAAc,EAAE;UAAA,KAJrB2E,KAAK,GAAG,IAAIE,GAAG,CAAoB,CAAC;UAAE;UAAA,KAEtCH,OAAO;UAGX,IAAI,CAACA,OAAO,GAAG1E,MAAM;QACzB;QAEOoL,OAAOA,CAAEC,MAAM,GAAG,IAAI,EAAa;UACtC,MAAM1L,GAAG,GAAG,IAAI,CAACgF,KAAK,CAACgC,GAAG,CAAC0E,MAAM,CAAC;UAClC,IAAI1L,GAAG,EAAE;YAAE,OAAOA,GAAG;UAAE;UACvB,MAAMiJ,MAAM,GAAG,IAAI,CAAClE,OAAO,CAAC4G,YAAY,CAAC,IAAIzH,UAAU,CACnDH,cAAc,CAAC6H,OAAO,GAAG7H,cAAc,CAAC8H,YAAY,EACpD5H,cAAc,CAAC6H,IAAI,GAAG7H,cAAc,CAAC8H,MAAM,EAC3C3H,oBAAoB,CAAC4H,IAAI,EACzB5H,oBAAoB,CAAC4H,IACzB,CAAC,CAAC;UACF,MAAMC,IAAI,GAAG,IAAIpE,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;UAC3CoB,MAAM,CAACD,MAAM,CAACiD,IAAI,CAAC;UACnB,MAAMC,IAAI,GAAG;YAAEjD,MAAM;YAAEgD,IAAI;YAAEE,KAAK,EAAE,KAAK;YAAEC,WAAW,EAAE,IAAIC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YAAEC,WAAW,EAAE;UAAK,CAAC;UAEhG,IAAI,CAACtH,KAAK,CAAC5C,GAAG,CAACsJ,MAAM,EAAEQ,IAAI,CAAC;UAC5B,OAAOA,IAAI;QACf;QAEOvG,OAAOA,CAAE+F,MAAc,EAAQ;UAClC,MAAMQ,IAAI,GAAG,IAAI,CAAClH,KAAK,CAACgC,GAAG,CAAC0E,MAAM,CAAC;UACnC,IAAI,CAACQ,IAAI,EAAE;YAAE;UAAQ;UACrBA,IAAI,CAACjD,MAAM,CAACtD,OAAO,CAAC,CAAC;UACrB,IAAI,CAACX,KAAK,CAACoF,MAAM,CAACsB,MAAM,CAAC;QAC7B;QAEOa,UAAUA,CAAEL,IAAe,EAAExF,IAA0B,EAAa;UACvEwF,IAAI,CAACI,WAAW,GAAG5F,IAAI;UACvBwF,IAAI,CAACD,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;UAClBC,IAAI,CAACjD,MAAM,CAACD,MAAM,CAACkD,IAAI,CAACD,IAAI,CAAC;UAC7BC,IAAI,CAACC,KAAK,GAAG,KAAK;UAClB,IAAI7I,GAAG,EAAE;YACL4I,IAAI,CAACE,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC;UAC3B;UACA,OAAOF,IAAI;QACf;QAEOxG,KAAKA,CAAA,EAAU;UAClB,KAAK,MAAMwG,IAAI,IAAI,IAAI,CAAClH,KAAK,CAACuF,MAAM,CAAC,CAAC,EAAE;YACpC2B,IAAI,CAACjD,MAAM,CAACtD,OAAO,CAAC,CAAC;UACzB;UACA,IAAI,CAACX,KAAK,CAACU,KAAK,CAAC,CAAC;QACtB;MACJ,CAAC;IAAA;EAAA;AAAA"}