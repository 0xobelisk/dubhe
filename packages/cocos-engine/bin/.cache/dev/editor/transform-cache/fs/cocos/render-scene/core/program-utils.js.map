{"version":3,"names":["mapDefine","info","def","type","toString","undefined","options","range","console","warn","prepareDefines","defs","tDefs","macros","i","length","tmpl","name","v","value","isDefault","push","getShaderInstanceName","reduce","acc","cur","dependencyCheck","dependencies","defines","d","slice","getActiveAttributes","gfxAttributes","out","attributes","getVariantKey","programInfo","tmplDefs","uber","key","tmplDef","_map","mapped","offset","_offset","hash","getUniformSize","prevSize","m","count","GetTypeSize","defaultUniformCounts","get","error","getSize","blockMembers","genHandles","handleMap","blocks","block","members","j","uniform","genHandle","binding","samplerTextures","samplerTexture","getBitCount","cnt","Math","ceil","log2","max","populateMacros","findIndex","s","constantMacros","builtins","statistics","getCombinationDefines","combination","Object","keys","choices","addEffectDefaultProperties","effect","techniques","tech","passes","pass","propertyIndex","properties","_export","setters","_gfxBaseDefineJs","_renderingDefineJs","UBOForwardLight","UBOSkinning","_passUtilsJs","execute","Map","set","LAYOUT","LIGHTS_PER_PASS"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/render-scene/core/program-utils.ts"],"mappings":"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"}