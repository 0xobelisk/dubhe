{"version":3,"names":["CannonWorld","aabbTemp","AABB_LINE_COUNT","from","to","raycastOpt","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","setupFromAndTo","worldRay","distance","Vec3","copy","o","computeHit","_export","setters","_cocosCannon","CANNON","default","_coreIndexJs","error","js","geometry","warnID","Color","_cannonUtilJs","fillRaycastResult","toCannonRaycastOptions","_shapesCannonShapeJs","CannonShape","_cannonSharedBodyJs","CannonSharedBody","_frameworkIndexJs","EPhysicsDrawFlags","_gameIndexJs","director","execute","AABB","impl","_world","setDefaultMaterial","mat","defaultMaterial","friction","restitution","idToMaterial","id","setAllowSleep","v","allowSleep","setGravity","gravity","constructor","bodies","constraints","_debugLineCount","_MAX_DEBUG_LINE_COUNT","_debugDrawFlags","NONE","_debugConstraintSize","_aabbColor","_wireframeColor","World","broadphase","NaiveBroadphase","solver","iterations","tolerance","defaultContactMaterial","contactEquationStiffness","frictionEquationStiffness","contactEquationRelaxation","frictionEquationRelaxation","sweepBox","halfExtent","orientation","options","pool","results","sweepBoxClosest","result","sweepSphere","radius","sweepSphereClosest","sweepCapsule","height","sweepCapsuleClosest","destroy","length","emitEvents","emitTriggeredEvents","emitCollisionEvents","syncSceneToPhysics","i","syncAfterEvents","step","deltaTime","timeSinceLastCalled","maxSubStep","syncPhysicsToScene","_debugDraw","raycastClosest","maxDistance","hit","rayResult","raycast","raycastAll","r","add","push","getSharedBody","node","wrappedBody","addSharedBody","sharedBody","indexOf","addBody","body","removeSharedBody","array","fastRemoveAt","remove","addConstraint","constraint","removeConstraint","debugDrawFlags","debugDrawConstraintSize","_getDebugRenderer","_mainWindow","cameras","root","mainWindow","initGeometryRenderer","geometryRenderer","debugRenderer","j","wrappedShapes","shape","getAABB","addBoundingBox","RaycastResult","checkCollisionResponse","collisionFilterGroup","collisionFilterMask","skipBackfaces"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/physics/cannon/cannon-world.ts"],"mappings":"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"}