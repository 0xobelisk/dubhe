{"version":3,"names":["TwoBoneIKPositionSanityChecker","SANITY_CHECK_ENABLED","solveTwoBoneIK","solveTwoBoneIKPositions","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","setters","_virtualInternal253AconstantsJs","DEBUG","_coreIndexJs","approx","clamp","Quat","Vec3","_twoBoneIkDebuggerJs","debugTwoBoneIKDraw","execute","constructor","_a","reset","a","b","c","copy","_dAB","distance","_dBC","check","_b","_c","CHECK_EPSILON","dAB","dBC","_export","cacheQuat","cacheHint","cacheBSolved","cacheCSolved","calculateRotationBetweenRays","cacheVec3_1","cacheVec3_2","out","sourceOrigin","sourceDestination","targetOrigin","targetDestination","rotationTo","subtract","normalize","root","middle","end","target","middlePositionHint","debugKey","position","pA","pB","pC","qC","rotation","bSolved","cSolved","qA","multiply","qB","cacheDirAT","cacheDirAB","cacheDirHeightLine","cacheSanityChecker","middleTarget","sanityCheck","dAT","dirAT","chainLength","scaleAndAdd","cosá¸‚AT","dirAB","dirHeightLine","projectOnPlane","dAD","hSqr","h","Math","sqrt"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/animation/marionette/pose-graph/pose-nodes/ik/solve-two-bone-ik.ts"],"mappings":"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"}