{"version":3,"names":["DynamicAtlasManager","dynamicAtlasManager","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","_export","setters","_virtualInternal253AconstantsJs","EDITOR_NOT_IN_PREVIEW","_coreIndexJs","System","macro","js","cclegacy","_assetAssetsAssetEnumJs","Filter","_atlasJs","Atlas","_gameIndexJs","director","execute","constructor","args","_atlases","_atlasIndex","_maxAtlasCount","_textureSize","_maxFrameSize","_textureBleeding","_enabled","enabled","reset","on","Director","EVENT_BEFORE_SCENE_LAUNCH","beforeSceneLoad","off","maxAtlasCount","atlasCount","length","textureBleeding","enable","textureSize","maxFrameSize","newAtlas","atlas","push","init","CLEANUP_IMAGE_CACHE","insertSpriteFrame","spriteFrame","_original","packable","sampler","texture","getSamplerInfo","minFilter","LINEAR","magFilter","mipFilter","NONE","frame","i","l","destroy","deleteAtlasSpriteFrame","array","fastRemove","_innerSpriteFrames","_texture","deleteAtlasTexture","deleteInnerTexture","isEmpty","splice","packToDynamicAtlas","comp","width","height","packedFrame","_setDynamicAtlasFrame","instance","registerSystem","internal"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/2d/utils/dynamic-atlas/atlas-manager.ts"],"mappings":"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"}