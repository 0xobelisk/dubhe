{"version":3,"names":["ccclass","_coreDataDecoratorsIndexJs","displayOrder","type","serializable","_defineJs","SetIndex","_passPhaseJs","getPhaseID","_renderQueueJs","renderQueueClearFunc","convertRenderQueue","renderQueueSortFunc","_gfxIndexJs","ClearFlagBit","Color","Rect","_pipelineFuncsJs","SRGBToLinear","_renderInstancedQueueJs","RenderInstancedQueue","_renderStageJs","RenderStage","_enumJs","DeferredStagePriority","_renderSceneCorePassJs","BatchingSchemes","_pipelineSerializationJs","RenderQueueDesc","RenderQueueSortMode","execute","colors","_export","GbufferStage","_dec","_dec2","_dec3","_class","_class2","_class3","constructor","renderQueues","_initializer","_renderQueues","_renderArea","_instancedQueue","_phaseID","initialize","info","activate","pipeline","flow","i","length","destroy","render","camera","clear","_pipeline","device","forEach","generateRenderArea","updateQuadVertexData","window","renderObjects","pipelineSceneData","m","p","k","ro","subModels","model","subModel","passes","pass","phase","batchingScheme","INSTANCING","instancedBuffer","getInstancedBuffer","merge","queue","add","insertRenderPass","cmdBuff","commandBuffers","uploadBuffers","clearFlag","COLOR","isHDR","clearColor","x","y","z","w","deferredData","getPipelineRenderData","framebuffer","gbufferFrameBuffer","renderPass","beginRenderPass","clearDepth","clearStencil","setScissor","generateScissor","setViewport","generateViewport","bindDescriptorSet","GLOBAL","descriptorSet","recordCommandBuffer","endRenderPass","initInfo","name","priority","GBUFFER","tag","isTransparent","sortMode","FRONT_TO_BACK","stages","BACK_TO_FRONT","_applyDecoratedInitializer","prototype"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/rendering/deferred/gbuffer-stage.ts"],"mappings":"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"}