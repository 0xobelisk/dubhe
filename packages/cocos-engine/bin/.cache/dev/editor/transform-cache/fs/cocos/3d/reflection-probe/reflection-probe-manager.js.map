{"version":3,"names":["ReflectionProbeManager","REFLECTION_PROBE_DEFAULT_MASK","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","_export","setters","_frameworkMeshRendererJs","MeshRenderer","_reflectionProbeEnumJs","ReflectionProbeType","_assetAssetsIndexJs","ImageAsset","Texture2D","_assetAssetsAssetEnumJs","PixelFormat","_coreIndexJs","Vec3","geometry","cclegacy","_renderSceneSceneReflectionProbeJs","ProbeType","_sceneGraphLayersJs","Layers","execute","makeMaskExclude","BitMask","UI_2D","UI_3D","GIZMOS","EDITOR","SCENE_GIZMO","PROFILER","Enum","IGNORE_RAYCAST","constructor","_probes","_useCubeModels","Map","_usePlanarModels","_updateForRuntime","_dataTexture","_registeredEvent","updateForRuntime","val","registerEvent","director","on","Director","EVENT_BEFORE_UPDATE","onUpdateProbes","length","scene","getScene","renderScene","models","i","model","node","layer","reflectionProbeType","BAKED_CUBEMAP","_isUsedBlending","selectReflectionProbe","PLANAR_REFLECTION","selectPlanarReflectionProbe","filterModelsForPlanarReflection","clearPlanarReflectionMap","probe","entry","entries","_updatePlanarMapOfModel","register","index","indexOf","push","updateProbeData","unregister","del","splice","_removeDependentModels","exists","probeId","getProbeId","getNewReflectionProbeId","getProbes","getProbeById","clearAll","getProbeByCamera","camera","updateBakedCubemap","_getModelsByProbe","cubemap","_updateCubemapOfModel","needRefresh","reflectionProbeBlendId","_updateBlendCubemap","updatePlanarMap","texture","previewPlane","meshRender","getComponent","updateProbePlanarMap","worldBounds","probeType","PLANAR","updateWorldBound","intersect","aabbWithAABB","boundingBox","set","has","old","get","delete","realtimePlanarTexture","getGFXTexture","nearest","_getNearestProbe","CUBE","updatePreviewSphere","previewSphere","updateProbeCubemap","updateReflectionProbeId","updatePreviewPlane","maxId","getMaxProbeId","height","dataWidth","destroy","buffer","Float32Array","bufferOffset","worldPosition","x","y","z","size","mipAndUseRGBE","isRGBE","mipmapLevel","up","updateView","Uint8Array","image","_data","_compressed","width","format","RGBA8888","setFilters","Filter","NONE","setMipFilter","setWrapMode","WrapMode","CLAMP_TO_EDGE","uploadData","j","updateReflectionProbeDataMap","sort","a","b","getUsedReflectionProbe","planarReflection","setReflectionProbe","blendProbe","_updateBlendProbeInfo","updateProbeOfModels","nearestProbe","minDistance","Infinity","validate","distance","_getBlendProbe","temp","aDistance","bDistance","useModels","keys","p","BLEND_PROBES","BLEND_PROBES_AND_SKYBOX","updateReflectionProbeBlendId","updateProbeBlendCubemap","updateReflectionProbeBlendWeight","_calculateBlendWeight","d1","d2","_calculateBlendOfSkybox","aabb1","aabb2","aMin","aMax","bMin","bMax","subtract","center","halfExtents","add","inside","fullSize","multiplyScalar","boundaryXAdd","boundaryXSub","boundaryYAdd","boundaryYSub","boundaryZAdd","boundaryZSub","weights","offset","Math","abs","probeManager","internal","reflectionProbeManager"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/3d/reflection-probe/reflection-probe-manager.ts"],"mappings":"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"}