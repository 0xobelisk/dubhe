{"version":3,"names":["PostProcessBuilder","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","_export","setters","_virtualInternal253AconstantsJs","EDITOR","_renderSceneSceneIndexJs","CameraProjection","CameraUsage","_utilsPassContextJs","passContext","_passesForwardFinalPassJs","ForwardFinalPass","_customDefineJs","getCameraUniqueID","_passesForwardPassJs","ForwardPass","_passesTaaPassJs","TAAPass","_passesFsrPassJs","FSRPass","_passesBlitScreenPassJs","BlitScreenPass","_passesShadowPassJs","ShadowPass","_passesHbaoPassJs","HBAOPass","_componentsPostProcessJs","PostProcess","_gameIndexJs","director","_miscIndexJs","CameraComponent","Camera","_passesIndexJs","BloomPass","ColorGradingPass","DofPass","FloatOutputProcessPass","ForwardTransparencyPass","ForwardTransparencySimplePass","FxaaPass","PostFinalPass","SkinPass","_pipelineEventJs","PipelineEventType","execute","constructor","pipelines","Map","init","onGlobalPipelineStateChanged","passes","get","i","length","pass","forward","forwardFinal","shadowPass","addPass","getPass","passClass","pipelineName","pp","find","p","set","oldIdx","findIndex","name","splice","push","insertPass","idx","initEditor","root","cameraList","forEach","cam","usePostProcess","projectionType","PERSPECTIVE","applyPreviewCamera","camera","node","parent","camComp","getComponent","oriCamera","postProcess","resortEditorCameras","cameras","newCameras","c","indexOf","setup","ppl","forwardPass","depthSlotName","isFinalCamera","isFinalPass","globalPP","all","global","scene","update","cameraUsage","PREVIEW","addBuiltinReflectionProbePass","pipelineEvent","emit","RENDER_CAMERA_BEGIN","renderCamera","getCameraPipelineName","pipeline","getCameraPasses","passPathName","updateViewPort","taaPass","checkEnable","applyCameraJitter","updateSample","floatOutputPass","lastPass","hdrInputName","getHDRInputName","render"],"sources":["file:///Users/henryliu/obelisk/fish-game/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/rendering/post-process/post-process-builder.ts"],"mappings":"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"}